var colors,removeBtn,sandbox,hltr,serializeBtn,deserializeBtn,marca_tiempo,ariabuttonHigh,serialized="";$(document).ready(function(){-1!=jQuery.inArray(idioma[0],lenguages)?$.ajax({url:"../../contentunit/languages/"+idioma[0]+".json",type:"GET",dataType:"json",async:!1,crossOrigin:!0,success:function(t){ariabuttonHigh=t.Highlight},error:function(t,i,e){console.log("Status: "+i),console.log("Error: "+e)}}):$.ajax({url:"../../contentunit/languages/en.json",type:"GET",dataType:"json",async:!1,crossOrigin:!0,success:function(t){ariabuttonHigh=t.Highlight},error:function(t,i,e){console.log("Status: "+i),console.log("Error: "+e)}}),$("div#highlight").html('\x3c!-- highlight button --\x3e<div style="position: fixed; top: 175px; right: 0; z-index: 1000;"><button type="button" aria-label="'+ariabuttonHigh+'" class="btn btn-dark rounded-0 text-white" data-toggle="modal" data-target="#highlightModal"><i class="fas fa-highlighter fa-3x"></i></button></div>\x3c!-- highlight modal --\x3e<div class="modal fade" id="highlightModal" tabindex="-1" aria-labelledby="highlightModalLabel" aria-hidden="true"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header"><h5 class="modal-title text-white" id="highlightModalLabel"></h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><fieldset class="form-group mt-4"><legend id="highlightingColor" class="col-form-label col-sm-3 float-sm-left pt-0"></legend><div class="col-sm-9"><div class="color-picker"></div><button type="button" class="btn btn-success deleteAll float-right"></button></div></fieldset><p class="mt-5"><i class="fas fa-info-circle"></i> Select one color to start highlighting. Select the first option again to disable highlighting.</p></div><div class="modal-footer"><button id="closeHighlight" type="button" class="btn btn-light" data-dismiss="modal"></button></div></div></div></div>'),-1!=jQuery.inArray(idioma[0],lenguages)?$.ajax({url:"../../contentunit/languages/"+idioma[0]+".json",type:"GET",dataType:"json",async:!1,crossOrigin:!0,success:function(t){$("#highlightModalLabel").html(t.HighlightOptions),$("#highlightingColor").html(t.HighlightingColor),$("button.deleteAll").html(t.DeleteHighlights),$("button#closeHighlight").html(t.Close)},error:function(t,i,e){console.log("Status: "+i),console.log("Error: "+e)}}):$.ajax({url:"../../contentunit/languages/en.json",type:"GET",dataType:"json",async:!1,crossOrigin:!0,success:function(t){$("#highlightModalLabel").html(t.HighlightOptions),$("#highlightingColor").html(t.HighlightingColor),$("button.deleteAll").html(t.DeleteHighlights),$("button#closeHighlight").html(t.Close)},error:function(t,i,e){console.log("Status: "+i),console.log("Error: "+e)}}),function(){removeBtn=document.getElementById("remove"),serializeBtn=document.getElementById("serialize"),deserializeBtn=document.getElementById("deserialize"),sandbox=document.getElementById("body"),colors=new ColorPicker(document.querySelector(".color-picker")),hltr=new TextHighlighter(sandbox);var t=localStorage.getItem(idunit);hltr.deserializeHighlights(t),hltr.doHighlight=(()=>{}),hltr=void 0,colors.onColorChange(function(t){null==hltr&&(hltr=new TextHighlighter(sandbox)),"transparent"===t?(hltr.doHighlight=(()=>{}),hltr=void 0):(hltr.setColor(t),hltr.doHighlight(!0))})}(),$("div.color-picker>div.selected").html("<hr>")}),$(document).on("mouseover","span.highlighted",function(){$(this).css("cursor","pointer")}),$(document).on("click","span.highlighted",function(){marca_tiempo=$(this).attr("data-timestamp")}),$(document).on("click","i.fa-trash-alt",function(){null==hltr&&(hltr=new TextHighlighter(sandbox)),$("span[data-timestamp="+marca_tiempo+"]").each(function(){hltr.removeOneHighlights(marca_tiempo)}),serialized=hltr.serializeHighlights(),localStorage.setItem(idunit,serialized),$(".popover").remove()}),$(document).on("click","button.deleteAll",function(){null==hltr&&(hltr=new TextHighlighter(sandbox)),hltr.removeHighlights(),localStorage.removeItem(idunit)});
