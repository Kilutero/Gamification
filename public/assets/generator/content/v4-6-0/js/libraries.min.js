window.Rainbow=function(){function t(t,e){return'<span class="'+t.replace(/\./g," ")+(o?" "+o:"")+'">'+e+"</span>"}function e(s,r,o,l){if(null==s)l();else{var h=s.exec(o);if(h){++m,!r.name&&"string"==typeof r.matches[0]&&(r.name=r.matches[0],delete r.matches[0]);var u=h[0],p=h.index,g=h[0].length+p,v=function(){function t(){e(s,r,o,l)}m%100>0?t():setTimeout(t,0)};if(function(t,e){for(var n in d[f])if(t==(n=parseInt(n,10))&&e==d[f][n]||!(t<=n&&e>=d[f][n])||(delete d[f][n],delete c[f][n]),t>=n&&t<d[f][n]||e>n&&e<d[f][n])return!0;return!1}(p,g))v();else{var b=n(r.matches),w=function(e,n,s){if(e>=n.length)s(u);else{var o=h[n[e]];if(o){var l=r.matches[n[e]],c=l.language,d=l.name&&l.matches?l.matches:l,f=function(i,a,r){var o,l;for(o=0,l=1;l<n[e];++l)h[l]&&(o+=h[l].length);a=r?t(r,a):a,u=u.substr(0,o)+u.substr(o).replace(i,a),w(++e,n,s)};c?a(o,c,function(t){f(o,t)}):"string"==typeof l?f(o,o,l):i(o,d.length?d:[d],function(t){f(o,t,l.matches?l.name:0)})}else w(++e,n,s)}};w(0,b,function(e){r.name&&(e=t(r.name,e)),c[f]||(c[f]={},d[f]={}),c[f][p]={replace:h[0],with:e},d[f][p]=g,v()})}}else l()}}function n(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n.sort(function(t,e){return e-t})}function i(t,i,a){++f,function i(s,r){r<s.length?e(s[r].pattern,s[r],t,function(){i(s,++r)}):function(t,e){var i=n(c[f]);!function t(e,n,i,a){if(i<n.length){++g;var s=n[i],r=c[f][s],e=e.substr(0,s)+e.substr(s).replace(r.replace,r.with),s=function(){t(e,n,++i,a)};0<g%250?s():setTimeout(s,0)}else a(e)}(t,i,0,e)}(t,function(t){delete c[f],delete d[f],--f,a(t)})}(i,0)}function a(t,e,n){var a=h[e]||[],s=h[p]||[];e=u[e]?a:a.concat(s);i(t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&(?![\w\#]+;)/g,"&amp;"),e,n)}function s(t,e,n){if(e<t.length){var i=t[e],r=function(t){var e=t.getAttribute("data-language")||t.parentNode.getAttribute("data-language");if(!e){var n=/\blang(?:uage)?-(\w+)/;(t=t.className.match(n)||t.parentNode.className.match(n))&&(e=t[1])}return e}(i);return-1<(" "+i.className+" ").indexOf(" rainbow ")||!r?s(t,++e,n):(r=r.toLowerCase(),i.className+=i.className?" rainbow":"rainbow",a(i.innerHTML,r,function(a){i.innerHTML=a,c={},d={},l&&l(i,r),setTimeout(function(){s(t,++e,n)},0)}))}n&&n()}function r(t,e){var n,i=(t=t&&"function"==typeof t.getElementsByTagName?t:document).getElementsByTagName("pre"),a=t.getElementsByTagName("code"),r=[],o=[];for(n=0;n<i.length;++n)i[n].getElementsByTagName("code").length?i[n].innerHTML=i[n].innerHTML.replace(/^\s+/,"").replace(/\s+$/,""):r.push(i[n]);for(n=0;n<a.length;++n)o.push(a[n]);s(o.concat(r),0,e)}var o,l,c={},d={},h={},u={},f=0,p=0,m=0,g=0;return{extend:function(t,e,n){1==arguments.length&&(e=t,t=p),u[t]=n,h[t]=e.concat(h[t]||[])},b:function(t){l=t},a:function(t){o=t},color:function(t,e,n){return"string"==typeof t?a(t,e,n):"function"==typeof t?r(0,t):void r(t,e)}}}(),document.addEventListener&&document.addEventListener("DOMContentLoaded",Rainbow.color,!1),Rainbow.onHighlight=Rainbow.b,Rainbow.addClass=Rainbow.a,Rainbow.extend([{matches:{1:[{name:"keyword.operator",pattern:/\=|\+/g},{name:"keyword.dot",pattern:/\./g}],2:{name:"string",matches:{name:"constant.character.escape",pattern:/\\('|"){1}/g}}},pattern:/(\(|\s|\[|\=|:|\+|\.)(('|")([^\\\1]|\\.)*?(\3))/gm},{name:"comment",pattern:/\/\*[\s\S]*?\*\/|(\/\/|\#)[\s\S]*?$/gm},{name:"constant.numeric",pattern:/\b(\d+(\.\d+)?(e(\+|\-)?\d+)?(f|d)?|0x[\da-f]+)\b/gi},{matches:{1:"keyword"},pattern:/\b(and|array|as|b(ool(ean)?|reak)|c(ase|atch|har|lass|on(st|tinue))|d(ef|elete|o(uble)?)|e(cho|lse(if)?|xit|xtends|xcept)|f(inally|loat|or(each)?|unction)|global|if|import|int(eger)?|long|new|object|or|pr(int|ivate|otected)|public|return|self|st(ring|ruct|atic)|switch|th(en|is|row)|try|(un)?signed|var|void|while)(?=\(|\b)/gi},{name:"constant.language",pattern:/true|false|null/g},{name:"keyword.operator",pattern:/\+|\!|\-|&(gt|lt|amp);|\||\*|\=/g},{matches:{1:"function.call"},pattern:/(\w+?)(?=\()/g},{matches:{1:"storage.function",2:"entity.name.function"},pattern:/(function)\s(.*?)(?=\()/g}]),Rainbow.extend("javascript",[{name:"selector",pattern:/(\s|^)\$(?=\.|\()/g},{name:"support",pattern:/\b(window|document)\b/g},{matches:{1:"support.property"},pattern:/\.(length|node(Name|Value))\b/g},{matches:{1:"support.function"},pattern:/(setTimeout|setInterval)(?=\()/g},{matches:{1:"support.method"},pattern:/\.(getAttribute|push|getElementById|getElementsByClassName|log|setTimeout|setInterval)(?=\()/g},{name:"string.regexp",matches:{1:"string.regexp.open",2:{name:"constant.regexp.escape",pattern:/\\(.){1}/g},3:"string.regexp.close",4:"string.regexp.modifier"},pattern:/(\/)(?!\*)(.+)(\/)([igm]{0,3})/g},{matches:{1:"storage",3:"entity.function"},pattern:/(var)?(\s|^)(\S*)(?=\s?=\s?function\()/g},{matches:{1:"keyword",2:"entity.function"},pattern:/(new)\s+(.*)(?=\()/g},{name:"entity.function",pattern:/(\w+)(?=:\s{0,}function)/g}]);var DragDropTouch,ColorPicker=function(){"use strict";var t=["transparent","#FFFF7B","#F44336","#8BC34A","#29B6F6"],e="selected";function n(n){var i=this;this.color=t[0],this.selected=null,t.forEach(function(t){var a=document.createElement("div");a.style.backgroundColor=t,i.color===t&&(a.className=e,i.selected=a),a.addEventListener("click",function(){t!==i.color&&(i.color=t,i.selected&&(i.selected.className=""),i.selected=a,i.selected.className=e,"function"==typeof i.callback&&i.callback.call(i,t))},!1),n.appendChild(a)})}return n.prototype.onColorChange=function(t){this.callback=t},n}();function configurarElementosControl(){$(".control_objetivo_unico_click").click(function(){var t=$(this).attr("id"),e=$(this).attr("data-desc"),n=$(this).attr("data-type");setObjetivoCompleto("objetivo"+t,e,n)})}!function(t){"use strict";var e="data-highlighted",n="data-timestamp",i={ELEMENT_NODE:1,TEXT_NODE:3},a=["SCRIPT","STYLE","SELECT","OPTION","BUTTON","OBJECT","APPLET","VIDEO","AUDIO","CANVAS","EMBED","PARAM","METER","PROGRESS"];function s(t,e){return l(t).color()===l(e).color()}function r(t,e){for(var n in t=t||{},e)e.hasOwnProperty(n)&&void 0===t[n]&&(t[n]=e[n]);return t}function o(t,e){t.sort(function(t,n){return l(e?n:t).parents().length-l(e?t:n).parents().length})}var l=function(t){return{addClass:function(e){t.classList?t.classList.add(e):t.className+=" "+e},removeClass:function(e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e+"(\\b|$)","gi")," ")},prepend:function(e){for(var n=Array.prototype.slice.call(e),i=n.length;i--;)t.insertBefore(n[i],t.firstChild)},append:function(e){for(var n=Array.prototype.slice.call(e),i=0,a=n.length;i<a;++i)t.appendChild(n[i])},insertAfter:function(e){return e.parentNode.insertBefore(t,e.nextSibling)},insertBefore:function(e){return e.parentNode.insertBefore(t,e)},remove:function(){t.parentNode.removeChild(t),t=null},contains:function(e){return t!==e&&t.contains(e)},wrap:function(e){return t.parentNode&&t.parentNode.insertBefore(e,t),e.appendChild(t),e},unwrap:function(){var e,n=Array.prototype.slice.call(t.childNodes);return n.forEach(function(t){e=t.parentNode,l(t).insertBefore(t.parentNode),l(e).remove()}),n},parents:function(){for(var e,n=[];e=t.parentNode;)n.push(e),t=e;return n},normalizeTextNodes:function(){if(t){if(t.nodeType===i.TEXT_NODE)for(;t.nextSibling&&t.nextSibling.nodeType===i.TEXT_NODE;)t.nodeValue+=t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);else l(t.firstChild).normalizeTextNodes();l(t.nextSibling).normalizeTextNodes()}},color:function(){return t.style.backgroundColor},fromHTML:function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes},getRange:function(){var e,n=l(t).getSelection();return n.rangeCount>0&&(e=n.getRangeAt(0)),e},removeAllRanges:function(){l(t).getSelection().removeAllRanges()},getSelection:function(){return l(t).getWindow().getSelection()},getWindow:function(){return l(t).getDocument().defaultView},getDocument:function(){return t.ownerDocument||t}}};function c(t,e){if(!t)throw"Missing anchor element";var n,i;this.el=t,this.options=r(e,{color:"transparent",highlightedClass:"highlighted",contextClass:"highlighter-context",onRemoveHighlight:function(){return!0},onBeforeHighlight:function(){return!0},onAfterHighlight:function(){}}),l(this.el).addClass(this.options.contextClass),n=this.el,i=this,n.addEventListener("mouseup",i.highlightHandler.bind(i)),n.addEventListener("touchend",i.highlightHandler.bind(i))}c.prototype.destroy=function(){var t,e;t=this.el,e=this,t.removeEventListener("mouseup",e.highlightHandler.bind(e)),t.removeEventListener("touchend",e.highlightHandler.bind(e)),l(this.el).removeClass(this.options.contextClass)},c.prototype.highlightHandler=function(){this.doHighlight()},c.prototype.doHighlight=function(t){var e,i,a,s,r=l(this.el).getRange();if(r&&!r.collapsed&&"transparent"!=this.options.color){s=+new Date,(e=c.createWrapper(this.options)).setAttribute(n,s),i=this.highlightRange(r,e),a=this.normalizeHighlights(i),this.options.onAfterHighlight(r,a,s);let o=this.serializeHighlights(),d=document.getElementsByTagName("body")[0].dataset.unit;localStorage.setItem(d,o),t||l(this.el).removeAllRanges()}},c.prototype.highlightRange=function(t,n){if(!t||t.collapsed)return[];var s,r,o,c=function(t){var e=t.startContainer,n=t.endContainer,a=t.commonAncestorContainer,s=!0;if(0===t.endOffset){for(;!n.previousSibling&&n.parentNode!==a;)n=n.parentNode;n=n.previousSibling}else n.nodeType===i.TEXT_NODE?t.endOffset<n.nodeValue.length&&n.splitText(t.endOffset):t.endOffset>0&&(n=n.childNodes.item(t.endOffset-1));return e.nodeType===i.TEXT_NODE?t.startOffset===e.nodeValue.length?s=!1:t.startOffset>0&&n===(e=e.splitText(t.startOffset)).previousSibling&&(n=e):e=t.startOffset<e.childNodes.length?e.childNodes.item(t.startOffset):e.nextSibling,{startContainer:e,endContainer:n,goDeeper:s}}(t),d=c.startContainer,h=c.endContainer,u=c.goDeeper,f=!1,p=d,m=[];do{u&&p.nodeType===i.TEXT_NODE&&(-1===a.indexOf(p.parentNode.tagName)&&""!==p.nodeValue.trim()&&((r=n.cloneNode(!0)).setAttribute(e,!0),o=p.parentNode,(l(this.el).contains(o)||o===this.el)&&(s=l(p).wrap(r),m.push(s))),u=!1),p!==h||h.hasChildNodes()&&u||(f=!0),p.tagName&&a.indexOf(p.tagName)>-1&&(h.parentNode===p&&(f=!0),u=!1),u&&p.hasChildNodes()?p=p.firstChild:p.nextSibling?(p=p.nextSibling,u=!0):(p=p.parentNode,u=!1)}while(!f);return m},c.prototype.normalizeHighlights=function(t){var e;return this.flattenNestedHighlights(t),this.mergeSiblingHighlights(t),e=t.filter(function(t){return t.parentElement?t:null}),(e=e.filter(function(t,e,n){return n.indexOf(t)===e})).sort(function(t,e){return t.offsetTop-e.offsetTop||t.offsetLeft-e.offsetLeft}),e},c.prototype.flattenNestedHighlights=function(t){var e,n=this;function i(){var e=!1;return t.forEach(function(i,a){var r=i.parentElement,o=r.previousSibling,c=r.nextSibling;n.isHighlight(r)&&(s(r,i)?(r.replaceChild(i.firstChild,i),t[a]=r,e=!0):(i.nextSibling||(l(i).insertBefore(c||r),e=!0),i.previousSibling||(l(i).insertAfter(o||r),e=!0),r.hasChildNodes()||l(r).remove()))}),e}o(t,!0);do{e=i()}while(e)},c.prototype.mergeSiblingHighlights=function(t){var e=this;function n(t,n){return n&&n.nodeType===i.ELEMENT_NODE&&s(t,n)&&e.isHighlight(n)}t.forEach(function(t){var e=t.previousSibling,i=t.nextSibling;n(t,e)&&(l(t).prepend(e.childNodes),l(e).remove()),n(t,i)&&(l(t).append(i.childNodes),l(i).remove()),l(t).normalizeTextNodes()})},c.prototype.setColor=function(t){this.options.color=t},c.prototype.getColor=function(){return this.options.color},c.prototype.removeHighlights=function(t){var e=t||this.el,n=this.getHighlights({container:e}),a=this;function s(t){l(t).unwrap().forEach(function(t){var e,n,a;n=(e=t).previousSibling,a=e.nextSibling,n&&n.nodeType===i.TEXT_NODE&&(e.nodeValue=n.nodeValue+e.nodeValue,l(n).remove()),a&&a.nodeType===i.TEXT_NODE&&(e.nodeValue=e.nodeValue+a.nodeValue,l(a).remove())})}o(n,!0),n.forEach(function(t){!0===a.options.onRemoveHighlight(t)&&s(t)})},c.prototype.removeOneHighlights=function(t){var e=t||this.el,n=this.getHighlights({container:body});function a(t){l(t).unwrap().forEach(function(t){var e,n,a;n=(e=t).previousSibling,a=e.nextSibling,n&&n.nodeType===i.TEXT_NODE&&(e.nodeValue=n.nodeValue+e.nodeValue,l(n).remove()),a&&a.nodeType===i.TEXT_NODE&&(e.nodeValue=e.nodeValue+a.nodeValue,l(a).remove())})}self=this,o(n,!0),n.forEach(function(t){var n=t.getAttribute("data-timestamp");!0===self.options.onRemoveHighlight(t)&&e==n&&a(t)})},c.prototype.getHighlights=function(t){var i=(t=r(t,{container:this.el,andSelf:!0,grouped:!1})).container.querySelectorAll("["+e+"]"),a=Array.prototype.slice.call(i);return!0===t.andSelf&&t.container.hasAttribute(e)&&a.push(t.container),t.grouped&&(a=function(t){var e=[],i={},a=[];return t.forEach(function(t){var a=t.getAttribute(n);void 0===i[a]&&(i[a]=[],e.push(a)),i[a].push(t)}),e.forEach(function(t){var e=i[t];a.push({chunks:e,timestamp:t,toString:function(){return e.map(function(t){return t.textContent}).join("")}})}),a}(a)),a},c.prototype.isHighlight=function(t){return t&&t.nodeType===i.ELEMENT_NODE&&t.hasAttribute(e)},c.prototype.serializeHighlights=function(){var t=this.getHighlights(),e=this.el,n=[];return o(t,!1),t.forEach(function(t){var a=0,s=t.textContent.length,r=function(t,e){var n,i=[];do{n=Array.prototype.slice.call(t.parentNode.childNodes),i.unshift(n.indexOf(t)),t=t.parentNode}while(t!==e||!t);return i}(t,e),o=t.cloneNode(!0);o.innerHTML="",o=o.outerHTML,t.previousSibling&&t.previousSibling.nodeType===i.TEXT_NODE&&(a=t.previousSibling.length),n.push([o,t.textContent,r.join(":"),a,s])}),JSON.stringify(n)},c.prototype.deserializeHighlights=function(t){var e,n=[],a=this;if(!t)return n;try{e=JSON.parse(t)}catch(t){throw"Can't parse JSON: "+t}return e.forEach(function(t){try{!function(t){for(var e,s,r,o={wrapper:t[0],text:t[1],path:t[2].split(":"),offset:t[3],length:t[4]},c=o.path.pop(),d=a.el;r=o.path.shift();)d=d.childNodes[r];d.childNodes[c-1]&&d.childNodes[c-1].nodeType===i.TEXT_NODE&&(c-=1),(e=(d=d.childNodes[c]).splitText(o.offset)).splitText(o.length),e.nextSibling&&!e.nextSibling.nodeValue&&l(e.nextSibling).remove(),e.previousSibling&&!e.previousSibling.nodeValue&&l(e.previousSibling).remove(),s=l(e).wrap(l().fromHTML(o.wrapper)[0]),n.push(s)}(t)}catch(t){console&&console.warn&&console.warn("Can't deserialize highlight descriptor. Cause: "+t)}}),n},c.prototype.find=function(t,e){var n=l(this.el).getWindow(),i=n.scrollX,a=n.scrollY,s=void 0===e||e;if(l(this.el).removeAllRanges(),n.find)for(;n.find(t,s);)this.doHighlight(!0);else if(n.document.body.createTextRange){var r=n.document.body.createTextRange();for(r.moveToElementText(this.el);r.findText(t,1,s?4:0)&&(l(this.el).contains(r.parentElement())||r.parentElement()===this.el);)r.select(),this.doHighlight(!0),r.collapse(!1)}l(this.el).removeAllRanges(),n.scrollTo(i,a)},c.createWrapper=function(t){var e,n=document.createElement("span");return n.style.backgroundColor=t.color,n.className=t.highlightedClass,n.setAttribute("tabindex",0),n.setAttribute("data-toggle","popover"),e=isMobile.any()?'<i class="fas fa-trash-alt fa-3x"></i>':'<i class="fas fa-trash-alt fa-1_5x"></i>',n.setAttribute("data-content",e),n.classList.add("non-selected"),n},t.TextHighlighter=c}(window),function(){let t=function(t,e){let n=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a},i=function(){let t=$(this),n=t.data("audio"),i=($(this).attr("id"),t.attr("data-obj")),a=t.attr("data-desc"),s=t.attr("data-type"),r=t.attr("data-target"),o=$("#"+n);t.find(".fa").removeClass("fa-play").addClass("fa-pause"),t.find(".audio-state").text(e("audio-pause")),t.data("playing",!0),$(r).removeClass("hidden"),o.trigger("play"),setObjetivoCompleto(i,a,s)},a=function(){let t=$(this),n=t.data("audio"),i=$("#"+n);t.data("playing",!1),t.find(".audio-state").text(e("audio-play")),t.find(".fa").removeClass("fa-pause").addClass("fa-play"),i.trigger("pause")},s=function(){a.apply(this);let t=$(this).data("audio");$("#"+t)[0].currentTime=0,$(this).closest(".widget-audio").find(".audio-widget-content").empty()};$(".js-audio-button").each(function(){let t=$(this),r=s.bind(this),o=i.bind(this),l=a.bind(this),c=t.attr("id"),d=t.data("audio"),h=$("#"+d);$("#speech-to-action-"+c).on("speech-to-action",function(t,r,o){"FINISH"!==r&&("PLAY"===r?i.apply(this):"STOP"===r?s.apply(this):"PAUSE"===r?a.apply(this):"SCROLL DOWN"===r?window.scrollBy(0,.8*window.innerHeight):"SCROLL UP"===r?window.scrollBy(0,.8*-window.innerHeight):"CLOSE"===r&&$(".alert").length?$(".alert").alert("close"):"REPEAT"===r?$(this).closest(".widget-audio").find(".tta-message").append(n("alert-info",e("tta-info-audioterm"))):$(this).closest(".widget-audio").find(".tta-message").append(n("alert-danger",e("tta-error-message"))))}.bind(this)),$(this).find(".audio-state").text(e("audio-play")),h.on("ended",r),$(this).on("click",function(){let e="false"!==(t.data("playing")||"false");(function(){$(this).find(".js-audio-button").each(function(){a.apply(this)})}).apply(t.closest(".content-element")[0]),e?l():o()});let u=$("#"+d).get(0).textTracks[0];void 0!==u&&(u.oncuechange=function(){var e=$(this)[0].activeCues;if(e.length>0){let n="";for(let t=0;t<e.length;t++)n+=e[t].text+"<br><br>";t.closest(".widget-audio").find(".audio-widget-content").html(n.replace(/\n/g,"<br>"))}})})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),function(){let t=function(t,e){let n=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(".pictograma").each(function(){let t=$(this).attr("id"),i=this;$('.pictograma[id="'+t+'"]').append('<div class="mb-3 mb-0 mt-2 text-center choose-feedback" aria-live="polite" aria-relevant="all" aria-atomic="true" id="choose'+t+'"></div>');$("#speech-to-action-"+t).on("speech-to-action",function(t,a,s){if("FINISH"===a)return;let r=$(i).find(".response"),o=r.filter(function(){return $(this).is(":focus")}).first();if(o.length||(o=r.eq(0)).focus(),"START"!==a&&"CURRENT"!==a)if("NEXT"===a||"PREVIOUS"===a){let t=r.index(o),e="NEXT"===a?(t+1)%r.length:(t-1)%r.length;r.eq(e).focus()}else if("GOTO"===a){let t=(parseInt(s["target-position"])-1)%r.length;r.eq(t).focus()}else if("CLOSE"===a&&($(".modal.show").length||$(".alert").length))$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close");else if("SCROLL DOWN"===a)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===a)window.scrollBy(0,.4*-window.innerHeight);else switch(a){case"SELECT":o.trigger("click");break;case"REPEAT":$(i).find(".tta-message").append(n("alert-info",e("tta-info-chooseoption")));break;case"CHECK":$(i).find(".btn-check").trigger("click");break;case"NONE":default:$(i).find(".tta-message").append(n("alert-danger",e("tta-error-message")))}})}),$(".pictograma").on("click",".btn-reset",function(){let t=$(this).closest(".pictograma");t.find(".response").removeClass("acierto btn-danger").addClass("btn-success"),t.find(".choose-feedback").removeClass("verde rojo").empty();let e=t.find("figure"),n=e.find("img");n.css("transition","").css("transform-style","").css("backface-visibility","").css("transform",""),n.show(),e.find(".choose-result").remove()}),$(".pictograma").on("click",".response",function(t){t.preventDefault();var n=$("body").hasClass("gamification"),i=$(this).attr("data-question"),a=$(this).attr("data-response"),s=$("#"+i).attr("data-value"),r=$("#"+i).attr("data-obj"),o=$("#"+i).attr("data-desc");let l=$('figure[data-question="'+i+'"] > img');var c=l.is(":visible")?l.width():$('figure[data-question="'+i+'"]').find(".choose-result").width(),d=l.is(":visible")?l.height():$('figure[data-question="'+i+'"]').find(".choose-result").height();$(this).trigger("gamificate",[s==a,s==a?1:0]),n?$('.response[data-question="'+i+'"]').attr("disabled",!0):(l.css("transition","0.6s").css("transform-style","preserve-3d").css("backface-visibility","hidden").css("transform","rotateY(180deg)"),setObjetivoCompleto(r,o,o),s==a?setTimeout(function(){l.hide(),$('figure[data-question="'+i+'"]').find(".choose-result").remove(),$('figure[data-question="'+i+'"]').append($("<div />").addClass("choose-result").css("display","none").css("background-color","#266448").css("width",c).css("height",d)),$('figure[data-question="'+i+'"] > div').append($("<div />").html('<i class="fa fa-check" aria-hidden="true"></i>').css("color","white").css("font-size","5em").addClass("text-center mx-auto")),$('figure[data-question="'+i+'"] > div').css("transition","0.2s").css("display","block").addClass("d-flex align-items-center"),$('.response[data-question="'+i+'"][data-response='+s+"]").addClass("acierto"),$("#choose"+i).html(""),setTimeout(function(){$("#choose"+i).addClass("verde").removeClass("rojo").html(e("CorrectOption"))},100)},500):setTimeout(function(){l.hide(),$('figure[data-question="'+i+'"]').find(".choose-result").remove(),$('figure[data-question="'+i+'"]').append($("<div />").addClass("choose-result").css("display","none").css("background-color","#b50303").css("width",c).css("height",d)),$('figure[data-question="'+i+'"] > div').append($("<div />").html('<i class="fa fa-times" aria-hidden="true"></i>').css("color","white").css("font-size","5em").addClass("text-center mx-auto")),$('figure[data-question="'+i+'"] > div').css("transition","0.2s").css("display","block").addClass("d-flex align-items-center"),$('.response[data-question="'+i+'"][data-response='+s+"]").addClass("acierto"),$('.response[data-question="'+i+'"][data-response='+a+"]").removeClass("btn-success").addClass("btn-danger"),$("#choose"+i).html(""),setTimeout(function(){$("#choose"+i).addClass("rojo").removeClass("verde").html(e("IncorrectOption"))},100)},500))})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),function(t){"use strict";function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}var n,i,a;function s(t,e){(n(t,e)?a:i)(t,e)}"classList"in document.documentElement?(n=function(t,e){return t.classList.contains(e)},i=function(t,e){t.classList.add(e)},a=function(t,e){t.classList.remove(e)}):(n=function(t,n){return e(n).test(t.className)},i=function(t,e){n(t,e)||(t.className=t.className+" "+e)},a=function(t,n){t.className=t.className.replace(e(n)," ")});var r={hasClass:n,addClass:i,removeClass:a,toggleClass:s,has:n,add:i,remove:a,toggle:s};"function"==typeof define&&define.amd?define(r):t.classie=r}(window),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).dragula=t()}}(function(){return function t(e,n,i){function a(r,o){if(!n[r]){if(!e[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[r]={exports:{}};e[r][0].call(d.exports,function(t){var n=e[r][1][t];return a(n||t)},d,d.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(t,e,n){"use strict";var i={},a="(?:^|\\s)",s="(?:\\s|$)";function r(t){var e=i[t];return e?e.lastIndex=0:i[t]=e=new RegExp(a+t+s,"g"),e}e.exports={add:function(t,e){var n=t.className;n.length?r(e).test(n)||(t.className+=" "+e):t.className=e},rm:function(t,e){t.className=t.className.replace(r(e)," ").trim()}}},{}],2:[function(t,e,n){(function(n){"use strict";var i=t("contra/emitter"),a=t("crossvent"),s=t("./classes"),r=document,o=r.documentElement;function l(t,e,i,s){n.navigator.pointerEnabled?a[e](t,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[i],s):n.navigator.msPointerEnabled?a[e](t,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[i],s):(a[e](t,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[i],s),a[e](t,i,s))}function c(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var e=t.button;return void 0!==e?1&e?1:2&e?3:4&e?2:0:void 0}function d(t,e){return void 0!==n[e]?n[e]:o.clientHeight?o[t]:r.body[t]}function h(t,e,n){var i,a=t||{},s=a.className;return a.className+=" gu-hide",i=r.elementFromPoint(e,n),a.className=s,i}function u(){return!1}function f(){return!0}function p(t){return t.width||t.right-t.left}function m(t){return t.height||t.bottom-t.top}function g(t){return t.parentNode===r?null:t.parentNode}function v(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||function t(e){if(!e)return!1;if("false"===e.contentEditable)return!1;if("true"===e.contentEditable)return!0;return t(g(e))}(t)}function b(t){return t.nextElementSibling||function(){var e=t;do{e=e.nextSibling}while(e&&1!==e.nodeType);return e}()}function w(t,e){var n=function(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}(e),i={pageX:"clientX",pageY:"clientY"};return t in i&&!(t in n)&&i[t]in n&&(t=i[t]),n[t]}e.exports=function(t,e){var n,y,$,_,C,x,E,T,S,k,O;1===arguments.length&&!1===Array.isArray(t)&&(e=t,t=[]);var I,L=null,D=e||{};void 0===D.moves&&(D.moves=f),void 0===D.accepts&&(D.accepts=f),void 0===D.invalid&&(D.invalid=function(){return!1}),void 0===D.containers&&(D.containers=t||[]),void 0===D.isContainer&&(D.isContainer=u),void 0===D.copy&&(D.copy=!1),void 0===D.copySortSource&&(D.copySortSource=!1),void 0===D.revertOnSpill&&(D.revertOnSpill=!1),void 0===D.removeOnSpill&&(D.removeOnSpill=!1),void 0===D.direction&&(D.direction="vertical"),void 0===D.ignoreInputTextSelection&&(D.ignoreInputTextSelection=!0),void 0===D.mirrorContainer&&(D.mirrorContainer=r.body);var j=i({containers:D.containers,start:function(t){var e=B(t);e&&F(e)},end:X,cancel:V,remove:W,destroy:function(){N(!0),q({})},canMove:function(t){return!!B(t)},dragging:!1});return!0===D.removeOnSpill&&j.on("over",function(t){s.rm(t,"gu-hide")}).on("out",function(t){j.dragging&&s.add(t,"gu-hide")}),N(),j;function R(t){return-1!==j.containers.indexOf(t)||D.isContainer(t)}function N(t){var e=t?"remove":"add";l(o,e,"mousedown",H),l(o,e,"mouseup",q)}function P(t){l(o,t?"remove":"add","mousemove",z)}function M(t){var e=t?"remove":"add";a[e](o,"selectstart",A),a[e](o,"click",A)}function A(t){I&&t.preventDefault()}function H(t){if(x=t.clientX,E=t.clientY,1===c(t)&&!t.metaKey&&!t.ctrlKey){var e=t.target,n=B(e);n&&(I=n,P(),"mousedown"===t.type&&(v(e)?e.focus():t.preventDefault()))}}function z(t){if(I)if(0!==c(t)){if(void 0===t.clientX||t.clientX!==x||void 0===t.clientY||t.clientY!==E){if(D.ignoreInputTextSelection){var e=w("clientX",t),i=w("clientY",t);if(v(r.elementFromPoint(e,i)))return}var a=I;P(!0),M(),X(),F(a);var h,u={left:(h=$.getBoundingClientRect()).left+d("scrollLeft","pageXOffset"),top:h.top+d("scrollTop","pageYOffset")};_=w("pageX",t)-u.left,C=w("pageY",t)-u.top,s.add(k||$,"gu-transit"),function(){if(!n){var t=$.getBoundingClientRect();(n=$.cloneNode(!0)).style.width=p(t)+"px",n.style.height=m(t)+"px",s.rm(n,"gu-transit"),s.add(n,"gu-mirror"),D.mirrorContainer.appendChild(n),l(o,"add","mousemove",Z),s.add(D.mirrorContainer,"gu-unselectable"),j.emit("cloned",n,$,"mirror")}}(),Z(t)}}else q({})}function B(t){if(!(j.dragging&&n||R(t))){for(var e=t;g(t)&&!1===R(g(t));){if(D.invalid(t,e))return;if(!(t=g(t)))return}var i=g(t);if(i&&!D.invalid(t,e)&&D.moves(t,i,e,b(t)))return{item:t,source:i}}}function F(t){var e,n;e=t.item,n=t.source,("boolean"==typeof D.copy?D.copy:D.copy(e,n))&&(k=t.item.cloneNode(!0),j.emit("cloned",k,t.item,"copy")),y=t.source,$=t.item,T=S=b(t.item),j.dragging=!0,j.emit("drag",$,y)}function X(){if(j.dragging){var t=k||$;Y(t,g(t))}}function U(){I=!1,P(!0),M(!0)}function q(t){if(U(),j.dragging){var e=k||$,i=w("clientX",t),a=w("clientY",t),s=K(h(n,i,a),i,a);s&&(k&&D.copySortSource||!k||s!==y)?Y(e,s):D.removeOnSpill?W():V()}}function Y(t,e){var n=g(t);k&&D.copySortSource&&e===y&&n.removeChild($),J(e)?j.emit("cancel",t,y,y):j.emit("drop",t,e,y,S),G()}function W(){if(j.dragging){var t=k||$,e=g(t);e&&e.removeChild(t),j.emit(k?"cancel":"remove",t,e,y),G()}}function V(t){if(j.dragging){var e=arguments.length>0?t:D.revertOnSpill,n=k||$,i=g(n),a=J(i);!1===a&&e&&(k?i&&i.removeChild(k):y.insertBefore(n,T)),a||e?j.emit("cancel",n,y,y):j.emit("drop",n,i,y,S),G()}}function G(){var t=k||$;U(),n&&(s.rm(D.mirrorContainer,"gu-unselectable"),l(o,"remove","mousemove",Z),g(n).removeChild(n),n=null),t&&s.rm(t,"gu-transit"),O&&clearTimeout(O),j.dragging=!1,L&&j.emit("out",t,L,y),j.emit("dragend",t),y=$=k=T=S=O=L=null}function J(t,e){var i;return i=void 0!==e?e:n?S:b(k||$),t===y&&i===T}function K(t,e,n){for(var i=t;i&&!a();)i=g(i);return i;function a(){if(!1===R(i))return!1;var a=Q(i,t),s=tt(i,a,e,n);return!!J(i,s)||D.accepts($,i,y,s)}}function Z(t){if(n){t.preventDefault();var e=w("clientX",t),i=w("clientY",t),a=e-_,s=i-C;n.style.left=a+"px",n.style.top=s+"px";var r=k||$,o=h(n,e,i),l=K(o,e,i),c=null!==l&&l!==L;(c||null===l)&&(L&&p("out"),L=l,c&&p("over"));var d=g(r);if(l!==y||!k||D.copySortSource){var u,f=Q(l,o);if(null!==f)u=tt(l,f,e,i);else{if(!0!==D.revertOnSpill||k)return void(k&&d&&d.removeChild(r));u=T,l=y}(null===u&&c||u!==r&&u!==b(r))&&(S=u,l.insertBefore(r,u),j.emit("shadow",r,l,y))}else d&&d.removeChild(r)}function p(t){j.emit(t,r,L,y)}}function Q(t,e){for(var n=e;n!==t&&g(n)!==t;)n=g(n);return n===o?null:n}function tt(t,e,n,i){var a,s="horizontal"===D.direction;return e!==t?(a=e.getBoundingClientRect(),r(s?n>a.left+p(a)/2:i>a.top+m(a)/2)):function(){var e,a,r,o=t.children.length;for(e=0;e<o;e++){if(a=t.children[e],r=a.getBoundingClientRect(),s&&r.left+r.width/2>n)return a;if(!s&&r.top+r.height/2>i)return a}return null}();function r(t){return t?b(e):e}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":5,crossvent:6}],3:[function(t,e,n){e.exports=function(t,e){return Array.prototype.slice.call(t,e)}},{}],4:[function(t,e,n){"use strict";var i=t("ticky");e.exports=function(t,e,n){t&&i(function(){t.apply(n||null,e||[])})}},{ticky:9}],5:[function(t,e,n){"use strict";var i=t("atoa"),a=t("./debounce");e.exports=function(t,e){var n=e||{},s={};return void 0===t&&(t={}),t.on=function(e,n){return s[e]?s[e].push(n):s[e]=[n],t},t.once=function(e,n){return n._once=!0,t.on(e,n),t},t.off=function(e,n){var i=arguments.length;if(1===i)delete s[e];else if(0===i)s={};else{var a=s[e];if(!a)return t;a.splice(a.indexOf(n),1)}return t},t.emit=function(){var e=i(arguments);return t.emitterSnapshot(e.shift()).apply(this,e)},t.emitterSnapshot=function(e){var r=(s[e]||[]).slice(0);return function(){var s=i(arguments),o=this||t;if("error"===e&&!1!==n.throws&&!r.length)throw 1===s.length?s[0]:s;return r.forEach(function(i){n.async?a(i,s,o):i.apply(o,s),i._once&&t.off(e,i)}),t}},t}},{"./debounce":4,atoa:3}],6:[function(t,e,n){(function(n){"use strict";var i=t("custom-event"),a=t("./eventmap"),s=n.document,r=function(t,e,n,i){return t.addEventListener(e,n,i)},o=function(t,e,n,i){return t.removeEventListener(e,n,i)},l=[];function c(t,e,n){var i=function(t,e,n){var i,a;for(i=0;i<l.length;i++)if((a=l[i]).element===t&&a.type===e&&a.fn===n)return i}(t,e,n);if(i){var a=l[i].wrapper;return l.splice(i,1),a}}n.addEventListener||(r=function(t,e,i){return t.attachEvent("on"+e,function(t,e,i){var a=c(t,e,i)||function(t,e,i){return function(e){var a=e||n.event;a.target=a.target||a.srcElement,a.preventDefault=a.preventDefault||function(){a.returnValue=!1},a.stopPropagation=a.stopPropagation||function(){a.cancelBubble=!0},a.which=a.which||a.keyCode,i.call(t,a)}}(t,0,i);return l.push({wrapper:a,element:t,type:e,fn:i}),a}(t,e,i))},o=function(t,e,n){var i=c(t,e,n);if(i)return t.detachEvent("on"+e,i)}),e.exports={add:r,remove:o,fabricate:function(t,e,n){var r=-1===a.indexOf(e)?new i(e,{detail:n}):function(){var t;s.createEvent?(t=s.createEvent("Event")).initEvent(e,!0,!0):s.createEventObject&&(t=s.createEventObject());return t}();t.dispatchEvent?t.dispatchEvent(r):t.fireEvent("on"+e,r)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(t,e,n){(function(t){"use strict";var n=[],i="",a=/^on/;for(i in t)a.test(i)&&n.push(i.slice(2));e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?n:"function"==typeof document.createEvent?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=Boolean(e.bubbles),n.cancelable=Boolean(e.cancelable),n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){var i;i="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},e.exports=i},{}]},{},[2])(2)}),this.createjs=this.createjs||{},function(){var t=function(){throw"UID cannot be instantiated"};t._nextID=0,t.get=function(){return t._nextID++},createjs.UID=t}(),this.createjs=this.createjs||{},function(){var t=function(){this.initialize()},e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.removeEventListener=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent},e._listeners=null,e.initialize=function(){},e.addEventListener=function(t,e){var n=this._listeners;n?this.removeEventListener(t,e):n=this._listeners={};var i=n[t];return i||(i=n[t]=[]),i.push(e),e},e.removeEventListener=function(t,e){var n=this._listeners;if(n){var i=n[t];if(i)for(var a=0,s=i.length;a<s;a++)if(i[a]==e){1==s?delete n[t]:i.splice(a,1);break}}},e.removeAllEventListeners=function(t){t?this._listeners&&delete this._listeners[t]:this._listeners=null},e.dispatchEvent=function(t,e){var n=!1,i=this._listeners;if(t&&i){if("string"==typeof t&&(t={type:t}),t.target=e||this,!(i=i[t.type]))return n;for(var a=0,s=(i=i.slice()).length;a<s;a++){var r=i[a];r instanceof Function?n=n||r.apply(null,[t]):r.handleEvent&&(n=n||r.handleEvent(t))}}return!!n},e.hasEventListener=function(t){var e=this._listeners;return!(!e||!e[t])},e.toString=function(){return"[EventDispatcher]"},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){var t=function(){throw"Ticker cannot be instantiated."};t.useRAF=!1,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._listeners=null,t._pauseable=null,t._paused=!1,t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._rafActive=!1,t._timeoutID=null,t.addListener=function(e,n){null!=e&&(t.removeListener(e),t._pauseable[t._listeners.length]=null==n||n,t._listeners.push(e))},t.init=function(){t._inited=!0,t._times=[],t._tickTimes=[],t._pauseable=[],t._listeners=[],t._times.push(t._lastTime=t._startTime=t._getTime()),t.setInterval(t._interval)},t.removeListener=function(e){var n=t._listeners;n&&(-1!=(e=n.indexOf(e))&&(n.splice(e,1),t._pauseable.splice(e,1)))},t.removeAllListeners=function(){t._listeners=[],t._pauseable=[]},t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval},t.getMeasuredFPS=function(e){return 2>t._times.length?-1:(null==e&&(e=0|t.getFPS()),e=Math.min(t._times.length-1,e),1e3/((t._times[0]-t._times[e])/e))},t.setPaused=function(e){t._paused=e},t.getPaused=function(){return t._paused},t.getTime=function(e){return t._getTime()-t._startTime-(e?t._pausedTime:0)},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleAF=function(){t._rafActive=!1,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleTimeout=function(){t.timeoutID=null,t._setupTick(),t._tick()},t._setupTick=function(){if(!t._rafActive&&null==t.timeoutID){if(t.useRAF){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(e)return e(t._handleAF),void(t._rafActive=!0)}t.timeoutID=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t._getTime();t._ticks++;var n=e-t._lastTime,i=t._paused;i&&(t._pausedTicks++,t._pausedTime+=n),t._lastTime=e;for(var a=t._pauseable,s=t._listeners.slice(),r=s?s.length:0,o=0;o<r;o++){var l=s[o];null==l||i&&a[o]||(l.tick?l.tick(n,i):l instanceof Function&&l(n,i))}for(t.dispatchEvent({type:"tick",paused:i,delta:n,time:e,runTime:e-t._pausedTime}),t._tickTimes.unshift(t._getTime()-e);100<t._tickTimes.length;)t._tickTimes.pop();for(t._times.unshift(e);100<t._times.length;)t._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return e&&e.call(performance)||(new Date).getTime()},t.init(),createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){var t=function(t,e,n,i,a,s,r,o,l){this.initialize(t,e,n,i,a,s,r,o,l)},e=t.prototype;e.stageX=0,e.stageY=0,e.rawX=0,e.rawY=0,e.type=null,e.nativeEvent=null,e.onMouseMove=null,e.onMouseUp=null,e.target=null,e.pointerID=0,e.primary=!1,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e.initialize=function(t,e,n,i,a,s,r,o,l){this.type=t,this.stageX=e,this.stageY=n,this.target=i,this.nativeEvent=a,this.pointerID=s,this.primary=r,this.rawX=null==o?e:o,this.rawY=null==l?n:l},e.clone=function(){return new t(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=t}(),this.createjs=this.createjs||{},function(){var t=function(t,e,n,i,a,s){this.initialize(t,e,n,i,a,s)},e=t.prototype;t.identity=null,t.DEG_TO_RAD=Math.PI/180,e.a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.alpha=1,e.shadow=null,e.compositeOperation=null,e.initialize=function(t,e,n,i,a,s){return null!=t&&(this.a=t),this.b=e||0,this.c=n||0,null!=i&&(this.d=i),this.tx=a||0,this.ty=s||0,this},e.prepend=function(t,e,n,i,a,s){var r=this.tx;if(1!=t||0!=e||0!=n||1!=i){var o=this.a,l=this.c;this.a=o*t+this.b*n,this.b=o*e+this.b*i,this.c=l*t+this.d*n,this.d=l*e+this.d*i}return this.tx=r*t+this.ty*n+a,this.ty=r*e+this.ty*i+s,this},e.append=function(t,e,n,i,a,s){var r=this.a,o=this.b,l=this.c,c=this.d;return this.a=t*r+e*l,this.b=t*o+e*c,this.c=n*r+i*l,this.d=n*o+i*c,this.tx=a*r+s*l+this.tx,this.ty=a*o+s*c+this.ty,this},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty),this.prependProperties(t.alpha,t.shadow,t.compositeOperation),this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty),this.appendProperties(t.alpha,t.shadow,t.compositeOperation),this},e.prependTransform=function(e,n,i,a,s,r,o,l,c){if(s%360){var d=s*t.DEG_TO_RAD;s=Math.cos(d),d=Math.sin(d)}else s=1,d=0;return(l||c)&&(this.tx-=l,this.ty-=c),r||o?(r*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.prepend(s*i,d*i,-d*a,s*a,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(r),Math.cos(r),e,n)):this.prepend(s*i,d*i,-d*a,s*a,e,n),this},e.appendTransform=function(e,n,i,a,s,r,o,l,c){if(s%360){var d=s*t.DEG_TO_RAD;s=Math.cos(d),d=Math.sin(d)}else s=1,d=0;return r||o?(r*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(r),Math.cos(r),e,n),this.append(s*i,d*i,-d*a,s*a,0,0)):this.append(s*i,d*i,-d*a,s*a,e,n),(l||c)&&(this.tx-=l*this.a+c*this.c,this.ty-=l*this.b+c*this.d),this},e.rotate=function(t){var e=Math.cos(t);t=Math.sin(t);var n=this.a,i=this.c,a=this.tx;return this.a=n*e-this.b*t,this.b=n*t+this.b*e,this.c=i*e-this.d*t,this.d=i*t+this.d*e,this.tx=a*e-this.ty*t,this.ty=a*t+this.ty*e,this},e.skew=function(e,n){return e*=t.DEG_TO_RAD,n*=t.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.d*=e,this.tx*=t,this.ty*=e,this},e.translate=function(t,e){return this.tx+=t,this.ty+=e,this},e.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},e.invert=function(){var t=this.a,e=this.b,n=this.c,i=this.d,a=this.tx,s=t*i-e*n;return this.a=i/s,this.b=-e/s,this.c=-n/s,this.d=t/s,this.tx=(n*this.ty-i*a)/s,this.ty=-(t*this.ty-e*a)/s,this},e.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),i=Math.atan2(this.b,this.a);return n==i?(e.rotation=i/t.DEG_TO_RAD,0>this.a&&0<=this.d&&(e.rotation+=0>=e.rotation?180:-180),e.skewX=e.skewY=0):(e.skewX=n/t.DEG_TO_RAD,e.skewY=i/t.DEG_TO_RAD),e},e.reinitialize=function(t,e,n,i,a,s,r,o,l){return this.initialize(t,e,n,i,a,s),this.alpha=r||1,this.shadow=o,this.compositeOperation=l,this},e.appendProperties=function(t,e,n){return this.alpha*=t,this.shadow=e||this.shadow,this.compositeOperation=n||this.compositeOperation,this},e.prependProperties=function(t,e,n){return this.alpha*=t,this.shadow=this.shadow||e,this.compositeOperation=this.compositeOperation||n,this},e.clone=function(){var e=new t(this.a,this.b,this.c,this.d,this.tx,this.ty);return e.shadow=this.shadow,e.alpha=this.alpha,e.compositeOperation=this.compositeOperation,e},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t.identity=new t(1,0,0,1,0,0),createjs.Matrix2D=t}(),this.createjs=this.createjs||{},function(){var t=function(t,e){this.initialize(t,e)},e=t.prototype;e.x=0,e.y=0,e.initialize=function(t,e){this.x=null==t?0:t,this.y=null==e?0:e},e.clone=function(){return new t(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=t}(),this.createjs=this.createjs||{},function(){var t=function(t,e,n,i){this.initialize(t,e,n,i)},e=t.prototype;e.x=0,e.y=0,e.width=0,e.height=0,e.initialize=function(t,e,n,i){this.x=null==t?0:t,this.y=null==e?0:e,this.width=null==n?0:n,this.height=null==i?0:i},e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=t}(),this.createjs=this.createjs||{},function(){var t=function(t,e,n,i,a,s,r){this.initialize(t,e,n,i,a,s,r)},e=t.prototype;e.target=null,e.overLabel=null,e.outLabel=null,e.downLabel=null,e.play=!1,e._isPressed=!1,e._isOver=!1,e.initialize=function(t,e,n,i,a,s,r){t.addEventListener&&(this.target=t,t.cursor="pointer",this.overLabel=null==n?"over":n,this.outLabel=null==e?"out":e,this.downLabel=null==i?"down":i,this.play=a,this.setEnabled(!0),this.handleEvent({}),s&&(r&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(r)),t.hitArea=s))},e.setEnabled=function(t){var e=this.target;t?(e.addEventListener("mouseover",this),e.addEventListener("mouseout",this),e.addEventListener("mousedown",this)):(e.removeEventListener("mouseover",this),e.removeEventListener("mouseout",this),e.removeEventListener("mousedown",this))},e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var e=this.target,n=t.type;"mousedown"==n?(t.addEventListener("mouseup",this),this._isPressed=!0,t=this.downLabel):"mouseup"==n?(this._isPressed=!1,t=this._isOver?this.overLabel:this.outLabel):"mouseover"==n?(this._isOver=!0,t=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,t=this._isPressed?this.overLabel:this.outLabel),this.play?e.gotoAndPlay&&e.gotoAndPlay(t):e.gotoAndStop&&e.gotoAndStop(t)},createjs.ButtonHelper=t}(),this.createjs=this.createjs||{},function(){var t=function(t,e,n,i){this.initialize(t,e,n,i)},e=t.prototype;t.identity=null,e.color=null,e.offsetX=0,e.offsetY=0,e.blur=0,e.initialize=function(t,e,n,i){this.color=t,this.offsetX=e,this.offsetY=n,this.blur=i},e.toString=function(){return"[Shadow]"},e.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},t.identity=new t("transparent",0,0,0),createjs.Shadow=t}(),this.createjs=this.createjs||{},function(){var t=function(t){this.initialize(t)},e=t.prototype;e.complete=!0,e.onComplete=null,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._animations=null,e._frames=null,e._images=null,e._data=null,e._loadCount=0,e._frameHeight=0,e._frameWidth=0,e._numFrames=0,e._regX=0,e._regY=0,e.initialize=function(t){var e,n,i;if(null!=t){if(t.images&&0<(n=t.images.length))for(i=this._images=[],e=0;e<n;e++){if("string"==typeof(a=t.images[e])){var a,s=a;(a=new Image).src=s}i.push(a),!a.getContext&&!a.complete&&(this._loadCount++,this.complete=!1,function(t){a.onload=function(){t._handleImageLoad()}}(this))}if(null!=t.frames)if(t.frames instanceof Array)for(this._frames=[],e=0,n=(i=t.frames).length;e<n;e++)s=i[e],this._frames.push({image:this._images[s[4]?s[4]:0],rect:new createjs.Rectangle(s[0],s[1],s[2],s[3]),regX:s[5]||0,regY:s[6]||0});else n=t.frames,this._frameWidth=n.width,this._frameHeight=n.height,this._regX=n.regX||0,this._regY=n.regY||0,this._numFrames=n.count,0==this._loadCount&&this._calculateFrames();if(null!=(n=t.animations))for(var r in this._animations=[],this._data={},n){if(t={name:r},"number"==typeof(s=n[r]))i=t.frames=[s];else if(s instanceof Array)if(1==s.length)t.frames=[s[0]];else for(t.frequency=s[3],t.next=s[2],i=t.frames=[],e=s[0];e<=s[1];e++)i.push(e);else t.frequency=s.frequency,t.next=s.next,e=s.frames,i=t.frames="number"==typeof e?[e]:e.slice(0);t.next=2>i.length||0==t.next?null:null==t.next||1==t.next?r:t.next,t.frequency||(t.frequency=1),this._animations.push(r),this._data[r]=t}}},e.getNumFrames=function(t){return null==t?this._frames?this._frames.length:this._numFrames:null==(t=this._data[t])?0:t.frames.length},e.getAnimations=function(){return this._animations.slice(0)},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var e;return this.complete&&this._frames&&(e=this._frames[t])?e:null},e.getFrameBounds=function(t){return(t=this.getFrame(t))?new createjs.Rectangle(-t.regX,-t.regY,t.rect.width,t.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){var e=new t;return e.complete=this.complete,e._animations=this._animations,e._frames=this._frames,e._images=this._images,e._data=this._data,e._frameHeight=this._frameHeight,e._frameWidth=this._frameWidth,e._numFrames=this._numFrames,e._loadCount=this._loadCount,e},e._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.onComplete&&this.onComplete(),this.dispatchEvent("complete"))},e._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];for(var t=0,e=this._frameWidth,n=this._frameHeight,i=0,a=this._images;i<a.length;i++){for(var s=a[i],r=(s.width+1)/e|0,o=(s.height+1)/n|0,l=(o=0<this._numFrames?Math.min(this._numFrames-t,r*o):r*o,0);l<o;l++)this._frames.push({image:s,rect:new createjs.Rectangle(l%r*e,(l/r|0)*n,e,n),regX:this._regX,regY:this._regY});t+=o}this._numFrames=t}},createjs.SpriteSheet=t}(),this.createjs=this.createjs||{},function(){function t(t,e,n){this.f=t,this.params=e,this.path=null==n||n}t.prototype.exec=function(t){this.f.apply(t,this.params)};var e=function(){this.initialize()},n=e.prototype;e.getRGB=function(t,e,n,i){return null!=t&&null==n&&(i=e,n=255&t,e=t>>8&255,t=t>>16&255),null==i?"rgb("+t+","+e+","+n+")":"rgba("+t+","+e+","+n+","+i+")"},e.getHSL=function(t,e,n,i){return null==i?"hsl("+t%360+","+e+"%,"+n+"%)":"hsla("+t%360+","+e+"%,"+n+"%,"+i+")"},e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e.STROKE_CAPS_MAP=["butt","round","square"],e.STROKE_JOINTS_MAP=["miter","round","bevel"],e._ctx=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),e.beginCmd=new t(e._ctx.beginPath,[],!1),e.fillCmd=new t(e._ctx.fill,[],!1),e.strokeCmd=new t(e._ctx.stroke,[],!1),n._strokeInstructions=null,n._strokeStyleInstructions=null,n._ignoreScaleStroke=!1,n._fillInstructions=null,n._instructions=null,n._oldInstructions=null,n._activeInstructions=null,n._active=!1,n._dirty=!1,n.initialize=function(){this.clear(),this._ctx=e._ctx},n.isEmpty=function(){return!(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)},n.draw=function(t){this._dirty&&this._updateInstructions();for(var e=this._instructions,n=0,i=e.length;n<i;n++)e[n].exec(t)},n.drawAsPath=function(t){this._dirty&&this._updateInstructions();for(var e,n=this._instructions,i=0,a=n.length;i<a;i++)((e=n[i]).path||0==i)&&e.exec(t)},n.moveTo=function(e,n){return this._activeInstructions.push(new t(this._ctx.moveTo,[e,n])),this},n.lineTo=function(e,n){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.lineTo,[e,n])),this},n.arcTo=function(e,n,i,a,s){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.arcTo,[e,n,i,a,s])),this},n.arc=function(e,n,i,a,s,r){return this._dirty=this._active=!0,null==r&&(r=!1),this._activeInstructions.push(new t(this._ctx.arc,[e,n,i,a,s,r])),this},n.quadraticCurveTo=function(e,n,i,a){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.quadraticCurveTo,[e,n,i,a])),this},n.bezierCurveTo=function(e,n,i,a,s,r){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.bezierCurveTo,[e,n,i,a,s,r])),this},n.rect=function(e,n,i,a){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.rect,[e,n,i,a])),this},n.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new t(this._ctx.closePath,[]))),this},n.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null,this._active=this._dirty=!1,this},n.beginFill=function(n){return this._active&&this._newPath(),this._fillInstructions=n?[new t(this._setProp,["fillStyle",n],!1),e.fillCmd]:null,this},n.beginLinearGradientFill=function(n,i,a,s,r,o){for(this._active&&this._newPath(),a=this._ctx.createLinearGradient(a,s,r,o),s=0,r=n.length;s<r;s++)a.addColorStop(i[s],n[s]);return this._fillInstructions=[new t(this._setProp,["fillStyle",a],!1),e.fillCmd],this},n.beginRadialGradientFill=function(n,i,a,s,r,o,l,c){for(this._active&&this._newPath(),a=this._ctx.createRadialGradient(a,s,r,o,l,c),s=0,r=n.length;s<r;s++)a.addColorStop(i[s],n[s]);return this._fillInstructions=[new t(this._setProp,["fillStyle",a],!1),e.fillCmd],this},n.beginBitmapFill=function(n,i,a){return this._active&&this._newPath(),n=this._ctx.createPattern(n,i||""),n=new t(this._setProp,["fillStyle",n],!1),this._fillInstructions=a?[n,new t(this._ctx.save,[],!1),new t(this._ctx.transform,[a.a,a.b,a.c,a.d,a.tx,a.ty],!1),e.fillCmd,new t(this._ctx.restore,[],!1)]:[n,e.fillCmd],this},n.endFill=function(){return this.beginFill()},n.setStrokeStyle=function(n,i,a,s,r){return this._active&&this._newPath(),this._strokeStyleInstructions=[new t(this._setProp,["lineWidth",null==n?"1":n],!1),new t(this._setProp,["lineCap",null==i?"butt":isNaN(i)?i:e.STROKE_CAPS_MAP[i]],!1),new t(this._setProp,["lineJoin",null==a?"miter":isNaN(a)?a:e.STROKE_JOINTS_MAP[a]],!1),new t(this._setProp,["miterLimit",null==s?"10":s],!1)],this._ignoreScaleStroke=r,this},n.beginStroke=function(e){return this._active&&this._newPath(),this._strokeInstructions=e?[new t(this._setProp,["strokeStyle",e],!1)]:null,this},n.beginLinearGradientStroke=function(e,n,i,a,s,r){for(this._active&&this._newPath(),i=this._ctx.createLinearGradient(i,a,s,r),a=0,s=e.length;a<s;a++)i.addColorStop(n[a],e[a]);return this._strokeInstructions=[new t(this._setProp,["strokeStyle",i],!1)],this},n.beginRadialGradientStroke=function(e,n,i,a,s,r,o,l){for(this._active&&this._newPath(),i=this._ctx.createRadialGradient(i,a,s,r,o,l),a=0,s=e.length;a<s;a++)i.addColorStop(n[a],e[a]);return this._strokeInstructions=[new t(this._setProp,["strokeStyle",i],!1)],this},n.beginBitmapStroke=function(e,n){this._active&&this._newPath();var i=this._ctx.createPattern(e,n||"");return this._strokeInstructions=[new t(this._setProp,["strokeStyle",i],!1)],this},n.endStroke=function(){return this.beginStroke(),this},n.curveTo=n.quadraticCurveTo,n.drawRect=n.rect,n.drawRoundRect=function(t,e,n,i,a){return this.drawRoundRectComplex(t,e,n,i,a,a,a,a),this},n.drawRoundRectComplex=function(e,n,i,a,s,r,o,l){var c=0,d=0,h=0,u=0;0>s&&(s*=c=-1),s>(f=(i<a?i:a)/2)&&(s=f),0>r&&(r*=d=-1),r>f&&(r=f),0>o&&(o*=h=-1),o>f&&(o=f),0>l&&(l*=u=-1),l>f&&(l=f),this._dirty=this._active=!0;var f=this._ctx.arcTo,p=this._ctx.lineTo;return this._activeInstructions.push(new t(this._ctx.moveTo,[e+i-r,n]),new t(f,[e+i+r*d,n-r*d,e+i,n+r,r]),new t(p,[e+i,n+a-o]),new t(f,[e+i+o*h,n+a+o*h,e+i-o,n+a,o]),new t(p,[e+l,n+a]),new t(f,[e-l*u,n+a+l*u,e,n+a-l,l]),new t(p,[e,n+s]),new t(f,[e-s*c,n-s*c,e+s,n,s]),new t(this._ctx.closePath)),this},n.drawCircle=function(t,e,n){return this.arc(t,e,n,0,2*Math.PI),this},n.drawEllipse=function(e,n,i,a){this._dirty=this._active=!0;var s=i/2*.5522848,r=a/2*.5522848,o=e+i,l=n+a;return i=e+i/2,a=n+a/2,this._activeInstructions.push(new t(this._ctx.moveTo,[e,a]),new t(this._ctx.bezierCurveTo,[e,a-r,i-s,n,i,n]),new t(this._ctx.bezierCurveTo,[i+s,n,o,a-r,o,a]),new t(this._ctx.bezierCurveTo,[o,a+r,i+s,l,i,l]),new t(this._ctx.bezierCurveTo,[i-s,l,e,a+r,e,a])),this},n.drawPolyStar=function(e,n,i,a,s,r){this._dirty=this._active=!0,null==s&&(s=0),s=1-s,r=null==r?0:r/(180/Math.PI);var o=Math.PI/a;this._activeInstructions.push(new t(this._ctx.moveTo,[e+Math.cos(r)*i,n+Math.sin(r)*i]));for(var l=0;l<a;l++)r+=o,1!=s&&this._activeInstructions.push(new t(this._ctx.lineTo,[e+Math.cos(r)*i*s,n+Math.sin(r)*i*s])),r+=o,this._activeInstructions.push(new t(this._ctx.lineTo,[e+Math.cos(r)*i,n+Math.sin(r)*i]));return this},n.decodePath=function(t){for(var n=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],i=[2,2,4,6,0],a=0,s=t.length,r=[],o=0,l=0,c=e.BASE_64;a<s;){var d=t.charAt(a),h=c[d],u=h>>3,f=n[u];if(!f||3&h)throw"bad path data (@"+a+"): "+d;for(d=i[u],u||(o=l=0),r.length=0,a++,h=2+(h>>2&1),u=0;u<d;u++){var p=(m=c[t.charAt(a)])>>5?-1:1,m=(31&m)<<6|c[t.charAt(a+1)];3==h&&(m=m<<6|c[t.charAt(a+2)]),m=p*m/10,u%2?o=m+=o:l=m+=l,r[u]=m,a+=h}f.apply(this,r)}return this},n.clone=function(){var t=new e;return t._instructions=this._instructions.slice(),t._activeInstructions=this._activeInstructions.slice(),t._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(t._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(t._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(t._strokeStyleInstructions=this._strokeStyleInstructions.slice()),t._active=this._active,t._dirty=this._dirty,t},n.toString=function(){return"[Graphics]"},n.mt=n.moveTo,n.lt=n.lineTo,n.at=n.arcTo,n.bt=n.bezierCurveTo,n.qt=n.quadraticCurveTo,n.a=n.arc,n.r=n.rect,n.cp=n.closePath,n.c=n.clear,n.f=n.beginFill,n.lf=n.beginLinearGradientFill,n.rf=n.beginRadialGradientFill,n.bf=n.beginBitmapFill,n.ef=n.endFill,n.ss=n.setStrokeStyle,n.s=n.beginStroke,n.ls=n.beginLinearGradientStroke,n.rs=n.beginRadialGradientStroke,n.bs=n.beginBitmapStroke,n.es=n.endStroke,n.dr=n.drawRect,n.rr=n.drawRoundRect,n.rc=n.drawRoundRectComplex,n.dc=n.drawCircle,n.de=n.drawEllipse,n.dp=n.drawPolyStar,n.p=n.decodePath,n._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(e.beginCmd),this._instructions.push.apply(this._instructions,this._activeInstructions),this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions),this._strokeInstructions&&(this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions),this._instructions.push.apply(this._instructions,this._strokeInstructions),this._ignoreScaleStroke?this._instructions.push(new t(this._ctx.save,[],!1),new t(this._ctx.setTransform,[1,0,0,1,0,0],!1),e.strokeCmd,new t(this._ctx.restore,[],!1)):this._instructions.push(e.strokeCmd))},n._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},n._setProp=function(t,e){this[t]=e},createjs.Graphics=e}(),this.createjs=this.createjs||{},function(){var t=function(){this.initialize()},e=t.prototype;t.suppressCrossDomainErrors=!1,(t._hitTestCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).width=t._hitTestCanvas.height=1,t._hitTestContext=t._hitTestCanvas.getContext("2d"),t._nextCacheID=1,e.alpha=1,e.cacheCanvas=null,e.id=-1,e.mouseEnabled=!0,e.name=null,e.parent=null,e.regX=0,e.regY=0,e.rotation=0,e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.shadow=null,e.visible=!0,e.x=0,e.y=0,e.compositeOperation=null,e.snapToPixel=!1,e.onPress=null,e.onClick=null,e.onDoubleClick=null,e.onMouseOver=null,e.onMouseOut=null,e.onTick=null,e.filters=null,e.cacheID=0,e.mask=null,e.hitArea=null,e.cursor=null,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._cacheOffsetX=0,e._cacheOffsetY=0,e._cacheScale=1,e._cacheDataURLID=0,e._cacheDataURL=null,e._matrix=null,e.initialize=function(){this.id=createjs.UID.get(),this._matrix=new createjs.Matrix2D},e.isVisible=function(){return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY))},e.draw=function(t,e){var n=this.cacheCanvas;if(e||!n)return!1;var i=this._cacheScale;return t.drawImage(n,this._cacheOffsetX,this._cacheOffsetY,n.width/i,n.height/i),!0},e.updateContext=function(t){var e,n=this.mask;n&&n.graphics&&!n.graphics.isEmpty()&&(e=n.getMatrix(n._matrix),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),n.graphics.drawAsPath(t),t.clip(),e.invert(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),e=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY),createjs.Stage._snapToPixelEnabled&&this.snapToPixel?t.transform(e.a,e.b,e.c,e.d,e.tx+.5|0,e.ty+.5|0):t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),t.globalAlpha*=this.alpha,this.compositeOperation&&(t.globalCompositeOperation=this.compositeOperation),this.shadow&&this._applyShadow(t,this.shadow)},e.cache=function(t,e,n,i,a){a=a||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this.cacheCanvas.width=Math.ceil(n*a),this.cacheCanvas.height=Math.ceil(i*a),this._cacheOffsetX=t,this._cacheOffsetY=e,this._cacheScale=a||1,this.updateCache()},e.updateCache=function(e){var n=this.cacheCanvas,i=this._cacheScale,a=this._cacheOffsetX*i,s=this._cacheOffsetY*i;if(!n)throw"cache() must be called before updateCache()";var r=n.getContext("2d");r.save(),e||r.clearRect(0,0,n.width,n.height),r.globalCompositeOperation=e,r.setTransform(i,0,0,i,-a,-s),this.draw(r,!0),this._applyFilters(),r.restore(),this.cacheID=t._nextCacheID++},e.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},e.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},e.getStage=function(){for(var t=this;t.parent;)t=t.parent;return t instanceof createjs.Stage?t:null},e.localToGlobal=function(t,e){var n=this.getConcatenatedMatrix(this._matrix);return null==n?null:(n.append(1,0,0,1,t,e),new createjs.Point(n.tx,n.ty))},e.globalToLocal=function(t,e){var n=this.getConcatenatedMatrix(this._matrix);return null==n?null:(n.invert(),n.append(1,0,0,1,t,e),new createjs.Point(n.tx,n.ty))},e.localToLocal=function(t,e,n){return t=this.localToGlobal(t,e),n.globalToLocal(t.x,t.y)},e.setTransform=function(t,e,n,i,a,s,r,o,l){return this.x=t||0,this.y=e||0,this.scaleX=null==n?1:n,this.scaleY=null==i?1:i,this.rotation=a||0,this.skewX=s||0,this.skewY=r||0,this.regX=o||0,this.regY=l||0,this},e.getMatrix=function(t){return(t?t.identity():new createjs.Matrix2D).appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)},e.getConcatenatedMatrix=function(t){t?t.identity():t=new createjs.Matrix2D;for(var e=this;null!=e;)t.prependTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY).prependProperties(e.alpha,e.shadow,e.compositeOperation),e=e.parent;return t},e.hitTest=function(e,n){var i=t._hitTestContext,a=t._hitTestCanvas;return i.setTransform(1,0,0,1,-e,-n),this.draw(i),i=this._testHit(i),a.width=0,a.width=1,i},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.clone=function(){var e=new t;return this.cloneProps(e),e},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e.cloneProps=function(t){t.alpha=this.alpha,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.mouseEnabled=this.mouseEnabled,t.compositeOperation=this.compositeOperation,this.cacheCanvas&&(t.cacheCanvas=this.cacheCanvas.cloneNode(!0),t.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))},e._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},e._tick=function(t){this.onTick&&this.onTick.apply(this,t);var e=this._listeners;e&&e.tick&&this.dispatchEvent({type:"tick",params:t})},e._testHit=function(e){try{var n=1<e.getImageData(0,0,1,1).data[3]}catch(e){if(!t.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},e._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var t=this.filters.length,e=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,i=this.cacheCanvas.height,a=0;a<t;a++)this.filters[a].applyFilter(e,0,0,n,i)},e._hasMouseHandler=function(t){var e=this._listeners;return!!(1&t&&(this.onPress||this.onClick||this.onDoubleClick||e&&(this.hasEventListener("mousedown")||this.hasEventListener("click")||this.hasEventListener("dblclick")))||2&t&&(this.onMouseOver||this.onMouseOut||this.cursor||e&&(this.hasEventListener("mouseover")||this.hasEventListener("mouseout"))))},createjs.DisplayObject=t}(),this.createjs=this.createjs||{},function(){var t=function(){this.initialize()},e=t.prototype=new createjs.DisplayObject;e.children=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(){this.DisplayObject_initialize(),this.children=[]},e.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&t))},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var n=this.children.slice(0),i=0,a=n.length;i<a;i++){var s=n[i];s.isVisible()&&(t.save(),s.updateContext(t),s.draw(t),t.restore())}return!0},e.addChild=function(t){if(null==t)return t;var e=arguments.length;if(1<e){for(var n=0;n<e;n++)this.addChild(arguments[n]);return arguments[e-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t},e.addChildAt=function(t,e){var n=arguments.length,i=arguments[n-1];if(0>i||i>this.children.length)return arguments[n-2];if(2<n){for(var a=0;a<n-1;a++)this.addChildAt(arguments[a],i+a);return arguments[n-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t},e.removeChild=function(t){var e=arguments.length;if(1<e){for(var n=!0,i=0;i<e;i++)n=n&&this.removeChild(arguments[i]);return n}return this.removeChildAt(this.children.indexOf(t))},e.removeChildAt=function(t){var e=arguments.length;if(1<e){for(var n=[],i=0;i<e;i++)n[i]=arguments[i];n.sort(function(t,e){return e-t});var a=!0;for(i=0;i<e;i++)a=a&&this.removeChildAt(n[i]);return a}return!(0>t||t>this.children.length-1)&&((e=this.children[t])&&(e.parent=null),this.children.splice(t,1),!0)},e.removeAllChildren=function(){for(var t=this.children;t.length;)t.pop().parent=null},e.getChildAt=function(t){return this.children[t]},e.getChildByName=function(t){for(var e=this.children,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},e.sortChildren=function(t){this.children.sort(t)},e.getChildIndex=function(t){return this.children.indexOf(t)},e.getNumChildren=function(){return this.children.length},e.swapChildrenAt=function(t,e){var n=this.children,i=n[t],a=n[e];i&&a&&(n[t]=a,n[e]=i)},e.swapChildren=function(t,e){for(var n,i,a=this.children,s=0,r=a.length;s<r&&(a[s]==t&&(n=s),a[s]==e&&(i=s),null==n||null==i);s++);s!=r&&(a[n]=e,a[i]=t)},e.setChildIndex=function(t,e){var n=this.children,i=n.length;if(!(t.parent!=this||0>e||e>=i)){for(var a=0;a<i&&n[a]!=t;a++);a==i||a==e||(n.splice(a,1),e<a&&e--,n.splice(e,0,t))}},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},e.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},e.getObjectsUnderPoint=function(t,e){var n=[],i=this.localToGlobal(t,e);return this._getObjectsUnderPoint(i.x,i.y,n),n},e.getObjectUnderPoint=function(t,e){var n=this.localToGlobal(t,e);return this._getObjectsUnderPoint(n.x,n.y)},e.clone=function(e){var n=new t;if(this.cloneProps(n),e)for(var i=n.children=[],a=0,s=this.children.length;a<s;a++){var r=this.children[a].clone(e);r.parent=n,i.push(r)}return n},e.toString=function(){return"[Container (name="+this.name+")]"},e.DisplayObject__tick=e._tick,e._tick=function(t){for(var e=this.children.length-1;0<=e;e--){var n=this.children[e];n._tick&&n._tick(t)}this.DisplayObject__tick(t)},e._getObjectsUnderPoint=function(e,n,i,a){var s=createjs.DisplayObject._hitTestContext,r=createjs.DisplayObject._hitTestCanvas,o=this._matrix,l=this._hasMouseHandler(a);if(!this.hitArea&&this.cacheCanvas&&l&&(this.getConcatenatedMatrix(o),s.setTransform(o.a,o.b,o.c,o.d,o.tx-e,o.ty-n),s.globalAlpha=o.alpha,this.draw(s),this._testHit(s)))return r.width=0,r.width=1,this;for(var c=this.children.length-1;0<=c;c--){var d=this.children[c],h=d.hitArea;if(d.visible&&(h||d.isVisible())&&(!a||d.mouseEnabled)){var u=a&&d._hasMouseHandler(a);if(!(d instanceof t)||h&&u){if((!a||l||u)&&(d.getConcatenatedMatrix(o),h&&(o.appendTransform(h.x,h.y,h.scaleX,h.scaleY,h.rotation,h.skewX,h.skewY,h.regX,h.regY),o.alpha=h.alpha),s.globalAlpha=o.alpha,s.setTransform(o.a,o.b,o.c,o.d,o.tx-e,o.ty-n),(h||d).draw(s),this._testHit(s))){if(r.width=0,r.width=1,l)return this;if(!i)return d;i.push(d)}}else if(l){if(d=d._getObjectsUnderPoint(e,n))return this}else if(d=d._getObjectsUnderPoint(e,n,i,a),!i&&d)return d}}return null},createjs.Container=t}(),this.createjs=this.createjs||{},function(){var t=function(t){this.initialize(t)},e=t.prototype=new createjs.Container;t._snapToPixelEnabled=!1,e.autoClear=!0,e.canvas=null,e.mouseX=0,e.mouseY=0,e.onMouseMove=null,e.onMouseUp=null,e.onMouseDown=null,e.snapToPixelEnabled=!1,e.mouseInBounds=!1,e.tickOnUpdate=!0,e.mouseMoveOutside=!1,e._pointerData=null,e._pointerCount=0,e._primaryPointerID=null,e._mouseOverIntervalID=null,e.Container_initialize=e.initialize,e.initialize=function(t){this.Container_initialize(),this.canvas="string"==typeof t?document.getElementById(t):t,this._pointerData={},this.enableDOMEvents(!0)},e.update=function(){if(this.canvas){this.autoClear&&this.clear(),t._snapToPixelEnabled=this.snapToPixelEnabled,this.tickOnUpdate&&this._tick(arguments.length?arguments:null);var e=this.canvas.getContext("2d");e.save(),this.updateContext(e),this.draw(e,!1),e.restore()}},e.tick=e.update,e.handleEvent=function(t){"tick"==t.type&&this.update(t)},e.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width,this.canvas.height)}},e.toDataURL=function(t,e){e||(e="image/png");var n,i=this.canvas.getContext("2d"),a=this.canvas.width,s=this.canvas.height;if(t){n=i.getImageData(0,0,a,s);var r=i.globalCompositeOperation;i.globalCompositeOperation="destination-over",i.fillStyle=t,i.fillRect(0,0,a,s)}var o=this.canvas.toDataURL(e);return t&&(i.clearRect(0,0,a,s),i.putImageData(n,0,0),i.globalCompositeOperation=r),o},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null),null==t)t=20;else if(0>=t)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},e.enableDOMEvents=function(t){null==t&&(t=!0);var e,n=this._eventListeners;if(!t&&n){for(e in n)(t=n[e]).t.removeEventListener(e,t.f);this._eventListeners=null}else if(t&&!n){t=window.addEventListener?window:document;var i=this;n=this._eventListeners={};for(e in n.mouseup={t:t,f:function(t){i._handleMouseUp(t)}},n.mousemove={t:t,f:function(t){i._handleMouseMove(t)}},n.dblclick={t:t,f:function(t){i._handleDoubleClick(t)}},(t=this.canvas)&&(n.mousedown={t:t,f:function(t){i._handleMouseDown(t)}}),n)(t=n[e]).t.addEventListener(e,t.f)}},e.clone=function(){var e=new t(null);return this.cloneProps(e),e},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0},null==this._primaryPointerID&&(this._primaryPointerID=t)),e},e._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,e,n,i){if(this.canvas){var a=this._getPointerData(t),s=a.inBounds;this._updatePointerPosition(t,n,i),(s||a.inBounds||this.mouseMoveOutside)&&((this.onMouseMove||this.hasEventListener("stagemousemove"))&&(n=new createjs.MouseEvent("stagemousemove",a.x,a.y,this,e,t,t==this._primaryPointerID,a.rawX,a.rawY),this.onMouseMove&&this.onMouseMove(n),this.dispatchEvent(n)),(i=a.event)&&(i.onMouseMove||i.hasEventListener("mousemove"))&&(n=new createjs.MouseEvent("mousemove",a.x,a.y,i.target,e,t,t==this._primaryPointerID,a.rawX,a.rawY),i.onMouseMove&&i.onMouseMove(n),i.dispatchEvent(n,i.target)))}},e._updatePointerPosition=function(t,e,n){var i=this._getElementRect(this.canvas);e-=i.left,n-=i.top;var a=this.canvas.width,s=this.canvas.height;e/=(i.right-i.left)/a,n/=(i.bottom-i.top)/s,((i=this._getPointerData(t)).inBounds=0<=e&&0<=n&&e<=a-1&&n<=s-1)?(i.x=e,i.y=n):this.mouseMoveOutside&&(i.x=0>e?0:e>a-1?a-1:e,i.y=0>n?0:n>s-1?s-1:n),i.rawX=e,i.rawY=n,t==this._primaryPointerID&&(this.mouseX=i.x,this.mouseY=i.y,this.mouseInBounds=i.inBounds)},e._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch(n){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var n=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),i=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),a=window.getComputedStyle?getComputedStyle(t):t.currentStyle;t=parseInt(a.paddingLeft)+parseInt(a.borderLeftWidth);var s=parseInt(a.paddingTop)+parseInt(a.borderTopWidth),r=parseInt(a.paddingRight)+parseInt(a.borderRightWidth);a=parseInt(a.paddingBottom)+parseInt(a.borderBottomWidth);return{left:e.left+n+t,right:e.right+n-r,top:e.top+i+s,bottom:e.bottom+i-a}},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,e,n){var i,a=this._getPointerData(t);(this.onMouseMove||this.hasEventListener("stagemouseup"))&&(i=new createjs.MouseEvent("stagemouseup",a.x,a.y,this,e,t,t==this._primaryPointerID,a.rawX,a.rawY),this.onMouseUp&&this.onMouseUp(i),this.dispatchEvent(i));var s=a.event;s&&(s.onMouseUp||s.hasEventListener("mouseup"))&&(i=new createjs.MouseEvent("mouseup",a.x,a.y,s.target,e,t,t==this._primaryPointerID,a.rawX,a.rawY),s.onMouseUp&&s.onMouseUp(i),s.dispatchEvent(i,s.target)),(s=a.target)&&(s.onClick||s.hasEventListener("click"))&&this._getObjectsUnderPoint(a.x,a.y,null,!0,this._mouseOverIntervalID?3:1)==s&&(i=new createjs.MouseEvent("click",a.x,a.y,s,e,t,t==this._primaryPointerID,a.rawX,a.rawY),s.onClick&&s.onClick(i),s.dispatchEvent(i)),n?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):a.event=a.target=null},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,!1)},e._handlePointerDown=function(t,e,n,i){var a=this._getPointerData(t);null!=i&&this._updatePointerPosition(t,n,i),(this.onMouseDown||this.hasEventListener("stagemousedown"))&&(n=new createjs.MouseEvent("stagemousedown",a.x,a.y,this,e,t,t==this._primaryPointerID,a.rawX,a.rawY),this.onMouseDown&&this.onMouseDown(n),this.dispatchEvent(n)),(i=this._getObjectsUnderPoint(a.x,a.y,null,this._mouseOverIntervalID?3:1))&&(a.target=i,(i.onPress||i.hasEventListener("mousedown"))&&(n=new createjs.MouseEvent("mousedown",a.x,a.y,i,e,t,t==this._primaryPointerID,a.rawX,a.rawY),i.onPress&&i.onPress(n),i.dispatchEvent(n),(n.onMouseMove||n.onMouseUp||n.hasEventListener("mousemove")||n.hasEventListener("mouseup"))&&(a.event=n)))},e._testMouseOver=function(){if(-1==this._primaryPointerID&&(this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var t=null;this.mouseInBounds&&(t=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var e=this._mouseOverTarget;if(e!=t){var n=this._getPointerData(-1);if(e&&(e.onMouseOut||e.hasEventListener("mouseout"))){var i=new createjs.MouseEvent("mouseout",n.x,n.y,e,null,-1,n.rawX,n.rawY);e.onMouseOut&&e.onMouseOut(i),e.dispatchEvent(i)}e&&(this.canvas.style.cursor=""),t&&(t.onMouseOver||t.hasEventListener("mouseover"))&&(i=new createjs.MouseEvent("mouseover",n.x,n.y,t,null,-1,n.rawX,n.rawY),t.onMouseOver&&t.onMouseOver(i),t.dispatchEvent(i)),t&&(this.canvas.style.cursor=t.cursor||""),this._mouseOverTarget=t}}},e._handleDoubleClick=function(t){var e=this._getPointerData(-1),n=this._getObjectsUnderPoint(e.x,e.y,null,this._mouseOverIntervalID?3:1);n&&(n.onDoubleClick||n.hasEventListener("dblclick"))&&(evt=new createjs.MouseEvent("dblclick",e.x,e.y,n,t,-1,!0,e.rawX,e.rawY),n.onDoubleClick&&n.onDoubleClick(evt),n.dispatchEvent(evt))},createjs.Stage=t}(),this.createjs=this.createjs||{},function(){var t=function(t){this.initialize(t)},e=t.prototype=new createjs.DisplayObject;e.image=null,e.snapToPixel=!0,e.sourceRect=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t){this.DisplayObject_initialize(),"string"==typeof t?(this.image=new Image,this.image.src=t):this.image=t},e.isVisible=function(){var t=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||2<=this.image.readyState);return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&t))},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var n=this.sourceRect;return n?t.drawImage(this.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height):t.drawImage(this.image,0,0),!0},e.clone=function(){var e=new t(this.image);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this.cloneProps(e),e},e.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=t}(),this.createjs=this.createjs||{},function(){var t=function(t){this.initialize(t)},e=t.prototype=new createjs.DisplayObject;e.onAnimationEnd=null,e.currentFrame=-1,e.currentAnimation=null,e.paused=!0,e.spriteSheet=null,e.snapToPixel=!0,e.offset=0,e.currentAnimationFrame=0,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._advanceCount=0,e._animation=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t){this.DisplayObject_initialize(),this.spriteSheet=t},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete&&0<=this.currentFrame;return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&t))},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(this.currentFrame);if(n){var i=n.rect;return t.drawImage(n.image,i.x,i.y,i.width,i.height,-n.regX,-n.regY,i.width,i.height),!0}},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++,this._normalizeFrame()},e.getBounds=function(){return this.spriteSheet.getFrameBounds(this.currentFrame)},e.clone=function(){var e=new t(this.spriteSheet);return this.cloneProps(e),e},e.toString=function(){return"[BitmapAnimation (name="+this.name+")]"},e.DisplayObject__tick=e._tick,e._tick=function(t){var e=this._animation?this._animation.frequency:1;!this.paused&&0==(++this._advanceCount+this.offset)%e&&this.advance(),this.DisplayObject__tick(t)},e._normalizeFrame=function(){var t,e=this._animation,n=this.currentFrame,i=this.paused;if(e)if(t=e.frames.length,this.currentAnimationFrame>=t){var a=e.next;this._dispatchAnimationEnd(e,n,i,a,t-1)||(a?this._goto(a):(this.paused=!0,this.currentAnimationFrame=e.frames.length-1,this.currentFrame=e.frames[this.currentAnimationFrame]))}else this.currentFrame=e.frames[this.currentAnimationFrame];else n>=(t=this.spriteSheet.getNumFrames())&&!this._dispatchAnimationEnd(e,n,i,t-1)&&(this.currentFrame=0)},e._dispatchAnimationEnd=function(t,e,n,i,a){var s=t?t.name:null;return this.onAnimationEnd&&this.onAnimationEnd(this,s,i),this.dispatchEvent({type:"animationend",name:s,next:i}),!n&&this.paused&&(this.currentAnimationFrame=a),this.paused!=n||this._animation!=t||this.currentFrame!=e},e.DisplayObject_cloneProps=e.cloneProps,e.cloneProps=function(t){this.DisplayObject_cloneProps(t),t.onAnimationEnd=this.onAnimationEnd,t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.offset=this.offset,t._animation=this._animation,t.currentAnimationFrame=this.currentAnimationFrame},e._goto=function(t){if(isNaN(t)){var e=this.spriteSheet.getAnimation(t);e&&(this.currentAnimationFrame=0,this._animation=e,this.currentAnimation=t,this._normalizeFrame())}else this.currentAnimation=this._animation=null,this.currentFrame=t},createjs.BitmapAnimation=t}(),this.createjs=this.createjs||{},function(){var t=function(t){this.initialize(t)},e=t.prototype=new createjs.DisplayObject;e.graphics=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t){this.DisplayObject_initialize(),this.graphics=t||new createjs.Graphics},e.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&t))},e.DisplayObject_draw=e.draw,e.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this.graphics.draw(t),!0)},e.clone=function(e){return e=new t(e&&this.graphics?this.graphics.clone():this.graphics),this.cloneProps(e),e},e.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=t}(),this.createjs=this.createjs||{},function(){var t=function(t,e,n){this.initialize(t,e,n)},e=t.prototype=new createjs.DisplayObject;t._workingContext=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),e.text="",e.font=null,e.color="#000",e.textAlign="left",e.textBaseline="top",e.maxWidth=null,e.outline=!1,e.lineHeight=0,e.lineWidth=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t,e,n){this.DisplayObject_initialize(),this.text=t,this.font=e,this.color=n||"#000"},e.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&t))},e.DisplayObject_draw=e.draw,e.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this.outline?t.strokeStyle=this.color:t.fillStyle=this.color,t.font=this.font,t.textAlign=this.textAlign||"start",t.textBaseline=this.textBaseline||"alphabetic",this._drawText(t),!0)},e.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width},e.getMeasuredLineHeight=function(){return 1.2*this._getWorkingContext().measureText("M").width},e.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())},e.clone=function(){var e=new t(this.text,this.font,this.color);return this.cloneProps(e),e},e.toString=function(){return"[Text (text="+(20<this.text.length?this.text.substr(0,17)+"...":this.text)+")]"},e.DisplayObject_cloneProps=e.cloneProps,e.cloneProps=function(t){this.DisplayObject_cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth},e._getWorkingContext=function(){var e=t._workingContext;return e.font=this.font,e.textAlign=this.textAlign||"start",e.textBaseline=this.textBaseline||"alphabetic",e},e._drawText=function(t){var e=!!t;e||(t=this._getWorkingContext());for(var n=String(this.text).split(/(?:\r\n|\r|\n)/),i=this.lineHeight||this.getMeasuredLineHeight(),a=0,s=0,r=n.length;s<r;s++){var o=t.measureText(n[s]).width;if(null==this.lineWidth||o<this.lineWidth)e&&this._drawTextLine(t,n[s],a*i);else{for(var l=(o=n[s].split(/(\s)/))[0],c=1,d=o.length;c<d;c+=2)t.measureText(l+o[c]+o[c+1]).width>this.lineWidth?(e&&this._drawTextLine(t,l,a*i),a++,l=o[c+1]):l+=o[c]+o[c+1];e&&this._drawTextLine(t,l,a*i)}a++}return a},e._drawTextLine=function(t,e,n){this.outline?t.strokeText(e,0,n,this.maxWidth||65535):t.fillText(e,0,n,this.maxWidth||65535)},createjs.Text=t}(),this.createjs=this.createjs||{},function(){var t=function(){throw"SpriteSheetUtils cannot be instantiated"};t._workingCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),t._workingContext=t._workingCanvas.getContext("2d"),t.addFlippedFrames=function(e,n,i,a){if(n||i||a){var s=0;n&&t._flip(e,++s,!0,!1),i&&t._flip(e,++s,!1,!0),a&&t._flip(e,++s,!0,!0)}},t.extractFrame=function(e,n){isNaN(n)&&(n=e.getAnimation(n).frames[0]);var i=e.getFrame(n);if(!i)return null;var a=i.rect,s=t._workingCanvas;return s.width=a.width,s.height=a.height,t._workingContext.drawImage(i.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),(i=new Image).src=s.toDataURL("image/png"),i},t.mergeAlpha=function(t,e,n){n||(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),n.width=Math.max(e.width,t.width),n.height=Math.max(e.height,t.height);var i=n.getContext("2d");return i.save(),i.drawImage(t,0,0),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),i.restore(),n},t._flip=function(e,n,i,a){for(var s=e._images,r=t._workingCanvas,o=t._workingContext,l=s.length/n,c=0;c<l;c++){(d=s[c]).__tmp=c,r.width=0,r.width=d.width,r.height=d.height,o.setTransform(i?-1:1,0,0,a?-1:1,i?d.width:0,a?d.height:0),o.drawImage(d,0,0),(h=new Image).src=r.toDataURL("image/png"),h.width=d.width,h.height=d.height,s.push(h)}for(r=(o=e._frames).length/n,c=0;c<r;c++){var d,h,u=(d=o[c]).rect.clone(),f={image:h=s[d.image.__tmp+l*n],rect:u,regX:d.regX,regY:d.regY};i&&(u.x=h.width-u.x-u.width,f.regX=u.width-d.regX),a&&(u.y=h.height-u.y-u.height,f.regY=u.height-d.regY),o.push(f)}for(i="_"+(i?"h":"")+(a?"v":""),a=e._animations,e=e._data,s=a.length/n,c=0;c<s;c++){for(l={name:(o=a[c])+i,frequency:(d=e[o]).frequency,next:d.next,frames:[]},d.next&&(l.next+=i),o=d.frames,d=0,h=o.length;d<h;d++)l.frames.push(o[d]+r*n);e[l.name]=l,a.push(l.name)}},createjs.SpriteSheetUtils=t}(),this.createjs=this.createjs||{},function(){var t=function(){this.initialize()},e=t.prototype;t.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",t.ERR_RUNNING="a build is already running",e.maxWidth=2048,e.maxHeight=2048,e.spriteSheet=null,e.scale=1,e.padding=1,e.timeSlice=.3,e.progress=-1,e.onComplete=null,e.onProgress=null,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._frames=null,e._animations=null,e._data=null,e._nextFrameIndex=0,e._index=0,e._timerID=null,e._scale=1,e.initialize=function(){this._frames=[],this._animations={}},e.addFrame=function(e,n,i,a,s,r){if(this._data)throw t.ERR_RUNNING;return!(n=n||e.bounds||e.nominalBounds)&&e.getBounds&&(n=e.getBounds()),n?(i=i||1,this._frames.push({source:e,sourceRect:n,scale:i,funct:a,params:s,scope:r,index:this._frames.length,height:n.height*i})-1):null},e.addAnimation=function(e,n,i,a){if(this._data)throw t.ERR_RUNNING;this._animations[e]={frames:n,next:i,frequency:a}},e.addMovieClip=function(e,n,i){if(this._data)throw t.ERR_RUNNING;var a=e.frameBounds;if(!(l=n||e.bounds||e.nominalBounds)&&e.getBounds&&(l=e.getBounds()),!l&&!a)return null;n=this._frames.length;for(var s=e.timeline.duration,r=0;r<s;r++)this.addFrame(e,a&&a[r]?a[r]:l,i,function(t){var e=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(t),this.actionsEnabled=e},[r],e);for(var o in r=e.timeline._labels,e=[],r)e.push({index:r[o],label:o});if(e.length)for(e.sort(function(t,e){return t.index-e.index}),r=0,o=e.length;r<o;r++){i=e[r].label;a=n+(r==o-1?s:e[r+1].index);for(var l=[],c=n+e[r].index;c<a;c++)l.push(c);this.addAnimation(i,l,!0)}},e.build=function(){if(this._data)throw t.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},e.buildAsync=function(e){if(this._data)throw t.ERR_RUNNING;this.timeSlice=e,this._startBuild();var n=this;this._timerID=setTimeout(function(){n._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},e.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.toString=function(){return"[SpriteSheetBuilder]"},e._startBuild=function(){var e=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,animations:this._animations};var i=this._frames.slice();if(i.sort(function(t,e){return t.height<=e.height?-1:1}),i[i.length-1].height+2*e>this.maxHeight)throw t.ERR_DIMENSIONS;for(var a=0,s=0,r=0;i.length;){var o=this._fillRow(i,a,r,n,e);if(o.w>s&&(s=o.w),a+=o.h,!o.h||!i.length){var l=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");l.width=this._getSize(s,this.maxWidth),l.height=this._getSize(a,this.maxHeight),this._data.images[r]=l,o.h||(s=a=0,r++)}}},e._getSize=function(t,e){for(var n=4;Math.pow(2,++n)<t;);return Math.min(e,Math.pow(2,n))},e._fillRow=function(e,n,i,a,s){for(var r=this.maxWidth,o=(o=this.maxHeight)-(n+=s),l=s,c=0,d=e.length-1;0<=d;d--){var h=e[d],u=this._scale*h.scale,f=h.sourceRect,p=h.source,m=Math.floor(u*f.x-s),g=Math.floor(u*f.y-s),v=Math.ceil(u*f.height+2*s);if((f=Math.ceil(u*f.width+2*s))>r)throw t.ERR_DIMENSIONS;v>o||l+f>r||(h.img=i,h.rect=new createjs.Rectangle(l,n,f,v),c=c||v,e.splice(d,1),a[h.index]=[l,n,f,v,i,Math.round(-m+u*p.regX-s),Math.round(-g+u*p.regY-s)],l+=f)}return{w:l,h:c}},e._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.onComplete&&this.onComplete(this),this.dispatchEvent("complete")},e._run=function(){for(var t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=(new Date).getTime()+t,n=!1;e>(new Date).getTime();)if(!this._drawNext()){n=!0;break}if(n)this._endBuild();else{var i=this;this._timerID=setTimeout(function(){i._run()},50-t)}t=this.progress=this._index/this._frames.length,this.onProgress&&this.onProgress(this,t),this.dispatchEvent({type:"progress",progress:t})},e._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,n=t.rect,i=t.sourceRect,a=this._data.images[t.img].getContext("2d");return t.funct&&t.funct.apply(t.scope,t.params),a.save(),a.beginPath(),a.rect(n.x,n.y,n.width,n.height),a.clip(),a.translate(Math.ceil(n.x-i.x*e),Math.ceil(n.y-i.y*e)),a.scale(e,e),t.source.draw(a),a.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=t}(),this.createjs=this.createjs||{},function(){var t=function(t){this.initialize(t)},e=t.prototype=new createjs.DisplayObject;e.htmlElement=null,e._oldMtx=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t){"string"==typeof t&&(t=document.getElementById(t)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=t,(t=t.style).position="absolute",t.transformOrigin=t.WebkitTransformOrigin=t.msTransformOrigin=t.MozTransformOrigin=t.OTransformOrigin="0% 0%"},e.isVisible=function(){return null!=this.htmlElement},e.draw=function(){if(null!=this.htmlElement){var t=this.getConcatenatedMatrix(this._matrix),e=this.htmlElement.style;if(!this.visible)return!0;e.visibility="visible";var n=this._oldMtx||{};return n.alpha!=t.alpha&&(e.opacity=""+t.alpha,n.alpha=t.alpha),n.tx==t.tx&&n.ty==t.ty&&n.a==t.a&&n.b==t.b&&n.c==t.c&&n.d==t.d||(e.transform=e.WebkitTransform=e.OTransform=e.msTransform=["matrix("+t.a,t.b,t.c,t.d,t.tx+.5|0,(t.ty+.5|0)+")"].join(),e.MozTransform=["matrix("+t.a,t.b,t.c,t.d,(t.tx+.5|0)+"px",(t.ty+.5|0)+"px)"].join(),this._oldMtx=t.clone()),!0}},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e.DisplayObject__tick=e._tick,e._tick=function(t){this.htmlElement.style.visibility="hidden",this.DisplayObject__tick(t)},createjs.DOMElement=t}(),this.createjs=this.createjs||{},function(){var t=function(){this.initialize()},e=t.prototype;e.initialize=function(){},e.getBounds=function(){return new createjs.Rectangle(0,0,0,0)},e.applyFilter=function(){},e.toString=function(){return"[Filter]"},e.clone=function(){return new t},createjs.Filter=t}(),this.createjs=this.createjs||{},function(){var t=function(){throw"Touch cannot be instantiated"};t.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled},t.enable=function(e,n,i){return!!(e&&e.canvas&&t.isSupported())&&(e.__touch={pointers:{},multitouch:!n,preventDefault:!i,count:0},"ontouchstart"in window?t._IOS_enable(e):window.navigator.msPointerEnabled&&t._IE_enable(e),!0)},t.disable=function(e){e&&("ontouchstart"in window?t._IOS_disable(e):window.navigator.msPointerEnabled&&t._IE_disable(e))},t._IOS_enable=function(e){var n=e.canvas,i=e.__touch.f=function(n){t._IOS_handleEvent(e,n)};n.addEventListener("touchstart",i,!1),n.addEventListener("touchmove",i,!1),n.addEventListener("touchend",i,!1),n.addEventListener("touchcancel",i,!1)},t._IOS_disable=function(t){var e=t.canvas;e&&(t=t.__touch.f,e.removeEventListener("touchstart",t,!1),e.removeEventListener("touchmove",t,!1),e.removeEventListener("touchend",t,!1),e.removeEventListener("touchcancel",t,!1))},t._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var n=e.changedTouches,i=e.type,a=0,s=n.length;a<s;a++){var r=n[a],o=r.identifier;r.target==t.canvas&&("touchstart"==i?this._handleStart(t,o,e,r.pageX,r.pageY):"touchmove"==i?this._handleMove(t,o,e,r.pageX,r.pageY):("touchend"==i||"touchcancel"==i)&&this._handleEnd(t,o,e))}}},t._IE_enable=function(e){var n=e.canvas,i=e.__touch.f=function(n){t._IE_handleEvent(e,n)};n.addEventListener("MSPointerDown",i,!1),window.addEventListener("MSPointerMove",i,!1),window.addEventListener("MSPointerUp",i,!1),window.addEventListener("MSPointerCancel",i,!1),e.__touch.preventDefault&&(n.style.msTouchAction="none"),e.__touch.activeIDs={}},t._IE_disable=function(t){var e=t.__touch.f;window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)},t._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var n=e.type,i=e.pointerId,a=t.__touch.activeIDs;"MSPointerDown"==n?e.srcElement==t.canvas&&(a[i]=!0,this._handleStart(t,i,e,e.pageX,e.pageY)):a[i]&&("MSPointerMove"==n?this._handleMove(t,i,e,e.pageX,e.pageY):"MSPointerUp"!=n&&"MSPointerCancel"!=n||(delete a[i],this._handleEnd(t,i,e)))}},t._handleStart=function(t,e,n,i,a){var s=t.__touch;if(s.multitouch||!s.count){var r=s.pointers;r[e]||(r[e]=!0,s.count++,t._handlePointerDown(e,n,i,a))}},t._handleMove=function(t,e,n,i,a){t.__touch.pointers[e]&&t._handlePointerMove(e,n,i,a)},t._handleEnd=function(t,e,n){var i=t.__touch,a=i.pointers;a[e]&&(i.count--,t._handlePointerUp(e,n,!0),delete a[e])},createjs.Touch=t}(),function(){var t;(t=(t=this.createjs=this.createjs||{}).EaselJS=t.EaselJS||{}).version="0.6.0",t.buildDate="Tue, 12 Feb 2013 21:12:22 GMT"}(),function(){let t=function(){!function(){if(!localStorage.getItem("font-size"))return void $("html").css("font-size","").removeClass("magnified");$("html").css("font-size",localStorage.getItem("font-size")),$("select#fontSize option:selected").removeAttr("selected"),$("select#fontSize").val(localStorage.getItem("font-size")).attr("selected","selected");let t=$("select#fontSize").find("option:selected").index();$("html").toggleClass("magnified",t>1)}(),localStorage.getItem("font-family")?($("body").css("font-family",localStorage.getItem("font-family")),$("select#fontType option:selected").removeAttr("selected"),$("select#fontType").val(localStorage.getItem("font-family")).attr("selected","selected")):$("body").css("font-family",""),localStorage.getItem("background-color")?($("body").css("background-color",localStorage.getItem("background-color")),$("select#backgroundColor option:selected").removeAttr("selected"),$("select#backgroundColor").val(localStorage.getItem("background-color")).attr("selected","selected")):$("body").css("background-color",""),$("html").removeClass(["letter-spacing-s","letter-spacing-l","letter-spacing-xl","letter-spacing-xxl"]),localStorage.getItem("letter-spacing")&&($("html").addClass(localStorage.getItem("letter-spacing")),$("select#letterSpacing option:selected").removeAttr("selected"),$("select#letterSpacing").val(localStorage.getItem("letter-spacing")).attr("selected","selected")),localStorage.getItem("line-height")?($("body").css("line-height",localStorage.getItem("line-height")),$("select#lineSpacing option:selected").removeAttr("selected"),$("select#lineSpacing").val(localStorage.getItem("line-height")).attr("selected","selected")):$("body").css("line-height",""),localStorage.getItem("word-spacing")?($("body").css("word-spacing",localStorage.getItem("word-spacing")),$("select#wordSpacing option:selected").removeAttr("selected"),$("select#wordSpacing").val(localStorage.getItem("word-spacing")).attr("selected","selected")):$("body").css("word-spacing",""),$("html").removeClass(["paragraph-spacing-s","paragraph-spacing-l","paragraph-spacing-xl","paragraph-spacing-xxl"]),localStorage.getItem("paragraph-spacing")&&($("html").addClass(localStorage.getItem("paragraph-spacing")),$("select#paragraphSpacing option:selected").removeAttr("selected"),$("select#paragraphSpacing").val(localStorage.getItem("paragraph-spacing")).attr("selected","selected"))},e=function(t,e){e&&"0"!==e?localStorage.setItem(t,e):localStorage.removeItem(t)},n=e.bind(null,["font-size"]),i=e.bind(null,["font-family"]),a=e.bind(null,["background-color"]),s=e.bind(null,["letter-spacing"]),r=e.bind(null,["line-height"]),o=e.bind(null,["word-spacing"]),l=e.bind(null,["paragraph-spacing"]);$(document).on("click","button[type=submit]",function(t){t.preventDefault(),$("select :selected").each(function(t){switch(t){case 0:n($(this).val());break;case 1:i($(this).val());break;case 2:a($(this).val());break;case 3:s($(this).val());break;case 4:r($(this).val());break;case 5:o($(this).val());break;case 6:l($(this).val())}}),$("#accesibilityModal").modal("hide")}),$(document).on("click","button.reestablecer",function(){localStorage.removeItem("font-size"),localStorage.removeItem("font-family"),localStorage.removeItem("background-color"),localStorage.removeItem("letter-spacing"),localStorage.removeItem("line-height"),localStorage.removeItem("word-spacing"),localStorage.removeItem("paragraph-spacing"),$(this).closest(".modal").find("select").each(function(){$(this).val($(this).find("option").first().val())}),$("#accesibilityModal").modal("hide")}),$("#accesibilityModal").on("hidden.bs.modal",t);let c=function(t,e){let n,i,a,s,r=0;$("#accesibilityModal").on("shown.bs.modal",function(){n=$(this).find(":focusable"),(i=n.first()).focus()}),$("#accesibilityModal").on("focus",":focusable",function(){$(this).closest(".modal").find("select").not(this).each(function(){this.size=1})}),$("#accesibilityModal").on("blur","select",function(){this.size=1});let o=function(t,e){if($(this).closest(".modal").find("select").each(function(){this.size=1}),0===r){let a=n.length,s=n.index(i),r=s;switch(t){case"NEXT":r=(s+1)%a;break;case"PREVIOUS":r=(s-1)%a;break;case"GOTO":r=(parseInt(e)-1)%a}(i=n.eq(r)).focus()}else if(1===r){let n=a.length,r=a.index(s);i[0].size=n;let o=r;switch(t){case"NEXT":o=(r+1)%n;break;case"PREVIOUS":o=(r-1)%n;break;case"GOTO":o=(parseInt(e)-1)%n}(s=a.eq(o)).closest("select").val(s.val()).change()}};$("#accesibilityModal").on("speech-to-action",function(t,n,l){"START"===n||"ACCESSIBILITY"===n?(r=0,$("#accesibilityModal").modal("show")):"FINISH"===n||"CLOSE"===n?(t.preventDefault(),$("#accesibilityModal").modal("hide"),1===r&&(a=null,s=null,r=0,i.focus())):"SELECT"===n?function(){0===r?$(this).is("select")?(a=$(this).find("option"),s=a.first(),this.size=a.length,$(this).val(s.val()).change(),r=1):i.trigger("click"):(a=null,s=null,r=0,this.size=1,$(this).focus())}.apply(i[0],[n,l]):"NEXT"===n||"PREVIOUS"===n?o(n):"GOTO"===n?o(n,l&&l["target-position"]):"BACK"===n&&1===r?(a=null,s=null,r=0,i[0].size=1,i.focus()):$("#tta-message-global").append(function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html('<span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a}("alert-danger",e("tta-error-message")))})};t();let d=$("html").attr("lang"),h=document.currentScript.src;h=h.substr(0,h.lastIndexOf("/")),fetch(`${h}/../languages/${d}.json`).then(t=>t.json()).then(t=>i18next.createInstance({lng:d,resources:{[d]:{translation:t}}},c))}(),function(){let t=document.currentScript.src;t=t.substr(0,t.lastIndexOf("/"));let e={data:[],ready:!1,initializePlugin:function(){this.ready=!0},createDragDrop:function(e,n,i,a,s,r){let o=$("html").attr("lang");if(!this.ready)throw new Error("DragDrop plugin is not ready. Please, call initialize functionPlugin before using it");let l=function(t,l){let c,d,h=e.substring(e.lastIndexOf("-")+1),u=$(e),f=$(n),p=u.closest(".drag-drop"),m=$(i),g=u.add(f);$(e).closest(".container").attr("tabindex",-1);let v=function(t,e){t.preventDefault(),t.stopPropagation();let n=$(this).find(".drag-drop-option").text();p.find(".drag-item").removeClass("selected"),p.find(".drag-item").filter(function(){return x($(this).find(".drag-drop-option").text(),n)}).first().addClass("selected"),$("#drag-drop-modal-"+h).find(".drag-drop-current-option").html(l("accessible-dragdrop-modal-current-option",{optionIndex:e,option:$(this).find(".drag-drop-option").html(),interpolation:{escapeValue:!1}})),$("#drag-drop-modal-"+h).modal({keyboard:!0,focus:!0,show:!0})},b=function(t,e){let n=t.which||t.keyCode;if(13===n||32===n||38===n||40===n||27===n)if(13===n||32===n){let n=$(this).find(".drag-drop-option").text(),i=e.filter(function(){return x($(this).find(".drag-drop-option").text(),n)}).first(),a=e.index(i);v.apply(this,[t,a+1])}else 38===n?function(t,e){t.preventDefault(),t.stopPropagation();let n=(e.index($(this))-1)%e.length;e.attr("tabindex",-1),e.eq(n).attr("tabindex",0).focus()}.apply(this,[t,e]):40===n?function(t,e){t.preventDefault(),t.stopPropagation();let n=(e.index($(this))+1)%e.length;e.attr("tabindex",-1),e.eq(n).attr("tabindex",0).focus()}.apply(this,[t,e]):27===n&&$(this).blur()},w=function(t,e){let n=t.which||t.keyCode;(9===n&&t.shiftKey||27===n)&&(9===n?(t.preventDefault(),t.stopPropagation(),e.filter(function(){return"0"===$(this).attr("tabindex")}).first().focus()):$(this).blur())},y=function(){let t=u.find(".drag-item"),e=f.find(".drag-item");$("#dragdrop-table-options-"+h+" div button").each(function(){let n=$(this),i=n.parent().find(".response-placeholder"),a=n.index("#dragdrop-table-options-"+h+" div button"),s=t.filter(function(){return x($(this).find(".drag-drop-option").text(),n.find(".drag-drop-option").text())}).first(),r=e.filter(function(){return x($(this).find(".drag-drop-option").text(),n.find(".drag-drop-option").text())}).first();if(s.length)$("#"+h+"-state-"+(a+1)).text(""),$("#dragdrop-table-option-"+h+"-state-"+(a+1)).text(""),i.html(l("accessible-dragdrop-without-association"));else if(r.length){let t=r.parent().index("#drag-elections-"+h+" .drag-container"),e=$("#drag-descriptions-"+h+" .drag-description").eq(t).html(),n=l("accessible-dragdrop-already-matched",{definitionIndex:t+1,definition:e,interpolation:{escapeValue:!1}});$("#"+h+"-state-"+(a+1)).html(n),$("#dragdrop-table-option-"+h+"-state-"+(a+1)).html(n),i.html(l("accessible-dragdrop-response-association",{definition:e,interpolation:{escapeValue:!1}}))}})},_=function(){let t=$("body").hasClass("gamification");$(this).prop("disabled",t),$("#check-"+h).trigger("click")},C=function(){let t=$("body").hasClass("gamification");for(var e=0,n=f.find(".drag-container"),i=m.children(),o=0;o<n.length;o++)if(n.eq(o).has(".drag-item").length){let s=n.eq(o).find(".drag-item");var c=s.find(".drag-drop-option").text();i.eq(o).text()==$.parseHTML(a.filter(t=>$.parseHTML(t.term)[0].textContent===c)[0].definition)[0].textContent?e++:t||u.find(".drag-container").filter(function(){return $(this).is(":empty")}).first().each(function(){$(this).append(s)})}if(y(),!t){let t=$("#result-"+h).add($("#mobile-result-"+h));e==a.length?(setObjetivoCompleto(s,r,"TextualDragAndDrop"),t.removeClass("result-ko"),t.addClass("result-ok"),t.html(""),setTimeout(function(){t.html(l("accessible-dragdrop-text-action-check-ok"))},100)):(t.removeClass("result-ok"),t.addClass("result-ko"),t.html(""),setTimeout(function(){t.html(l("TextNumberCorrect",{num:e}))},100))}$("#check-"+h).trigger("gamificate",[e==a.length,e/a.length])},x=function(t,e){return"string"==typeof t&&"string"==typeof e&&t.toLowerCase()===e.toLowerCase()},E=function(){let t=1;return $.makeArray(m.find(".drag-description").map(function(){return $(this).text()})).map(e=>t+++": "+e)},T=function(){let t=$(this),e=c.index(t),n=u.find(".drag-container").eq(e).first();n.is(":empty")||T.apply(n.find(".drag-item").first());let i=t.find(".drag-drop-option").text();t.parent().empty(),n.append(t),k({lang:o,alertType:"screen-reader",message:l("accessible-dragdrop-dissasociate",{optionIndex:e+1,option:i})})},S=function(t){let e=$(this),n=$(t);if(!e.length||!n.length)throw{name:"UndefinedSourceException",message:"The source or target is not defined."};let i=n.index("#drag-descriptions-"+h+" .drag-description"),a=$("#drag-elections-"+h).find(".drag-container").eq(i),s=a.find(".drag-item").first();e.text()!=s.text()&&(s.length&&T.apply(s),a.append(e),y()),e.focus()},k=async function({action:t,message:e,onEnd:n,alertType:i}={}){t&&!e&&(e=l(`accessible-dragdrop-text-action-${t}`)),await new Promise(t=>{"screen-reader"==i?($("#drag-drop-message-"+h).text(""),setTimeout(function(){$("#drag-drop-message-"+h).html('<span class="sr-only">'+e+"</span>"),t(),setTimeout(function(){$("#drag-drop-message-"+h).html("")},300)},100)):($("#drag-drop-message-"+h).empty().append(I(i,e)),t())})},O=function(t){let e,n,i=g.find(".drag-item.selected").first();if(!i.length)throw{name:"UndefinedSourceException",message:"Could not find source element."};try{e=function(t,e,n,i){let a=e.number,s=a[n.includes("source")?0:a.length-1],r=parseInt(s)-1;return i.eq(r).text()}(0,t,"target-position",$("#drag-descriptions-"+h+" .drag-description")),n=$("#drag-descriptions-"+h+" .drag-description").filter(function(){return x($(this).text(),e)}).first(),S.apply(i[0],[n[0]])}catch(t){throw k({action:"move-error",alertType:"alert-danger"}),t}},I=function(t,e){let n=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",l("accessible-dragdrop-close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),i=$("<div />").addClass("alert alert-dismissible fade show "+t).html(e).append(n);n.on("click",function(){i.alert("close")});let a=Math.max(6e3,60*e.length);return setTimeout(function(){i.alert("close")},a),i.alert(),i},L=function(t,e){let n=$("<button />").addClass("drag-item").attr("aria-haspopup","dialog").attr("aria-labelledby",h+"-prefix-"+e+" "+h+"-option-"+e+" "+h+"-state-"+e),i=$("<span />").addClass("drag-drop-option").attr("id",h+"-option-"+e).html(t),a=$("<span />").addClass("dragdrop-state sr-only").attr("id",h+"-state-"+e).html(""),s=$("<span />").addClass("dragdrop-prefix sr-only").attr("id",h+"-prefix-"+e).html(l("accessibility-option")+" "+e);n.append(i,a,s),n.toggleClass("has-code",3!==$.parseHTML(t)[0].nodeType&&$(t).is("code"));let r=$("<div />").addClass("drag-container");return r.append(n),r},D=function(t){let e=$("<div />").addClass("drag-description");return e.toggleClass("has-code",3!==$.parseHTML(t)[0].nodeType&&$(t).is("code")),e.html(t),e},j=function(t){var e,n,i;for(i=t.length-1;i>0;i--)e=Math.floor(Math.random()*(i+1)),n=t[i],t[i]=t[e],t[e]=n;return t};!function(){let t=a.map(t=>t.term);t=j(t);let e=a.map(t=>t.definition);e=j(e);for(let n=0;n<a.length;n++)u.append(L(t[n],n+1)),f.append($("<div />").addClass("drag-container")),m.append(D(e[n]));p.on("keydown",".drag-item",function(t){b.apply(this,[t,c])}),p.on("click",".drag-item",function(t){let e=$(this).find(".drag-drop-option").text(),n=c.filter(function(){return x($(this).find(".drag-drop-option").text(),e)}).first();v.apply(this,[t,c.index(n)])}),p.find(".btn-reset").on("click",function(){f.find(".drag-item").each(function(){u.find(".drag-container:empty").first().append($(this))}),y(),$("#result-"+h).add($("#mobile-result-"+h)).removeClass("result-ko").removeClass("result-ok").empty()}),p.find("#check-"+h).on("click",C).on("keydown",function(t){w.apply(this,[t,c])});let n=$.makeArray($.makeArray(g.find(".drag-container"))),i={isContainer:function(t){return n.indexOf(t)>=0},moves:function(t,e,n,i){return!0},invalid:function(t,e){return!1},accepts:function(t,e,n,i){return 0==$(e).children().length},removeOnSpill:!1,copy:!1};dragula(n,i).on("dragend",function(t,e,n){y()})}(),(c=g.find(".drag-item")).attr("tabindex",-1),g.find(".drag-item").first().attr("tabindex",0),d=function(){let t=u.find(".drag-item"),e=1,n=p.find("#dragdrop-table-options-"+h),i=u.find(".drag-item").map(function(){let n=$(this).find(".drag-drop-option").text(),i=e,a=$("<div />"),s=$("<button />").addClass("btn btn-success btn-block mb-2 btn-option").attr("aria-haspopup","dialog").attr("tabindex",1===i?"0":"-1").attr("aria-labelledby","dragdrop-table-option-"+h+"-prefix-"+i+" dragdrop-table-option-"+h+"-option-"+i+" dragdrop-table-option-"+h+"-state-"+i),r=$(this).find(".drag-drop-option").html(),o=$("<span />").addClass("drag-drop-option").attr("id","dragdrop-table-option-"+h+"-option-"+i).html(r),c=$("<span />").addClass("dragdrop-state sr-only").attr("id","dragdrop-table-option-"+h+"-state-"+i).html(""),d=$("<span />").addClass("dragdrop-prefix sr-only").attr("id","dragdrop-table-option-"+h+"-prefix-"+i).html(l("accessibility-option")+" "+i);s.toggleClass("has-code",3!==$.parseHTML(r)[0].nodeType&&$(r).is("code")),s.append(o,c,d),e++,s.on("click",function(e){let a=t.filter(function(){return $(this).find(".drag-drop-option").text()===n}).first();v.apply(a[0],[e,i])}),a.append(s);let u=$("<div />").addClass("response-placeholder col-12").attr("aria-hidden","true").html(l("accessible-dragdrop-without-association"));return a.append(u),a[0]}),a=i.find(".btn-option");return a.each(function(){$(this).on("keydown",function(t){b.apply(this,[t,a])})}),n.find(".btn-check").on("click",_).on("keydown",function(t){w.apply(this,[t,a])}).html(l("accessible-dragdrop-check-answers")),n.prepend(i)}.apply(p[0],[h]),p.attr("role","application"),p.prepend(d),$("#speech-to-action-"+h).on("speech-to-action",function(t,e,n){if("FINISH"===e)return;let i=g.find(".drag-item.selected").first(),a=$("#dragdrop-table-options-"+h+" div button"),s=$("#dragdrop-table-options-"+h+" div button").filter(function(){return x($(this).find(".drag-drop-option").text(),i.find(".drag-drop-option").text())}).first(),r=i.length>0?s.index("#dragdrop-table-options-"+h+" div button"):0,o=a.length-1;if(["CURRENT","START","NEXT","PREVIOUS","GOTO"].includes(e)){"NEXT"===e?r=(r+1+o)%o:"PREVIOUS"===e?r=(r-1+o)%o:"GOTO"===e&&(r=(parseInt(n["target-position"])-1)%o),s=a.eq(r),g.find(".drag-item").removeClass("selected"),(i=g.find(".drag-item").filter(function(){return x($(this).find(".drag-drop-option").text(),s.find(".drag-drop-option").text())}).first()).addClass("selected"),s.is(":visible")?s.focus():i.focus();let t=E().join(", "),c="";if(f.has(i).length){let t=i.parent().index("#drag-elections-"+h+" .drag-container"),e=$("#drag-descriptions-"+h+" .drag-description").eq(t).text();c=l("accessible-dragdrop-already-matched",{definitionIndex:t+1,definition:e})}setTimeout(function(){k({alertType:"screen-reader",message:l("accessible-dragdrop-help-text",{optionIndex:r+1,option:i.find(".drag-drop-option").text(),content:c,definitions:t})})},100)}else if("CLOSE"===e&&($(".modal.show").length||$(".alert").length))$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close");else if("SCROLL DOWN"===e)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===e)window.scrollBy(0,.4*-window.innerHeight);else switch(e){case"MATCH":O(n);break;case"REPEAT":k({alertType:"alert-info",message:l("tta-info-drag-drop")});break;case"CHECK":_();break;case"NONE":default:k({action:"unknown",alertType:"alert-danger"})}}),function(){let t=$(this),e=t.find("#drag-drop-modal-"+h),n=t.find(".drag-description").map(function(){let t=$("<li />").addClass("m-1 modal-option"),e=$("<button />").addClass("btn btn-success btn-block").html($(this).html());return e.toggleClass("has-code",3!==$.parseHTML($(this).html())[0].nodeType&&$($(this).html()).is("code")),t.append(e),t[0]});t.find(".modal-options").append(n),e.on("shown.bs.modal",function(){$(this).find("button").first().focus()}),e.on("click",".modal-option button",function(t){t.preventDefault(),t.stopPropagation();let n=$(this).text(),i=g.find(".drag-item.selected").first(),a=$("#drag-descriptions-"+h+" .drag-description").filter(function(){return x($(this).text(),n)}).first();try{S.apply(i[0],[a[0]])}catch(t){return k({action:"move-error",alertType:"alert-danger"}),-1}e.modal("hide")}),e.on("hide.bs.modal",function(){let t=g.find(".drag-item.selected").first();if(t){t.removeClass("selected");let e=$("#dragdrop-table-options-"+h+" div button").filter(function(){return x($(this).find(".drag-drop-option").text(),t.find(".drag-drop-option").text())}).first();e.is(":visible")?e.focus():t.focus()}})}.apply(p[0],[h]),y()};fetch(`${t}/../languages/${o}.json`).then(t=>t.json()).then(t=>i18next.createInstance({lng:o,resources:{[o]:{translation:t}}},l))}};$(".drag-drop").each(function(){let t=$(this).attr("id"),n=JSON.parse((i=$(this).data("content"),decodeURIComponent(atob(i).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))));var i;let a=$(this).data("desc");e.initializePlugin(),e.createDragDrop("#drag-options-"+t,"#drag-elections-"+t,"#drag-descriptions-"+t,n,"objetivo"+t,a)})}(),function(){let t=function(t,e){let n=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(document).on("click",".sctop",function(){let t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},1e3)}),$(".btnmostrar").each(function(){let t=$(this).attr("id");$("#speech-to-action-"+t).on("speech-to-action",function(t,i,a){"FINISH"!==i&&"START"!==i&&("SELECT"===i?$(this).trigger("click"):"SCROLL DOWN"===i?window.scrollBy(0,.8*window.innerHeight):"SCROLL UP"===i?window.scrollBy(0,.8*-window.innerHeight):"CLOSE"===i&&$(".alert").length?$(".alert").alert("close"):"REPEAT"===i?$(this).closest(".widget-image").find(".tta-message").append(n("alert-info",e("tta-info-image"))):$(this).closest(".widget-image").find(".tta-message").append(n("alert-danger",e("tta-error-message"))))}.bind(this)),$(this).on("click",function(){let t=$($(this).attr("data-target"));t.removeClass("hidden"),$(this).attr("aria-expanded")&&$(this).attr("aria-expanded",!0),$(this).attr("aria-disabled")&&$(this).attr("aria-disabled",!0),setTimeout(function(){t.addClass("animate")},1)})})},e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};e.any()&&($("div.container").addClass("container-fluid").removeClass("container"),$(".modal-dialog").css("max-width","100%!important")),window.isMobile=e;let n=$("html").attr("lang"),i=document.currentScript.src;i=i.substr(0,i.lastIndexOf("/")),fetch(`${i}/../languages/${n}.json`).then(t=>t.json()).then(e=>i18next.createInstance({lng:n,resources:{[n]:{translation:e}}},t))}(),jQuery.fn.rPage=function(){for(var t=$(this),e=0,n=t.length;e<n;e++)new i($(t[e]));function i(t){var e;this.label=function(){var t=this.els.filter(".active").index(),e=this;this.els.each(function(){0==e.isNextOrPrevLink($(this))?$(this).addClass("page-away-"+Math.abs(t-$(this).index()).toString()):$(this).index()>t?$(this).addClass("right-etc"):$(this).addClass("left-etc")})},this.makeResponsive=function(){this.reset();for(var t=this.calculateWidth();t>this.els.parent().parent().outerWidth()-10;){if(0==this.removeOne())break;t=this.calculateWidth()}},this.isNextOrPrevLink=function(t){return"›"==t.text()||"‹"==t.text()},this.isRemovable=function(e){if(this.isNextOrPrevLink(e))return!1;var n=this.els.filter(e).index();return 1!=n&&!this.isNextOrPrevLink(t.find("li").eq(n+1))&&"..."!=e.text()},this.removeOne=function(){for(var e=this.els.filter(".active").index(),n=t.find("li").length-1,i=n-1;i>0;i--){var a=this.els.filter(".page-away-"+i.toString()).filter(function(){return"none"!=this.style.display});if(a.length>0)for(var s=0;s<a.length;s++){var r=a.eq(s);if(this.isRemovable(r))return r.css("display","none"),this.needsEtcSign(e,n-1)&&this.els.eq(n-2).before("<li class='disabled removable'><a class='menuda'><span>...</span></a></li>"),this.needsEtcSign(1,e)&&this.els.eq(1).after("<li class='disabled removable'><a class='menuda'><span>...</span></a></li>"),!0}}return!1},this.needsEtcSign=function(e,n){if(n-e<=1)return!1;for(var i=!1,a=!1,s=e+1;s<n;s++){var r=t.find("li").eq(s);"none"==r.css("display")&&(a=!0),"..."==r.text()&&(i=!0)}return 1==a&&0==i},this.reset=function(){for(var e=0;e<this.els.length;e++)this.els.eq(e).css("display","inline");t.find("li").filter(".removable").remove()},this.calculateWidth=function(){for(var e=0,n=0;n<t.find("li").length;n++)e+=t.find("li").eq(n).children("a").eq(0).outerWidth(),e+=t.find("li").eq(n).children("span").eq(0).outerWidth();return e},this.els=t.find("li"),this.label(),this.makeResponsive(),$(window).resize($.proxy(function(){clearTimeout(e),e=setTimeout($.proxy(function(){this.makeResponsive()},this),100)},this))}},window.jQuery||alert("The jQuery library must be included before the smoothscroll.js file.  The plugin will not work propery."),function(t){var e=t.scrollTo=function(e,n,i){t(window).scrollTo(e,n,i)};function n(t){return"object"==typeof t?t:{top:t,left:t}}e.defaults={axis:"xy",duration:parseFloat(t.fn.jquery)>=1.3?0:1,limit:!0},e.window=function(e){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map(function(){var e=this;if(!(!e.nodeName||-1!=t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])))return e;var n=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==n.compatMode?n.body:n.documentElement})},t.fn.scrollTo=function(i,a,s){return"object"==typeof a&&(s=a,a=0),"function"==typeof s&&(s={onAfter:s}),"max"==i&&(i=9e9),s=t.extend({},e.defaults,s),a=a||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(a/=2),s.offset=n(s.offset),s.over=n(s.over),this._scrollable().each(function(){if(null!=i){var r,o=this,l=t(o),c=i,d={},h=l.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(c)){c=n(c);break}if(!(c=t(c,this)).length)return;case"object":(c.is||c.style)&&(r=(c=t(c)).offset())}t.each(s.axis.split(""),function(t,n){var i="x"==n?"Left":"Top",a=i.toLowerCase(),f="scroll"+i,p=o[f],m=e.max(o,n);if(r)d[f]=r[a]+(h?0:p-l.offset()[a]),s.margin&&(d[f]-=parseInt(c.css("margin"+i))||0,d[f]-=parseInt(c.css("border"+i+"Width"))||0),d[f]+=s.offset[a]||0,s.over[a]&&(d[f]+=c["x"==n?"width":"height"]()*s.over[a]);else{var g=c[a];d[f]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}s.limit&&/^\d+$/.test(d[f])&&(d[f]=d[f]<=0?0:Math.min(d[f],m)),!t&&s.queue&&(p!=d[f]&&u(s.onAfterFirst),delete d[f])}),u(s.onAfter)}function u(t){l.animate(d,a,s.easing,t&&function(){t.call(this,i,s)})}}).end()},e.max=function(e,n){var i="x"==n?"Width":"Height",a="scroll"+i;if(!t(e).is("html,body"))return e[a]-t(e)[i.toLowerCase()]();var s="client"+i,r=e.ownerDocument.documentElement,o=e.ownerDocument.body;return Math.max(r[a],o[a])-Math.min(r[s],o[s])}}(jQuery),function(t){function e(e,n,i){var a=n.hash.slice(1),s=document.getElementById(a)||document.getElementsByName(a)[0];if(s){e&&e.preventDefault();var r=t(i.target);if(!(i.lock&&r.is(":animated")||i.onBefore&&!1===i.onBefore(e,s,r))){if(i.stop&&r._scrollable().stop(!0),i.hash){e=s.id==a?"id":"name";var o=t("<a> </a>").attr(e,a).css({position:"absolute",top:t(window).scrollTop(),left:t(window).scrollLeft()});s[e]="",t("body").prepend(o),location=n.hash,o.remove(),s[e]=a}r.scrollTo(s,i).trigger("notify.serialScroll",[s])}}}var n=location.href.replace(/#.*/,""),i=t.localScroll=function(e){t("body").localScroll(e)};i.defaults={duration:1e3,axis:"y",event:"click",stop:!0,target:window,reset:!0},i.hash=function(n){if(location.hash){if((n=t.extend({},i.defaults,n)).hash=!1,n.reset){var a=n.duration;delete n.duration,t(n.target).scrollTo(0,n),n.duration=a}e(0,location,n)}},t.fn.localScroll=function(a){function s(){return!!this.href&&!!this.hash&&this.href.replace(this.hash,"")==n&&(!a.filter||t(this).is(a.filter))}return(a=t.extend({},i.defaults,a)).lazy?this.bind(a.event,function(n){var i=t([n.target,n.target.parentNode]).filter(s)[0];i&&e(n,i,a)}):this.find("a,area").filter(s).bind(a.event,function(t){e(t,this,a)}).end().end()}}(jQuery),jQuery(function(t){t.localScroll({filter:".smoothScroll"})}),function(){let t,e=$("body").data("unit"),n=document.getElementById("body"),i=new TextHighlighter(n),a=localStorage.getItem(e);if(i.deserializeHighlights(a),document.querySelector(".color-picker")){new ColorPicker(document.querySelector(".color-picker")).onColorChange(function(t){i.setColor(t)})}$("div.color-picker>div.selected").html("<hr>"),$(document).on("mouseover","span.highlighted",function(){$(this).css("cursor","pointer")}),$(document).on("click","span.highlighted",function(){t=$(this).attr("data-timestamp")}),$(document).on("keyup","span.highlighted",function(t){46==(t.which||t.keyCode)&&(i.removeOneHighlights($(this).attr("data-timestamp")),$(".popover").remove())}),$(document).on("click","i.fa-trash-alt",function(){$("span[data-timestamp="+t+"]").each(function(){i.removeOneHighlights(t)});let n=i.serializeHighlights();localStorage.setItem(e,n),$(".popover").remove()}),$(document).on("click","button.deleteAll",function(){i.removeHighlights(),localStorage.removeItem(e)}),$(document).on("annotations.loaded",function(t,n){n.highlights&&(i.removeHighlights(),localStorage.setItem(e,n.highlights),i.deserializeHighlights(n.highlights))})}(),function(){$.fn.autogrow=function(t){return this.filter("textarea").each(function(){var t=this,e=$(t),n=e.height(),i=e.hasClass("autogrow-short")?0:parseInt(e.css("lineHeight"))||0,a=$("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:e.width(),fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),lineHeight:e.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),s=function(s){var r=t.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(t){return function(t,e){for(var n=0,i="";n<e;n++)i+=t;return i}("&nbsp;",t.length-1)+" "});s&&s.data&&"keydown"===s.data.event&&13===s.keyCode&&(r+="<br />"),a.css("width",e.width()),a.html(r+(0===i?"...":"")),e.height(Math.max(a.height()+i,n))};e.change(s).keyup(s).keydown({event:"keydown"},s),$(window).resize(s),s()})};let t=function(t,e){var n,i,a,s,r=[],o=[],l=0,c=1;let d=$("body").data("unit");function h(){if(null!=(o=JSON.parse(localStorage.getItem(d+"-note")))){r=o;for(var t=0;t<o.length;t++){var n="calc("+$(window).scrollTop()+"px + 25%) 0 300px calc(50% - 100px)";""!=o[t].position&&(n=o[t].position);var i='<div class="note" data-time="'+o[t].id+'" style="position: absolute; inset: '+n+'; height: 8.125rem;"><a href="javascript:;" class="button maximize"><i class="far fa-window-maximize"></i></a><a href="javascript:;" class="button remove"><i class="fas fa-times"></i></a><div class="note_cnt"><textarea class="title" placeholder="'+e("EnterNoteTitle")+'">'+o[t].title+'</textarea><textarea class="description" placeholder="'+e("EnterNoteDescription")+'" hidden>'+o[t].description+"</textarea></div> </div>";$(i).hide().appendTo("#body").show("fade",300).draggable().on("dragstart",function(){$(this).zIndex(++c)})}isMobile.any()&&$(".button.maximize, .button.minimize, .button.remove").css("font-size","1rem")}}$("#body").height($(document).height()),h(),$(document).on("click","#add_new",function(){n=Date.now(),function(){var t,i={id:"",title:"",description:"",position:""};l+=10,isMobile.any()?(t="28.75rem",$(".note").css("max-height","28.75rem"),$(".note textarea.description").css({"max-height":"15rem","min-height":"15rem"}),$(".note textarea.title").css({"max-height":"5rem","min-height":"5rem"})):(t="18.75rem",$(".note").css("max-height","18.75rem"),$(".note textarea.description").css({"max-height":"8.75rem","min-height":"8.75rem"}),$(".note textarea.title").css({"max-height":"4rem","min-height":"4rem"}));var a='<div class="note" data-time="'+n+'" style="height: '+t+"; width: "+t+"; position: absolute; left: calc(50% - (100px - "+l+"px)); top: calc("+$(window).scrollTop()+'px + 25%)"><a href="javascript:;" class="button minimize" style="font-size: 1rem;"><i class="far fa-window-minimize"></i></a><a href="javascript:;" class="button remove" style="font-size: 1rem;"><i class="fas fa-times"></i></a><div class="note_cnt"><textarea class="title" placeholder="'+e("EnterNoteTitle")+'"></textarea><textarea class="description" placeholder="'+e("EnterNoteDescription")+'"></textarea></div> </div>';$(a).hide().appendTo("#body").show("fade",300,function(){i.id=n,i.position=$(this).css("inset"),r.push(i),localStorage.setItem(d+"-note",JSON.stringify(r))}).draggable().on("dragstart",function(){$(this).zIndex(++c)}),$("textarea").autogrow()}()}),$(document).on("click",".remove",function(){i=$(this).parent().attr("data-time"),function(){$(".button.remove").parent(".note[data-time="+i+"]").hide("puff",{percent:133},250);for(var t=0;t<r.length;t++)r[t].id==i&&r.splice(t,1),0==r.length?localStorage.removeItem(d+"-note"):localStorage.setItem(d+"-note",JSON.stringify(r))}()}),$(document).on("click",".minimize",function(){a=$(this).parent().attr("data-time"),$(".note[data-time="+a+"]").children(".button.minimize").removeClass("minimize").addClass("maximize"),$(".note[data-time="+a+"]").children(".button.maximize").html('<i class="far fa-window-maximize"></i>'),$(".note[data-time="+a+"]").css("height","8.125rem"),isMobile.any()?($(".note[data-time="+s+"]").css("width","18.75rem"),$(".note textarea.description").css({"max-height":"15rem","min-height":"15rem"}),$(".note textarea.title").css({"max-height":"4rem","min-height":"4rem"})):($(".note textarea.description").css({"max-height":"8.75rem","min-height":"8.75rem"}),$(".note textarea.title").css({"max-height":"4rem","min-height":"4rem"})),$(".note[data-time="+a+"]>.note_cnt>textarea.description").attr("hidden",!0)}),$(document).on("click",".maximize",function(){s=$(this).parent().attr("data-time"),$(".note[data-time="+s+"]").children(".button.maximize").removeClass("maximize").addClass("minimize"),$(".note[data-time="+s+"]").children(".button.minimize").html('<i class="far fa-window-minimize"></i>'),isMobile.any()?($(".note[data-time="+s+"]").css({height:"28.75rem","max-height":"28.75rem",width:"28.75rem"}),$(".note textarea.description").css({"max-height":"15rem","min-height":"15rem"}),$(".note textarea.title").css({"max-height":"5rem","min-height":"5rem"})):($(".note[data-time="+s+"]").css({height:"18.75rem","max-height":"18.75rem"}),$(".note textarea.title").css({"max-height":"4rem","min-height":"4rem"})),$(".note[data-time="+s+"]>.note_cnt>textarea.description").removeAttr("hidden")}),$(document).on("change",".note>.note_cnt>textarea.title",function(){var t=$(this).parent().parent().attr("data-time");if(r.length>0)for(var e=0;e<r.length;e++)r[e].id==t&&(r[e].title=$(this).val());localStorage.setItem(d+"-note",JSON.stringify(r))}),$(document).on("change",".note>.note_cnt>textarea.description",function(){var t=$(this).parent().parent().attr("data-time");if(r.length>0)for(var e=0;e<r.length;e++)r[e].id==t&&(r[e].description=$(this).val());localStorage.setItem(d+"-note",JSON.stringify(r))}),$(document).on("dragstop",".note",function(){var t=$(this).attr("data-time");if(r.length>0)for(var e=0;e<r.length;e++)r[e].id==t&&(r[e].position=$(this).css("inset"));localStorage.setItem(d+"-note",JSON.stringify(r))}),$(document).on("annotations.loaded",function(t,e){e.notes&&(localStorage.setItem(d+"-note",e.notes),$(".note").remove(),h())})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),function(){let t=function(e){1==e.player.getPlayerState()&&(0!=e.interval?Math.abs(e.player.getCurrentTime()-e.interval)>.5?(e.range.push({start:e.player.getCurrentTime(),end:e.player.getCurrentTime()}),e.interval=e.player.getCurrentTime(),e.element=e.element+1):(e.interval=e.player.getCurrentTime(),e.range[e.element].end=e.player.getCurrentTime()):(e.range.push({start:e.player.getCurrentTime(),end:e.player.getCurrentTime()}),e.interval=e.player.getCurrentTime()),setTimeout(t,100,e))},e=function(t,e){t.player.getCurrentTime()==e&&0!=t.range.length&&("function"==typeof setObjetivoInteraccion&&setObjetivoInteraccion(t.objetivo,t.titulo,"{ 'video' : [ { 'Type' : 'Range', 'Ranges' : "+JSON.stringify(t.range).replace(/"/g,"'")+", 'Duration' : '"+t.player.getDuration()+"' }]}"),t.range=[],t.interval=0,t.element=0)},n=function(t,e){t.player.currentTime()==e&&0!=t.range.length&&("function"==typeof setObjetivoInteraccion&&setObjetivoInteraccion(t.objetivo,t.titulo,"{ 'video' : [ { 'Type' : 'Range', 'Ranges' : "+JSON.stringify(t.range).replace(/"/g,"'")+", 'Duration' : '"+t.player.duration()+"' }]}"),t.range=[],t.interval=0,t.element=0)},i=function(n,i){let a=$(this).attr("id"),s=$(this).data("title");switch(n.player.showCaptions&&n.player.getOptions("captions").length&&(n.player.setOption("captions","reload",!0),n.player.showCaptions=!1),i.data){case 0:$(this).hasClass("open")?setObjetivoCompleto("objetivo"+a,"Video"+a+"/"+s,"Video"+a):(r=n,setObjetivoCompleto(r.objetivo,r.titulo,r.description),0!=r.range.length&&("function"==typeof setObjetivoInteraccion&&setObjetivoInteraccion(r.objetivo,r.titulo,"{ 'video' : [ { 'Type' : 'Range', 'Ranges' : "+JSON.stringify(r.range).replace(/"/g,"'")+", 'Duration' : '"+r.player.getDuration()+"' }]}"),r.range=[],r.interval=0,r.element=0));break;case 1:$(this).hasClass("interoperability")&&t(n);break;case 2:$(this).hasClass("interoperability")&&setTimeout(e,1e3,n,n.player.getCurrentTime())}var r},a=function(){$(".element-video").removeClass("maximized"),$(this).closest(".element-video").find(".azuremediaplayer").css("padding-top",""),$(this).closest(".content-element").find(".speech-to-action").focus()},s=function(t,e){let s=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a},r=function(t,n,i,r){"FINISH"!==i&&"START"!==i?"PLAY"===i?t.play():"STOP"===i?t.stop():"PAUSE"===i?t.pause():"SCROLL DOWN"===i?window.scrollBy(0,.8*window.innerHeight):"SCROLL UP"===i?window.scrollBy(0,.8*-window.innerHeight):"CLOSE"===i&&$(".alert").length?$(".alert").alert("close"):"MAXIMIZE"===i?function(){let t=$(this).closest(".content-element").find(".element-video");t.addClass("maximized");let e=t.find(".azuremediaplayer");if(e.length){let t=parseFloat(e.css("padding-top")),n=e.parent().height();n<t&&e.css("padding-top",n)}}.apply(this):"MINIMIZE"===i?a.apply(this):"REPEAT"===i?$(this).closest(".widget-video").find(".tta-message").append(s("alert-info",e("tta-info-video"))):$(this).closest(".widget-video").find(".tta-message").append(s("alert-danger",e("tta-error-message"))):$(".element-video").removeClass("maximized")},o=function(){let t=$(this).attr("id"),e=$(this).data("video-id"),a=$(this).data("title"),s=1==$(this).data("default-captions"),o={objetivo:"objetivo"+t,titulo:a,descripcion:"Video"+t+"/"+a,interval:0,range:[],element:0};if($(this).hasClass("youtube")){let n=this,a=e.split("/embed/")[1],l=a.split("?")[0],c=a.split("?")[1].split("=")[1];o.player=new YT.Player("player-"+t,{playerVars:{start:c},height:"auto",width:"100%",videoId:l,events:{onReady:function(){o.player.play=o.player.playVideo,o.player.stop=o.player.stopVideo,o.player.pause=o.player.pauseVideo,o.player.showCaptions=s,$("#speech-to-action-"+t).on("speech-to-action",r.bind(n,o.player))},onStateChange:i.bind(this,o)}})}else if($(this).hasClass("indiemedia-normal")){let e=this,i=$(this).find("video");o.player=amp("player-"+t,{customPlayerSettings:{customHeuristicSettings:{windowSizeHeuristics:!1}},fluid:!0,nativeControlsForTouch:!1,techOrder:["azureHtml5JS","flashSS","html5FairPlayHLS","silverlightSS","html5"],logo:{enabled:!1},cea708CaptionsSettings:{enabled:!0}});let l=i.data("captions")?[{src:i.data("captions"),srclang:i.data("country"),kind:"captions",label:i.data("language"),default:!1}]:[],c=i.data("descriptions")?[{src:i.data("descriptions"),srclang:i.data("country"),kind:"descriptions",label:i.data("language"),default:!0}]:[];if(o.player.src([{src:i.data("src"),type:i.data("stype")}],[...l,...c]),o.player.addEventListener(amp.eventName.loadstart,function(){if(s){let t=o.player.textTracks();for(let e=0;e<t.length;e++){let n=t[e];"captions"===n.kind&&o.player.setActiveTextTrack(n)}}$(e).find(".vjs-text-track-display").attr("aria-live","off")}),l.length||c.length){let t=o.player.textTracks();if(t.onchange=function(){let t=o.player.getCurrentTextTrack();t&&$(e).find(".vjs-text-track-display").toggleClass("d-none","descriptions"===t.kind)},c.length)for(let n=0;n<t.length;n++){let i=t[n];"descriptions"===i.kind&&(i.oncuechange=function(){let t=this.activeCues;if(t.length>0){let n="";for(let e=0;e<t.length;e++)n+=t[e].text+" ";$(e).find(".screen-reader-description").empty().text(n),setTimeout(function(){$(e).find(".screen-reader-description").empty()},200)}})}}o.player.stop=function(){this.pause(),this.currentTime(0)},$("#speech-to-action-"+t).on("speech-to-action",r.bind(this,o.player)),$(this).hasClass("open")?o.player.addEventListener(amp.eventName.ended,function(){setObjetivoCompleto("objetivo"+t,"Video"+t+"/"+a,"Video"+t)}):$(this).hasClass("interoperability"),o.player.addEventListener(amp.eventName.ended,function(){var t;0!=(t=o).range.length&&("function"==typeof setObjetivoInteraccion&&setObjetivoInteraccion(t.objetivo,t.titulo,"{ 'video' : [ { 'Type' : 'Range', 'Ranges' : "+JSON.stringify(t.range).replace(/"/g,"'")+", 'Duration' : '"+t.player.duration()+"' }]}"),t.range=[],t.interval=0,t.element=0),setObjetivoCompleto(t.objetivo,t.titulo,t.description)}),o.player.addEventListener(amp.eventName.pause,function(){setTimeout(n,1e3,o,o.player.currentTime())}),o.player.addEventListener(amp.eventName.timeupdate,function(){var t;0!=(t=o).interval?Math.abs(t.player.currentTime()-t.interval)>2?(t.range.push({start:t.player.currentTime(),end:t.player.currentTime()}),t.interval=t.player.currentTime(),t.element=t.element+1):(t.interval=t.player.currentTime(),t.range[t.element].end=t.player.currentTime()):(t.range.push({start:t.player.currentTime(),end:t.player.currentTime()}),t.interval=t.player.currentTime())})}else if($(this).hasClass("indiemedia-interactive")){let n=iavideo({selector:"#player-"+t,externalSource:e,onError:function(t){console.log(t)},onReady:function(){o.player=n.instance(),o.player.addEventListener(amp.eventName.play,function(){setObjetivoCompleto("objetivo"+t,a,"Video"+t)})}});n.instance.stop=function(){this.pause(),this.currentTime(0)},$("#speech-to-action-"+t).on("speech-to-action",r.bind(this,n.instance))}},l=function(t,e){t.filter(t=>t.isIntersecting).forEach(t=>{$(t.target).data("initialized")||($(t.target).data("initialized",!0),o.apply(t.target))})};if($(".element-video.youtube").length){let t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";let e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}if("IntersectionObserver"in window){let t=new IntersectionObserver(l,{root:null,rootMargin:"200px"});$(".element-video").not(".youtube").each(function(){t.observe(this)}),window.onYouTubeIframeAPIReady=function(){$(".element-video.youtube").each(function(){t.observe(this)})}}else $(".element-video").not(".youtube").each(o),window.onYouTubeIframeAPIReady=function(){$(".element-video.youtube").each(o)}};$(document).on("keyup","body",function(t){27==t.keyCode&&$(".element-video.maximized").each(function(){a.apply(this)})}),$(document).on("click",".btn-video-minimize",a);let r=$("html").attr("lang"),o=document.currentScript.src;o=o.substr(0,o.lastIndexOf("/")),fetch(`${o}/../languages/${r}.json`).then(t=>t.json()).then(t=>i18next.createInstance({lng:r,resources:{[r]:{translation:t}}},s))}(),function(){let t=$("body").hasClass("gamification"),e=function(t,e,n){e.attr("tabindex",-1),e.eq(n).attr("tabindex",0).focus()},n=function(t,n){t.preventDefault(),t.stopPropagation();let i=(n.index($(this))-1)%n.length;e.apply(this,[t,n,i])},i=function(t,n){t.preventDefault(),t.stopPropagation();let i=(n.index($(this))+1)%n.length;e.apply(this,[t,n,i])},a=function(a,s){let r=function(t,e){let n=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",s("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),i=$("<div />").addClass("alert alert-dismissible fade show "+t).html(e).append(n);n.on("click",function(){i.alert("close")});let a=Math.max(6e3,60*e.length);return setTimeout(function(){i.alert("close")},a),i.alert(),i},o=function(t){d.apply(this,[t]);let e=$(this).closest(".widget-couples");e.find(".couple").removeClass("correcto"),e.find(".couple-button").attr("aria-disabled",!1),e.find(".couple-feedback").removeAttr("aria-label").empty(),e.find(".resultado-couples").removeClass("rojo verde mt-5 mb-0").empty()},l=function(t){if($(this).hasClass("correcto"))return;let e=$(this).hasClass("activo"),n=$(this).closest(".couples"),i=$(this).closest(".widget-couples").find(".resultado-couples"),a=n.find(".couple.activo").not($(this)).first();if($(this).toggleClass("activo",!e),$(this).find(".couple-state").html(e?"":s("couples-state-selected")),a.length){let t=$(this).add(a),e=Math.floor(n.find(".couple.matched").length/2)+1;t.removeClass("activo"),$(this).data("position")===a.data("position")?(t.addClass("correcto matched").data("tag",e),t.find(".couple-tag").html(e),t.find(".couple-feedback").attr("aria-label",s("CorrectPair")).html('<i class="fa fa-check" aria-hidden="true"></i>'),$(this).find(".couple-state").html(s("couples-state-matched",{option:a.find(".couple-prefix").text()})),a.find(".couple-state").html(s("couples-state-matched",{option:$(this).find(".couple-prefix").text()})),i.removeClass("rojo").addClass("verde mt-5 mb-0"),i.html(""),t.find(".couple-button").attr("aria-disabled",!0),setTimeout(function(){i.html('<span aria-hidden="true">'+s("CorrectPair"))},100)):(t.addClass("fallo"),i.removeClass("verde").addClass("rojo mt-5 mb-0"),setTimeout(function(){$(".fallo").removeClass("fallo")},500),i.html(""),setTimeout(function(){i.html(s("WrongPair"))},100),t.find(".couple-state").html(""))}if(n.find(".correcto").length==n.find(".couple").length){i.removeClass("rojo").addClass("verde mt-5 mb-0"),i.html(""),setTimeout(function(){i.html(s("AllPairsCorrect"))},100);let t=n.attr("id");setObjetivoCompleto("objetivo"+t,n.data("desc"),n.data("desc"))}},c=function(t){if($(this).find(".couple-state").html($(this).hasClass("activo")?"":s("couples-state-selected")),$(this).hasClass("activo"))$(this).removeClass("activo");else if(!$(this).hasClass("matched")){let t=$(this).closest(".couples"),e=t.find(".couple.activo").not($(this)).first();if($(this).toggleClass("activo",!0),e.length){let n=Math.floor(t.find(".couple.matched").length/2)+1,i=$(this).add(e);i.find(".couple-tag").html(n),i.removeClass("activo").addClass("matched").data("tag",n),i.find(".couple-button").attr("aria-disabled",!0),$(this).find(".couple-state").html(s("couples-state-matched",{option:e.find(".couple-prefix").text()})),e.find(".couple-state").html(s("couples-state-matched",{option:$(this).find(".couple-prefix").text()}))}}},d=function(t){let e=$(this).closest(".widget-couples");e.find(".couple").removeClass("matched activo").data("tag",""),e.find(".couple-button").attr("aria-disabled",!1),e.find(".couple-state").empty()},h=function(t){let e=$(this).closest(".widget-couples"),n=e.find(".couple").length,i=0;for(let t=1;t<=n/2;t++){let n=e.find(".couple").filter(function(){return $(this).data("tag")==t});2==n.length&&n.first().data("position")===n.last().data("position")&&i++}let a=1==(i/=n/2);e.find(".couple").removeClass("matched"),$(this).trigger("gamificate",[a,i])};$(".couples").each(function(){let a=$(this).attr("id"),u=0,f=JSON.parse((p=$(this).data("content"),decodeURIComponent(atob(p).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))));var p;let m=this;$(this).data("content",""),$(this).closest(".container").attr("tabindex","-1");$("#speech-to-action-"+a).on("speech-to-action",function(t,a,o){if("FINISH"===a)return;let l=$(m).find(".couple").find(".couple-button"),c=l.filter(function(){return $(this).is(":focus")}).first();if(c.length||(c=l.eq(0),l.attr("tabindex",-1),c.attr("tabindex",0).focus()),"START"!==a&&"CURRENT"!==a)if("NEXT"===a)i.apply(c[0],[t,l]);else if("PREVIOUS"===a)n.apply(c[0],[t,l]);else if("GOTO"===a){let n=(parseInt(o["target-position"])-1)%l.length;e.apply(c[0],[t,l,n])}else if("CLOSE"===a&&($(".modal.show").length||$(".alert").length))$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close");else if("SCROLL DOWN"===a)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===a)window.scrollBy(0,.4*-window.innerHeight);else switch(a){case"SELECT":c.trigger("click");break;case"REPEAT":$(m).closest(".widget-couples").find(".tta-message").append(r("alert-info",s("tta-info-couples")));break;case"CHECK":$(m).closest(".widget-couples").find(".btn-check").trigger("click");break;case"RESET":$(m).closest(".widget-couples").find(".btn-reset").trigger("click");break;case"NONE":default:$(m).closest(".widget-couples").find(".tta-message").append(r("alert-danger",s("tta-error-message")))}}),f.forEach(t=>t.id=u++),function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[n],t[n]=i}}(f);let g=f.map((t,e)=>{let n=$("<div />").addClass("couple-button").attr("id","couple-button-"+a+"-"+(e+1)).attr("tabindex",0==e?"0":"-1").attr("role","button").attr("aria-labelledby",a+"-prefix-"+e+" "+a+"-option-"+e+" "+a+"-state-"+e);"img"==t.type?n.addClass("p-0").append($("<img />").attr("id",a+"-option-"+e).addClass("img-responsive w-100 h-100").attr("src",t.src).attr("alt",t.alt)):(n.toggleClass("has-code",3!==$.parseHTML(t.content)[0].nodeType&&($(t.content).is("code")||$(t.content).find("code").length>0)),n.html($("<div />").attr("id",a+"-option-"+e).html(t.content)));let i=$("<span />").addClass("couple-state sr-only").attr("id",a+"-state-"+e).html(""),r=$("<span />").addClass("couple-prefix sr-only").attr("id",a+"-prefix-"+e).html(s("accessibility-option")+" "+(e+1)+" "+s("img"===t.type?"common-image":"common-text"));n.append(r,i);let o=$("<div />").addClass("couple-tag");return $("<div />").addClass("col-xs-12 col-sm-6 col-md-3 pb-3 couple").data("position",Math.floor(t.id/2)).append(n,o)});$(this).append(g);let v=$(this).find(".couple").find(".couple-button");v.each(function(){$(this).on("keydown",function(e){(function(e,a){let s=e.which||e.keyCode;if(13===s||32===s||38===s||40===s||27===s)if(13===s||32===s){e.preventDefault(),e.stopPropagation();let n=$(this).closest(".couple");t?c.apply(n,[e]):l.apply(n,[e])}else 38===s?n.apply(this,[e,a]):40===s?i.apply(this,[e,a]):27===s&&$(this).blur()}).apply(this,[e,v])})}),t?($(this).on("click",".couple",c),$(this).closest(".widget-couples").on("click",".btn-reset",d),$(this).closest(".widget-couples").on("click",".btn-check",h)):($(this).find(".couple").each(function(t){let e="couple-feedback-"+a+"-"+t;$(this).append($("<div />").attr("id",e).addClass("couple-feedback"));let n=$(this).find(".couple-button");n.attr("aria-labelledby",n.attr("aria-labelledby")+" "+e)}),$(this).on("click",".couple",l),$(this).closest(".widget-couples").on("click",".btn-reset",o))})},s=document.currentScript.src;s=s.substr(0,s.lastIndexOf("/")),$(document).ready(function(){let t=$("html").attr("lang");fetch(`${s}/../languages/${t}.json`).then(t=>t.json()).then(e=>i18next.createInstance({lng:t,resources:{[t]:{translation:e}}},a))})}(),function(){let t=function(t,e){$(".container-test").each(function(){let t=this,n=$(t).attr("id"),i=$(this).find(".question"),a=$(t).find("input[type=radio]"),s=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$("#speech-to-action-"+n).on("speech-to-action",function(n,r,o){if("FINISH"===r)return;let l=$(t).find(".btn-check"),c=a.filter(function(){return $(this).is(":focus")}).first();if(c.length||(c=a.eq(0)).focus(),"START"!==r&&"CURRENT"!==r)if("NEXT"===r||"PREVIOUS"===r){let t=a.index(c),e="NEXT"===r?(t+1)%a.length:(t-1)%a.length;a.eq(e).focus()}else if("GOTO"===r){let t=(parseInt(o["target-position"])-1)%i.length;i.eq(t).find("input[type=radio]").first().focus()}else if("CLOSE"===r&&($(".modal.show").length||$(".alert").length))$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close");else if("SCROLL DOWN"===r)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===r)window.scrollBy(0,.4*-window.innerHeight);else switch(r){case"SELECT":c.trigger("click");break;case"REPEAT":$(t).find(".tta-message").append(s("alert-info",e("tta-info-containertest")));break;case"CHECK":l.trigger("click");break;case"NONE":default:$(t).find(".tta-message").append(s("alert-danger",e("tta-error-message")))}})}),$(".container-test").on("click",".btn-reset",function(t){let e=$(this).closest(".container-test");e.find(".positiveFeedback, .negativeFeedback").addClass("hidden"),e.find(".resultado").empty(),e.find("input:radio:checked").prop("checked",!1).removeAttr("aria-describedby"),e.find(".option").removeClass("verdetest w-100").removeClass("rojotest w-100")}),$(".container-test").on("click",".btn-check",function(t){let n=$("body").hasClass("gamification"),i=$(this).closest(".container-test"),a=i.attr("id"),s=i.find(".question").length,r=i.find("input:radio:checked"),o=r.filter(function(){return"true"===$(this).val()});$(this).trigger("gamificate",[s===o.length,o.length/s]),n||(r.each(function(){$(this).closest(".option").addClass("true"===$(this).val()?"verdetest w-100":"rojotest w-100"),$(this).attr("aria-describedby",("true"===$(this).val()?"positiveFeedback-":"negativeFeedback-")+$(this).attr("name"));let t=$(this).closest(".question").find("true"===$(this).val()?".positiveFeedback":".negativeFeedback");t.is(":not(:empty)")&&t.removeClass("hidden"),$(this).closest(".question").find("true"===$(this).val()?".negativeFeedback":".positiveFeedback").addClass("hidden")}),i.find(".question").each(function(){if($(this).find(".positiveFeedback").hasClass("hidden")){let t=$(this).find(".negativeFeedback");t.is(":not(:empty)")&&t.removeClass("hidden")}}),i.find(".resultado").html(e("TextNumberCorrect",{num:o.length})),s===o.length&&setObjetivoCompleto(`objetivo${a}`,"«widget.name»","«widget.name»"))}),$(".container-test input[type=radio]").on("change",function(t){let e=$(this).closest("fieldset");e.find(".verdetest").toggleClass("verdetest w-100"),e.find(".rojotest").toggleClass("rojotest w-100"),e.find("[aria-describedby]").removeAttr("aria-describedby"),e.find(".positiveFeedback").addClass("hidden"),e.find(".negativeFeedback").addClass("hidden")})},e=document.currentScript.src;e=e.substr(0,e.lastIndexOf("/")),$(document).ready(function(){let n=$("html").attr("lang");fetch(`${e}/../languages/${n}.json`).then(t=>t.json()).then(e=>i18next.createInstance({lng:n,resources:{[n]:{translation:e}}},t))})}(),function(){let t=function(t,e){let n=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(".widget-truefalse").each(function(){let t=this,i=$(t).attr("id");$("#speech-to-action-"+i).on("speech-to-action",function(i,a,s){if("FINISH"===a)return;let r=$(t).find("input[type=checkbox]"),o=$(t).find(".boton_truefalse"),l=r.filter(function(){return $(this).is(":focus")}).first();if(l.length||(l=r.eq(0)).focus(),"START"!==a&&"CURRENT"!==a)if("NEXT"===a||"PREVIOUS"===a){let t=r.index(l),e="NEXT"===a?(t+1)%r.length:(t-1)%r.length;r.eq(e).focus()}else if("GOTO"===a)r.eq((parseInt(s["target-position"])-1)%r.length).focus();else if("CLOSE"===a&&($(".modal.show").length||$(".alert").length))$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close");else if("SCROLL DOWN"===a)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===a)window.scrollBy(0,.4*-window.innerHeight);else switch(a){case"SELECT":l.trigger("click");break;case"REPEAT":$(t).find(".tta-message").append(n("alert-info",e("tta-info-truefalse")));break;case"CHECK":o.trigger("click");break;case"NONE":default:$(t).find(".tta-message").append(n("alert-danger",e("tta-error-message")))}})}),$(".widget-truefalse").on("change","input:checkbox",function(){let t=$(this).closest(".question"),n=$(this).prop("checked");t.find(".iconresult").attr("aria-label","").empty(),t.find(".custom-control-label").toggleClass("TFfalse-color",!n).toggleClass("TFtrue-color",n).html(e(n?"TextTrue":"TextFalse")),t.find(".positiveFeedback").addClass("hidden"),t.find(".negativeFeedback").addClass("hidden")}),$(".widget-truefalse").on("click",".btn-reset",function(){let t=$(this).closest(".widget-truefalse");t.find(".negativeFeedback, .positiveFeedback").addClass("hidden"),t.find(".iconresult").removeAttr("aria-label").empty(),t.find(".resultado_truefalse").empty(),t.find("input:checkbox").prop("checked",!1).removeAttr("aria-describedby"),t.find(".custom-control-label").addClass("TFfalse-color").removeClass("TFtrue-color").html(e("TextFalse"))}),$(".boton_truefalse").click(function(){var t=$("body").hasClass("gamification");let n=$(this).closest(".widget-truefalse"),i=n.attr("id"),a=JSON.parse((s=n.data("content"),decodeURIComponent(atob(s).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))));var s;let r=n.find("input:checkbox").filter(function(t){return a[t]==$(this).prop("checked")}).length;$(this).trigger("gamificate",[r==a.length,r/a.length]),t||(n.find("input:checkbox").each(function(t){let n=$(this).closest(".question");if(a[t]==$(this).prop("checked")){$(this).attr("aria-describedby","positiveFeedback-"+$(this).attr("name")),n.find(".iconresult").attr("aria-label",e("TextCorrectAnswer")).html('<i class="fas fa-2x fa-check"></i>');let t=n.find(".positiveFeedback");t.is(":not(:empty)")&&t.removeClass("hidden"),n.find(".negativeFeedback").addClass("hidden")}else{$(this).attr("aria-describedby","negativeFeedback-"+$(this).attr("name")),n.find(".iconresult").attr("aria-label",e("TextIncorrectAnswer")).html('<i class="fas fa-2x fa-times"></i>'),n.find(".positiveFeedback").addClass("hidden");let t=n.find(".negativeFeedback");t.is(":not(:empty)")&&t.removeClass("hidden")}}),r==a.length&&setObjetivoCompleto("objetivo"+i,n.data("desc"),n.data("desc")),n.find(".resultado_truefalse").html('<div class="result-truefalse">'+r+" "+e("TextCorrectAnswers")+"</div>"))})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),function(){let t=function(t,e){let n=function(){let t=$(this),n=t.find("img"),i=$("#"+n.attr("data-sound")),a=t.parent().find(".image-sound-state"),s=n.attr("data-text");t.find(".fa").removeClass("fa-play").addClass("fa-pause"),i.trigger("play"),s&&$("#"+s).addClass("ImageSoundTransicionActive"),a.text(e("audio-pause")),t.data("playing",!0)},i=function(){let t=$(this),n=t.find("img"),i=$("#"+n.attr("data-sound")),a=t.parent().find(".image-sound-state"),s=n.attr("data-text");t.find(".fa").removeClass("fa-pause").addClass("fa-play"),i.trigger("pause"),s&&$("#"+s).removeClass("ImageSoundTransicionActive"),a.text(e("audio-play")),t.data("playing",!1)},a=function(){i.apply(this);let t=$(this).find("img");$("#"+t.attr("data-sound"))[0].currentTime=0,$(this).find(".image-sound-term-content").empty()},s=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(".widget-image-sound").each(function(){let t=$(this),r=t.attr("id"),o=t.find(".image-sound-term").length,l=0;$("#speech-to-action-"+r).on("speech-to-action",function(t,r,o){if("FINISH"===r)return;let l=$(this).find(".image-sound-term"),c=l.filter(function(){return $(this).is(":focus")}).first();if(c.length||(c=l.eq(0)).focus(),"START"!==r&&"CURRENT"!==r)if("NEXT"===r||"PREVIOUS"===r){let t=l.index(c),e="NEXT"===r?(t+1)%l.length:(t-1)%l.length;l.eq(e).focus()}else"GOTO"===r?l.eq((parseInt(o["target-position"])-1)%l.length).focus():"PLAY"===r?n.apply(c[0]):"STOP"===r?a.apply(c[0]):"PAUSE"===r?i.apply(c[0]):"SCROLL DOWN"===r?window.scrollBy(0,.4*window.innerHeight):"SCROLL UP"===r?window.scrollBy(0,.4*-window.innerHeight):"CLOSE"===r&&$(".alert").length?$(".alert").alert("close"):"REPEAT"===r?$(this).closest(".widget-image-sound").find(".tta-message").append(s("alert-info",e("tta-info-imagesound"))):$(this).closest(".widget-image-sound").find(".tta-message").append(s("alert-danger",e("tta-error-message")))}.bind(this)),t.find(".image-sound-term").each(function(){let s=$(this),c=s.attr("data-desc"),d=s.parent().find(".image-sound-state"),h=s.find("img"),u=$("#"+h.attr("data-sound")),f=a.bind(this),p=function(){++l==o&&setObjetivoCompleto("objetivo"+r,c,c),(p=n.bind(s[0]))()},m=i.bind(this);d.text(e("audio-play")),u.on("ended",f),$(this).on("click",function(){let e="false"!==(s.data("playing")||"false");(function(){$(this).find(".image-sound-term").each(function(){i.apply(this)})}).apply(t[0]),e?m():p()});let g=u.get(0).textTracks[0];void 0!==g&&(g.oncuechange=function(){var t=$(this)[0].activeCues;if(t.length>0){let e="";for(let n=0;n<t.length;n++)e+=t[n].text+"<br><br>";s.parent().find(".image-sound-term-content").html(e.replace(/\n/g,"<br>"))}})})})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),function(){if("undefined"!=typeof annyang&&annyang){let t=[],e=!1,n=$("html").attr("lang"),i=null,a=function(t,e){let n=$.Event("speech-to-action");return $(this).trigger(n,[t,e]),n},s=function(){$(".speech-focused").removeClass("speech-focused"),$(this).addClass("speech-focused"),$(this).closest(".content-element").addClass("speech-focused")},r=function(t,e){s.apply(this),$(this).toggleClass("active",t).attr("aria-pressed",t);let n=$(this).find("i");if(e){n.toggleClass("fa-microphone-slash",!t).toggleClass("fa-microphone",t),$(".speech-to-action").not(this).each(function(){$(this).toggleClass("show",t).attr("aria-pressed",!1).attr("aria-disabled",!1).removeClass("active disabled").prop("disabled",!1),$(this).find("i").removeClass("fa-head-side-cough").addClass("fa-head-side-cough-slash")}),$(".tab-pane").add($(".accordion-region")).find(".speech-to-action").attr("aria-disabled",!0).prop("disabled",!0).addClass("disabled")}else{n.toggleClass("fa-head-side-cough",t).toggleClass("fa-head-side-cough-slash",!t);let e=$(this).closest(".content-element"),i=e.parents(".content-element"),a=i.length?i.first():$(document),s=e.find(".speech-to-action").not(this);a.find(".speech-to-action").not(this).not("#speech-to-action-global").filter(function(){let t=$(this).parents(".content-element").first();if(t[0]===a[0])return!0;let e=t.parents(".content-element").first();return!e.length||e[0]===a[0]}).each(function(){$(this).prop("disabled",t).toggleClass("disabled",t).attr("aria-disabled",t)}),s.filter(function(){return $(this).parents(".content-element").eq(1)[0]===e[0]}).each(function(){$(this).prop("disabled",!t).toggleClass("disabled",!t).attr("aria-disabled",!t)})}},o=function(e){if(s.apply(i),e?$("#speech-to-action-global").focus():i&&$(i).focus(),!t.length||e)return t=[],i=null,void annyang.pause();i=t.pop()},l=function(l,c){let d={WRITE:c("tta-command-write",{returnObjects:!0}),MOVE:c("tta-command-move",{returnObjects:!0}),NEXT:c("tta-command-next",{returnObjects:!0}),PREVIOUS:c("tta-command-previous",{returnObjects:!0}),CURRENT:c("tta-command-current",{returnObjects:!0}),FINISH:c("tta-command-finish",{returnObjects:!0}),SELECT:c("tta-command-select",{returnObjects:!0}),PLAY:c("tta-command-play",{returnObjects:!0}),STOP:c("tta-command-stop",{returnObjects:!0}),PAUSE:c("tta-command-pause",{returnObjects:!0}),CLOSE:c("tta-command-close",{returnObjects:!0}),REPEAT:c("tta-command-info",{returnObjects:!0}),CHECK:c("tta-command-check",{returnObjects:!0}),RESET:c("tta-command-reset",{returnObjects:!0}),DELETE:c("tta-command-delete",{returnObjects:!0}),BACK:c("tta-command-back",{returnObjects:!0}),"SCROLL DOWN":c("tta-command-scroll-down",{returnObjects:!0}),"SCROLL UP":c("tta-command-scroll-up",{returnObjects:!0}),GOTO:c("tta-command-goto",{returnObjects:!0}),MAXIMIZE:c("tta-command-maximize",{returnObjects:!0}),MINIMIZE:c("tta-command-minimize",{returnObjects:!0}),ACCESSIBILITY:c("tta-command-accessibility",{returnObjects:!0}),"GOTO START":c("tta-command-goto-start",{returnObjects:!0})};const h=[].concat(...Object.values(d));let u=function(t){let e,n=t.toLowerCase(),i=function(t){let e,n=this.toLowerCase().split(/\s+/),i=t.toLowerCase().split(/\s+/);if(n.length<i.length)return!1;for(let t=0;t<=n.length-i.length;t++){e=!0;for(let a=0;a<i.length;a++)if(n[t+a]!==i[a]){e=!1;break}if(e)return!0}return!1}.bind(t),a=Number.MAX_SAFE_INTEGER,s=null,r=null;for(let t in d)if(e=Array.isArray(d[t])&&d[t].find(i)){e=e.toLowerCase();let i=n.indexOf(e);a>i&&(a=i,r=e,s=t)}if(s)switch(s){case"MOVE":return function(t,e){let n=t.toLowerCase().indexOf(e.toLowerCase()),i=t.substring(n+e.length).trim(),a=$(this).data("dynamic"),s={remainder:"",action:"MATCH",entities:{target:i}},r=i.toLowerCase(),o=c("tta-command-move-definition",{returnObjects:!0});o.sort((t,e)=>e.length-t.length);for(let t in o){let e=o[t];if(r.startsWith(e.toLowerCase())){let t=r.replace(e.toLowerCase(),"").trim();if(!isNaN(t)){s.entities["target-position"]=i,s.entities.number=[[t]];break}}}if(a)for(const t in a){let e=a[t];e.sort((t,e)=>e.length-t.length);for(let n in e){let a=e[n].toLowerCase();if(r.includes(a)){s.entities[t]=[i.substring(i.indexOf(a),a.length)];break}}}return s}.apply(this,[t,r]);case"WRITE":return function(t,e){let n=t.toLowerCase().indexOf(e.toLowerCase());return{remainder:"",action:"WRITE",entities:{text:t.substring(n+e.length).trim()}}}.apply(this,[t,r]);case"GOTO":return function(t,e){let n=t.toLowerCase().indexOf(e.toLowerCase()),i=t.substring(n+e.length).trim(),a=i.toLowerCase(),s=c("tta-command-goto-element",{returnObjects:!0}),r={},o=i;s.sort((t,e)=>e.length-t.length);for(let t in s){let e=s[t];if(a.startsWith(e.toLowerCase())){let t=a.replace(e.toLowerCase(),"").trim();if(!isNaN(t)){r["target-position"]=t,o=i.substring(i.indexOf(t)+t.length);break}}}return{action:"GOTO",remainder:o,entities:r}}.apply(this,[t,r]);default:return{remainder:t.substring(n.indexOf(r)+r.length).trim(),action:s,entities:{}}}return{remainder:"",action:"NONE",entities:{}}},f=function(e){console.log("Initial candidates: ",e);let n=function(t){for(let e in t){let n=t[e],i=n.toLowerCase();if(h.some(t=>i.includes(t.toLowerCase())))return n}return t[0]}(function(t){return t.map(t=>t.replaceAll(/[\s¿?!¡.,]+/g," ").trim()).map(t=>{let e=t.split(/\s+/),n=c("tta-numbers",{returnObjects:!0});return e.map(t=>t.toLowerCase()in n?n[t.toLowerCase()]:t).join(" ")})}(e));$("#tta-message-global").append(function(t,e){let n=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",c("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),i=$("<div />").addClass("alert alert-dismissible fade show "+t).html(e).append(n);n.on("click",function(){i.alert("close")});let a=Math.max(6e3,60*e.length);return setTimeout(function(){i.alert("close")},a),i.alert(),i}("alert-info",c("tta-info-command",{phrase:n})));let l,d,f=n,p=!1;do{({remainder:f,action:l,entities:d}=u.apply(i,[f])),p|="NONE"!==l;let e=$(i).is("#speech-to-action-global");if("FINISH"===l){a.apply(i,["FINISH"]).isDefaultPrevented()||(r.apply(i,[!1,e]),o.apply(i,[e]))}else"ACCESSIBILITY"===l&&i!==$("#accesibilityModal")[0]?(i&&t.push(i),i=$("#accesibilityModal")[0]):"BACK"===l&&s.apply(i);p&&"NONE"===l||a.apply(i,[l.toUpperCase(),d])}while(f.length)};$("#speech-to-action-global").addClass("show"),$(document).on("focus",".speech-to-action",s),$(document).on("click",".speech-to-action",function(n){let s=!$(this).hasClass("active"),l=$(this).is("#speech-to-action-global");r.apply(this,[s,l]),s?(i&&t.push(i),i=this,a.apply(i,["START"]),e?annyang.resume():(annyang.addCallback("result",f),annyang.addCallback("start",function(t){let e=$("#speech-to-action-global");r.apply(e[0],[!0,!0])}),annyang.addCallback("end",function(t){let e=$("#speech-to-action-global");r.apply(e[0],[!1,!0])}),annyang.start({continuous:!0,autoRestart:!1})),e=!0):(a.apply(i,["FINISH"]),o.apply(this,[l]))}),$("#accesibilityModal").on("show.bs.modal",function(){null!==i&&i!==this&&(t.push(i),i=this)}),$("#accesibilityModal").on("hide.bs.modal",function(){$(this).find("select").each(function(){this.size=1}),i===this&&(i=t.pop())}),annyang.setLanguage(n)},c=document.currentScript.src;c=c.substr(0,c.lastIndexOf("/")),fetch(`${c}/../languages/${n}.json`).then(t=>t.json()).then(t=>i18next.createInstance({lng:n,resources:{[n]:{translation:t}}},l))}}(),function(){let t=function(t,e){let n=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(".btn-modal").each(function(){let t=$(this).attr("id");$("#speech-to-action-"+t).on("speech-to-action",function(t,i,a){if("FINISH"===i||"START"===i)return;let s=$(this).attr("id");"SELECT"===i?$(this).trigger("click"):"SCROLL DOWN"===i&&$("#modal"+s+".show").length?window.scrollBy(0,.8*window.innerHeight):"SCROLL UP"===i&&$("#modal"+s+".show").length?window.scrollBy(0,.8*-window.innerHeight):"CLOSE"===i?($("#modal"+s+".show").length&&$("#modal"+s+".show").modal("hide"),$(".alert").length&&$(".alert").alert("close")):"REPEAT"===i?$(this).closest(".widget-modal").find(".tta-message").append(n("alert-info",e("tta-info-modal"))):$(this).closest(".widget-modal").find(".tta-message").append(n("alert-danger",e("tta-error-message")))}.bind(this))})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),function(){let t=function(t,e){let n=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(".widget-schema").each(function(){let t=$(this),i=t.attr("id"),a=t.data("content"),s=t.find(".btn-schema");$("#speech-to-action-"+i).on("speech-to-action",function(i,a,s){"FINISH"!==a&&"START"!==a&&("SELECT"===a?$(this).focus().trigger("click"):"SCROLL DOWN"===a?window.scrollBy(0,.8*window.innerHeight):"SCROLL UP"===a?window.scrollBy(0,.8*-window.innerHeight):"CLOSE"===a&&$(".alert").length?$(".alert").alert("close"):"REPEAT"===a?t.find(".tta-message").append(n("alert-info",e("tta-info-schema"))):t.find(".tta-message").append(n("alert-danger",e("tta-error-message"))))}.bind(s[0])),s.on("click.show",function(){$(this).off("click.show");let t=$(this).find("img"),e=$(this).attr("data-desc"),n=JSON.parse(decodeURIComponent(atob(a).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join("")));if(n.length>0){let a=0;var s=setInterval(function(){a==n.length?(clearInterval(s),setObjetivoCompleto("objetivo"+i,e,e)):t.attr({src:n[a].src,alt:n[a].alt}),a++},1e3)}})})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),function(){let t=function(){let t=$(this).height();$(this).find(".tabtop").toggleClass("show",t>1e3)},e=function(e,n){let i=function(t,e){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",n("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(e).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*e.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a},a=function(){$(".speech-focused").removeClass("speech-focused"),$(this).addClass("speech-focused"),$(this).closest(".content-element").addClass("speech-focused")};$(".accordion").each(function(){let e,s=$(this),r=s.attr("id"),o=0,l=s.find(".btn-accordion:visible").first();s.find(".accordion-region").on("shown.bs.collapse",t);$("#speech-to-action-"+r).on("speech-to-action",function(t,r,c){"FINISH"!==r?"START"===r?(o=0,l.focus()):"SELECT"===r?0===o?(l.is(".collapsed")&&l.trigger("click"),s.find(".collapsing").focus(),o=1):e&&e.trigger("click"):"SCROLL DOWN"===r?window.scrollBy(0,.4*window.innerHeight):"SCROLL UP"===r?window.scrollBy(0,.4*-window.innerHeight):"CLOSE"===r&&$(".alert").length?$(".alert").alert("close"):"BACK"===r&&1===o?(l.focus().trigger("click"),this.scrollIntoView(!0),e=null,o=0):"REPEAT"===r?s.find(".tta-message").first().append(i("alert-info",n("tta-info-accordion-"+(0===o?"tabs":"region")))):"NEXT"===r||"PREVIOUS"===r||"GOTO"===r?function(t,n){if(0===o){let e=s.find(".btn-accordion:visible"),i=e.length,r=e.index(l),o=r;switch(t){case"NEXT":o=(r+1)%i;break;case"PREVIOUS":o=(r-1)%i;break;case"GOTO":o=(parseInt(n)-1)%i}l=e.eq(o),a.apply(l[0]),l.focus()}else{let i=s.find(".speech-to-action:visible"),r=i.length,o=0;switch(t){case"NEXT":e&&(o=(i.index(e)+1)%r);break;case"PREVIOUS":e&&(o=(i.index(e)-1)%r);break;case"GOTO":o=(parseInt(n)-1)%r}e=i.eq(o),a.apply(e[0]),e.focus(),e[0].scrollIntoView(!0)}}(r,c&&c["target-position"]):s.find(".tta-message").first().append(i("alert-danger",n("tta-error-message"))):1===o&&(t.preventDefault(),l.focus().trigger("click"),this.scrollIntoView(!0),e=null,o=0)})})},n=$("html").attr("lang"),i=document.currentScript.src;i=i.substr(0,i.lastIndexOf("/")),fetch(`${i}/../languages/${n}.json`).then(t=>t.json()).then(t=>i18next.createInstance({lng:n,resources:{[n]:{translation:t}}},e))}(),function(){let t=function(t,e){let n=function(){$(".speech-focused").removeClass("speech-focused"),$(this).addClass("speech-focused"),$(this).closest(".content-element").addClass("speech-focused")},i=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(".widget-tabs").each(function(){let t,a=$(this),s=a.attr("id"),r=0,o=a.find(".tab-link:visible").first(),l=function(){let t=$(this).find(".tab-content").height();$(this).find(".tabtop").toggleClass("show",t>1e3)}.bind(this);l(),a.find('a[data-toggle="tab"]').on("shown.bs.tab",l);$("#speech-to-action-"+s).on("speech-to-action",function(s,l,c){"FINISH"!==l?"FINISH"!==l&&("START"===l?(r=0,o.focus()):"SELECT"===l?0===r?(o.is(".active")||o.trigger("click"),a.find(".tab-content").first().focus(),r=1):t&&t.trigger("click"):"SCROLL DOWN"===l?window.scrollBy(0,.4*window.innerHeight):"SCROLL UP"===l?window.scrollBy(0,.4*-window.innerHeight):"CLOSE"===l&&$(".alert").length?$(".alert").alert("close"):"BACK"===l&&1===r?(o.focus(),this.scrollIntoView(!0),t=null,r=0):"REPEAT"===l?a.find(".tta-message").first().append(i("alert-info",e("tta-info-horizontal-tabs-"+(0===r?"tabs":"region")))):"NEXT"===l||"PREVIOUS"===l||"GOTO"===l?function(e,i){if(0===r){let t=a.find(".tab-link:visible"),s=t.length,r=t.index(o),l=r;switch(e){case"NEXT":l=(r+1)%s;break;case"PREVIOUS":l=(r-1)%s;break;case"GOTO":l=(parseInt(i)-1)%s}o=t.eq(l),n.apply(o[0]),o.focus()}else{let s=a.find(".speech-to-action:visible"),r=s.length,o=0;switch(e){case"NEXT":t&&(o=s.index(t)+1%r);break;case"PREVIOUS":t&&(o=s.index(t)-1%r);break;case"GOTO":o=(parseInt(i)-1)%r}t=s.eq(o),n.apply(t[0]),t.focus(),t[0].scrollIntoView(!0)}}(l,c&&c["target-position"]):a.find(".tta-message").first().append(i("alert-danger",e("tta-error-message")))):1===r&&(s.preventDefault(),o.focus(),this.scrollIntoView(!0),t=null,r=0)})})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),function(){let t=function(t,e){let n,i=$(".speech-to-action").not($("#speech-to-action-global")).filter(function(){return $(this).parents(".content-element").length<=1});i.each(function(t){let n=$("<span />").addClass("element-number").text(e("tta-activity-number")+(t+1));$(this).append(n)});let a=function(){$(".speech-focused").removeClass("speech-focused"),$(this).addClass("speech-focused"),$(this).closest(".content-element").addClass("speech-focused")},s=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$("#speech-to-action-global").on("speech-to-action",function(t,r,o){"FINISH"!==r&&"START"!==r&&("SELECT"===r?n&&n.trigger("click"):"SCROLL DOWN"===r?window.scrollBy(0,.4*window.innerHeight):"SCROLL UP"===r?window.scrollBy(0,.4*-window.innerHeight):"CLOSE"===r&&$(".alert").length?$(".alert").alert("close"):"REPEAT"===r?$("#tta-message-global").append(s("alert-info",e("tta-info-global"))):"NEXT"===r||"PREVIOUS"===r?function(t){if(n&&n.length){let e=i.length,a=i.index(n),s=-1===a?0:("NEXT"===t?a+1:a-1)%e;n=i.eq(s)}else n=i.first();a.apply(n[0]),n.focus(),n[0].scrollIntoView(!0)}(r):"GOTO"===r?function(t,e){let s=i.length,r=(parseInt(e["target-position"])-1)%s;n=i.eq(r),a.apply(n[0]),n.focus(),n[0].scrollIntoView(!0)}(0,o):"GOTO START"===r?window.scrollTo(0,0):$("#tta-message-global").append(s("alert-danger",e("tta-error-message"))))})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),$(document).ready(function(){setTimeout(function(){Prism.highlightAll(),$(document).find("pre[tabindex]").removeAttr("tabindex")},1e3)}),function(){let t=function(t,e){let n=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(".widget-missing-words").each(function(){let t=this,i=$(this),a=$(t).attr("id"),s=JSON.parse((r=i.data("content"),decodeURIComponent(atob(r).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join("")))).map(t=>t.map(t=>t.toLowerCase()));var r;$(this).on("click",".btn-check",function(){let t=$("body").hasClass("gamification"),n=i.find(".missing-word-candidate"),r=n.length,o=n.filter(function(t){return s[t].includes($(this).val().toLowerCase())}),l=o.length;$(this).trigger("gamificate",[l===r,l/r]),t||(n.each(function(){let t=$(this).closest(".sentence"),n=$(this).is(o);t.find(".iconresult").attr("aria-label",e(n?"TextCorrectAnswer":"TextIncorrectAnswer")).html('<i class="fas fa-2x fa-'+(n?"check":"times")+'"></i>')}),l===r&&setObjetivoCompleto("objetivo"+a,i.data("desc"),i.data("desc")),i.find("#result-"+a).html(l+" "+e("TextCorrectAnswers")))}),$(this).on("change",".missing-word-candidate",function(){$(this).closest(".sentence").find(".iconresult").attr("aria-label","").empty()}),$(this).on("click",".btn-reset",function(){i.find(".missing-word-candidate").val(""),i.find(".iconresult").attr("aria-label","").empty(),i.find(".resultado").empty()}),$(".widget-missing-words").on("change",".missing-word-candidate",function(){$(this).closest(".sentence").find(".iconresult").attr("aria-label","").empty()});$("#speech-to-action-"+a).on("speech-to-action",function(a,s,r){if("FINISH"===s)return;let o=$(t).find(".missing-word-candidate"),l=$(t).find(".btn-check"),c=o.filter(function(){return $(this).is(":focus")}).first();if(c.length||(c=o.eq(0)).focus(),"START"!==s&&"CURRENT"!==s)if("NEXT"===s||"PREVIOUS"===s){let t=o.index(c),e="NEXT"===s?(t+1)%o.length:(t-1)%o.length;o.eq(e).focus()}else if("GOTO"===s)o.eq((parseInt(r["target-position"])-1)%o.length).focus();else if("CLOSE"===s&&($(".modal.show").length||$(".alert").length))$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close");else if("SCROLL DOWN"===s)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===s)window.scrollBy(0,.4*-window.innerHeight);else switch(s){case"WRITE":c.val(r.text);break;case"DELETE":c.val("");break;case"REPEAT":$(t).find(".tta-message").append(n("alert-info",e("tta-info-missing-word")));break;case"RESET":i.find(".btn-reset").trigger("click");break;case"CHECK":l.trigger("click");break;case"NONE":default:$(t).find(".tta-message").append(n("alert-danger",e("tta-error-message")))}})})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),$(document).ready(function(){let t=new URLSearchParams(document.location.search).get("element");if(null!==t){let e=$(this).find("#objetivo"+t);if(0==e.get(0).scrollWidth&&0==e.get(0).scrollHeight){let t=e.closest(".card");if(void 0!==t.get(0))t.find(".card-header button").click();else{let t=e.closest(".tab-pane");void 0!==t.get(0)&&$("#"+t.attr("aria-labelledby")).click()}}setTimeout(function(){e.get(0).scrollIntoView()},1e3)}}),function(){let t=function(t,e){let n=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(".widget-correct-word").each(function(){let t=this,i=$(this),a=$(t).attr("id");i.on("click",".btn-check",function(){let t=$("body").hasClass("gamification"),n=i.find(".correct-word"),s=JSON.parse((r=i.data("content"),decodeURIComponent(atob(r).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join("")))).map(t=>t.toLowerCase());var r;let o=s.length,l=n.filter(function(t){return $(this).find(".correct-word-letter").map(function(){return $(this).val().toLowerCase()}).get().join("")==s[t]}),c=l.length;$(this).trigger("gamificate",[c===o,c/o]),t||(n.each(function(){let t=$(this).closest(".correct-word"),n=$(this).is(l);t.find(".iconresult").attr("aria-label",e(n?"TextCorrectAnswer":"TextIncorrectAnswer")).html('<i class="fas fa-2x fa-'+(n?"check":"times")+'"></i>')}),c===o&&setObjetivoCompleto("objetivo"+a,i.data("desc"),i.data("desc")),i.find("#result-"+a).html(c+" "+e("TextCorrectAnswers")))}),i.on("click",".btn-reset",function(){i.find(".iconresult").attr("aria-label","").empty(),i.find(".resultado").empty(),i.find(".correct-word-letter").val("")}),i.on("change",".correct-word-letter",function(){$(this).closest(".sentence").find(".iconresult").attr("aria-label","").empty()});$("#speech-to-action-"+a).on("speech-to-action",function(a,s,r){if("FINISH"===s)return;let o=$(t).find(".correct-word"),l=$(t).find(".btn-check"),c=o.filter(function(){return $(this).find(".correct-word-letter").is(":focus")}).first();if(c.length||(c=o.eq(0)).find(".correct-word-letter").first().focus(),"START"!==s&&"CURRENT"!==s)if("NEXT"===s||"PREVIOUS"===s){let t=o.index(c),e="NEXT"===s?(t+1)%o.length:(t-1)%o.length;o.eq(e).find(".correct-word-letter").first().focus()}else if("GOTO"===s)o.eq((parseInt(r["target-position"])-1)%o.length).find(".correct-word-letter").first().focus();else if("CLOSE"===s&&($(".modal.show").length||$(".alert").length))$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close");else if("SCROLL DOWN"===s)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===s)window.scrollBy(0,.4*-window.innerHeight);else switch(s){case"WRITE":{let t=r.text.split("");c.find(".correct-word-letter").each(function(e){$(this).val(t.length>e?t[e]:"")})}break;case"DELETE":c.find(".correct-word-letter").val("");break;case"REPEAT":$(t).find(".tta-message").append(n("alert-info",e("tta-info-correct-word")));break;case"CHECK":l.trigger("click");break;case"RESET":i.find(".btn-reset").trigger("click");break;case"NONE":default:$(t).find(".tta-message").append(n("alert-danger",e("tta-error-message")))}})})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),function(){let t=function(t){let e=$(this).closest(".widget-button-text").find(".btn-show"),n=e.index($(this));switch(t.which||t.keyCode){case 36:t.preventDefault(),e.first().focus();break;case 35:t.preventDefault(),e.last().focus();break;case 37:e.eq((n-1)%e.length).focus();break;case 39:e.eq((n+1)%e.length).focus();break;case 27:$(this).blur();break;default:return}},e=function(e,n){let i=function(t,e){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",n("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(e).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*e.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(".widget-button-text").each(function(){let e,a=$(this),s=a.attr("id"),r=a.find(".btn-show"),o=0,l=a.find(".btn-show").first();a.on("click",".btn-show",function(){let t=a.find(".shared-text"),e=r.index($(this)),n=t.eq(e);r.closest(".tab").removeClass("show"),r.attr("tabindex","-1").attr("aria-selected","false"),$(this).closest(".tab").addClass("show"),$(this).attr("tabindex","0").attr("aria-selected","true"),t.removeClass("show"),n.addClass("show"),function(){let t=$(this).find(".shared-texts").height();$(this).find(".tabtop").toggleClass("show",t>1e3)}.apply(a)});let c=function(){$(".speech-focused").removeClass("speech-focused"),$(this).addClass("speech-focused"),$(this).closest(".content-element").addClass("speech-focused")};a.on("keydown",".btn-show",t),$("#speech-to-action-"+s).on("speech-to-action",function(t,s,r){"FINISH"!==s?"FINISH"!==s&&("START"===s?(o=0,l.focus()):"SELECT"===s?0===o?(l.is(".active")||l.trigger("click"),a.find(".shared-texts").first().focus(),o=1):e&&e.trigger("click"):"SCROLL DOWN"===s?window.scrollBy(0,.4*window.innerHeight):"SCROLL UP"===s?window.scrollBy(0,.4*-window.innerHeight):"CLOSE"===s&&$(".alert").length?$(".alert").alert("close"):"BACK"===s&&1===o?(l.focus(),this.scrollIntoView(!0),e=null,o=0):"REPEAT"===s?a.closest(".content-element").find(".tta-message").first().append(i("alert-info",n("tta-info-button-text-"+(0===o?"tabs":"region")))):"NEXT"===s||"PREVIOUS"===s||"GOTO"===s?function(t,n){if(0===o){let e=a.find(".btn-show"),i=e.length,s=e.index(l),r=s;switch(t){case"NEXT":r=(s+1)%i;break;case"PREVIOUS":r=(s-1)%i;break;case"GOTO":r=(parseInt(n)-1)%i}l=e.eq(r),c.apply(l[0]),l.focus()}else{let i=a.find(".speech-to-action:visible"),s=i.length,r=0;switch(t){case"NEXT":e&&(r=i.index(e)+1%s);break;case"PREVIOUS":e&&(r=i.index(e)-1%s);break;case"GOTO":r=(parseInt(n)-1)%s}e=i.eq(r),c.apply(e[0]),e.focus(),e[0].scrollIntoView(!0)}}(s,r&&r["target-position"]):a.closest(".content-element").find(".tta-message").first().append(i("alert-danger",n("tta-error-message")))):1===o&&(t.preventDefault(),l.focus(),this.scrollIntoView(!0),e=null,o=0)})})},n=$("html").attr("lang"),i=document.currentScript.src;i=i.substr(0,i.lastIndexOf("/")),fetch(`${i}/../languages/${n}.json`).then(t=>t.json()).then(t=>i18next.createInstance({lng:n,resources:{[n]:{translation:t}}},e))}(),function(){Set.prototype.isSuperset||(Set.prototype.isSuperset=function(t){for(var e of t)if(!this.has(e))return!1;return!0});let t=function(t,e){let n=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(".widget-hangman").each(function(){let t=$(this),i=$(this).attr("id"),{attempts:a,solution:s}=JSON.parse((r=t.data("content"),decodeURIComponent(atob(r).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))));var r;s=s.toUpperCase();let o=new Set(s.split("").filter(t=>" "!==t)),l=a,c=new Set;t.on("submit",function(n){if(n.preventDefault(),0==l)return;let a=t.find(".hangman-letter"),r=a.val().charAt(0).toUpperCase();if(a.val(""),0==r.trim().length)return;if(c.has(r))return;c.add(r);let d=s.split("").map((t,e)=>[t,e]).filter(t=>t[0]===r).map(t=>t[1]);if(d.forEach(e=>t.find(".letter-"+(e+1)).text(r)),!d.length){let n=t.find(".guess-attempts i");n.removeClass("fa-circle-"+l),l-=1,n.addClass("fa-circle-"+l),0===l&&(t.find(".hangman-letter").prop("disabled",!0),t.find(".btn-check").prop("disabled",!0),setTimeout(function(){t.find(".hangman-feedback").text(e("TextIncorrectAnswer"))},150)),setTimeout(function(){t.find(".description .number").text(l)},100)}let h=$("<i />").attr("aria-hidden","true").addClass("status "+(d.length?"fas fa-check":"fas fa-times")),u=$("<div />").attr("aria-live","polite").addClass("typed-letter "+(d.length?"right":"wrong")).text(r).append(h);setTimeout(function(){u.prepend('<span class="sr-only">'+(d.length?e("hangman-correct-letter"):e("hangman-wrong-letter"))+"</span>")},50),a.before(u),c.isSuperset(o)&&(t.find(".hangman-feedback").text(e("TextCorrectAnswer")),setObjetivoCompleto("objetivo"+i,t.data("desc"),t.data("desc")))}),t.on("click",".btn-reset",function(){t.find(".guess-attempts i").removeClass("fa-circle-"+l).addClass("fa-circle-"+a).attr("aria-label",a),c=new Set,l=a,t.find(".hangman-letter").prop("disabled",!1),t.find(".btn-check").prop("disabled",!1),t.find(".typed-letters").find(".typed-letter").remove(),t.find(".letter").filter(function(t){return" "!==s[t]}).html('\n\t\t\t\t\t<span class="sr-only">'+e("hangman-blank")+'</span>\n                    <span class="shown" aria-hidden="true">_</span>'),t.find(".hangman-letter").val(""),t.find(".hangman-feedback").text("")});$("#speech-to-action-"+i).on("speech-to-action",function(i,a,s){if("FINISH"!==a&&"START"!==a&&"CURRENT"!==a)if("CLOSE"===a&&($(".modal.show").length||$(".alert").length))$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close");else if("SCROLL DOWN"===a)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===a)window.scrollBy(0,.4*-window.innerHeight);else if("WRITE"===a&&1===s.text.length)t.find(".hangman-letter").val(s.text[0]),t.find(".btn-check").trigger("click");else switch(a){case"RESET":t.find(".btn-reset").trigger("click");break;case"REPEAT":t.closest(".content-element").find(".tta-message").append(n("alert-info",e("tta-info-hangman")));break;case"NONE":default:t.closest(".content-element").find(".tta-message").append(n("alert-danger",e("tta-error-message")))}})})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),function(){let t=function(t){return decodeURIComponent(atob(t).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))},e=function(){$(this).find("td").each(function(){$(this).removeClass("focused"),$(this).is(":empty")?$(this).attr("tabindex","-1"):$(this).attr("tabindex","").find(".word-item").first().attr("tabindex","-1")})},n=function(){if($(this).addClass("focused"),$(this).is(":empty"))$(this).attr("tabindex","0").focus();else{$(this).attr("tabindex",""),$(this).find(".word-item").first().attr("tabindex","0").focus()}},i=function(t,i){e.apply(this);let a=$(this).find("tr").eq(t).find("td").eq(i);n.apply(a.get(0))},a=function(t,e){switch(t.which||t.keyCode){case 38:t.preventDefault(),function(t){let{row:e,column:n}=t;e>0&&(i.apply(this,[e-1,n]),t.row-=1)}.apply(this,[e]);break;case 40:t.preventDefault(),function(t){let{row:e,column:n}=t;e<$(this).find("tr").length-1&&(i.apply(this,[e+1,n]),t.row+=1)}.apply(this,[e]);break;case 37:t.preventDefault(),function(t){let{row:e,column:n}=t;n>0&&(i.apply(this,[e,n-1]),t.column-=1)}.apply(this,[e]);break;case 27:{t.preventDefault();let n=$(this).find("tr").eq(e.row).find("td").eq(e.column);n.is(":empty")?n.blur():n.find(".word-item").blur();break}case 39:t.preventDefault(),function(t){let{row:e,column:n}=t;n<$(this).find("tr").eq(e).find("td").length-1&&(i.apply(this,[e,n+1]),t.column+=1)}.apply(this,[e]);break;case 36:t.ctrlKey&&(e.row=0),e.column=0,i.apply(this,[e.row,e.column]),t.preventDefault();break;case 35:t.ctrlKey&&(e.row=$(this).find("tr").length-1),e.column=$(this).find("tr").first().find("td").length-1,i.apply(this,[e.row,e.column]),t.preventDefault();break;case 13:case 32:{t.preventDefault();let{row:n,column:i}=e,a=$(this).find("tr").eq(n).find("td").eq(i);a.is(":empty")?a.trigger("click"):a.find(".word-item").first().trigger("click");break}default:return}},s=function(i,s){let r=function(t,e){let n=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",s("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),i=$("<div />").addClass("alert alert-dismissible fade show "+t).html(e).append(n);n.on("click",function(){i.alert("close")});let a=Math.max(6e3,60*e.length);return setTimeout(function(){i.alert("close")},a),i.alert(),i},o=function(n){let i=$(this),r=i.attr("id"),o=i.find(".source-words"),{words:l}=JSON.parse(t(i.data("content")));!function(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}}(l);let c=null,d=l.map((t,e)=>{let n=$("<span />").attr("id","word-item-status-"+r+"-"+e).addClass("status sr-only"),i=$("<span />").attr("id","word-item-content-"+r+"-"+e).text(t);return $("<button/>").attr("aria-labelledby","word-item-content-"+r+"-"+e+" word-item-status-"+r+"-"+e).attr("aria-grabbed","false").attr("draggable","true").attr("tabindex","-1").attr("id","word-item-"+r+"-"+e).addClass("word-item btn btn-success").append(i,n)}),h=$(d).map(function(){return this.toArray()});h.first().attr("tabindex",0),o.find("td").each(function(t){$(this).append(h.eq(t))}),i.on("keydown",function(t){a.apply(this,[t,n])});let u=function(t){t.preventDefault(),c&&($(this).is(":empty")&&(e.apply(i),$(this).attr("tabindex","").addClass("focused").append(c)),c.attr("aria-grabbed","false"),c.attr("tabindex",0),c.find(".status").text(""),c.removeClass("selected"),c.focus(),c=null,i.find(".word-list").attr("aria-dropeffect",""),i.find(".answer-status").attr("aria-label","").empty())},f=function(t){t.stopPropagation(),i.find(".word-list").attr("aria-dropeffect","move"),c&&(c.find(".status").text(""),c.removeClass("selected"),c.attr("aria-grabbed","false")),(c=$(this)).addClass("selected"),c.find(".status").text(s("sentence-order-state-selected")),c.attr("aria-grabbed","true"),$(this).closest(".drag-word-item").attr("tabindex","-1")},p=function(t){let e=t.dataTransfer.getData("text");c=$(document.getElementById(e)),u.apply(t.target,[t])},m=function(t){t.dataTransfer.setData("text",t.target.id),f.apply(t.target,[t])};i.on("click",".drag-word-item",u),i.on("click",".word-item",f),i.find(".word-item").each(function(){this.addEventListener("dragstart",m)}),i.find(".drag-word-item").each(function(){this.addEventListener("dragover",function(t){$(this).is(":empty")&&t.preventDefault()}),this.addEventListener("drop",p)})};$(".sentences-container").each(function(){let i=$(this),a=i.find(".widget-sentence-order"),l=i.attr("id");$("#speech-to-action-"+l).on("speech-to-action",function(t,o,l){if("FINISH"===o)return;let c=i.find("td"),d=c.filter(function(){return $(this).hasClass("focused")}).first();if(d.length||(d=c.eq(0)),n.apply(d.get(0)),"START"!==o&&"CURRENT"!==o)if("CLOSE"===o&&($(".modal.show").length||$(".alert").length))$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close");else if("SCROLL DOWN"===o)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===o)window.scrollBy(0,.4*-window.innerHeight);else if("NEXT"===o||"PREVIOUS"===o){let t=c.index(d),i="NEXT"===o?(t+1)%c.length:(t-1)%c.length,a=c.eq(i);e.apply(d.closest(".widget-sentence-order").get(0)),n.apply(a.get(0))}else if("GOTO"===o){let t=(parseInt(l["target-position"])-1)%a.length,i=a.eq(t).find("td").first();e.apply(d.closest(".widget-sentence-order").get(0)),n.apply(i.get(0))}else switch(o){case"SELECT":d.is(":empty")?d.trigger("click"):d.find(".word-item").trigger("click");break;case"CHECK":i.find(".btn-check").trigger("click");break;case"RESET":i.find(".btn-reset").trigger("click");break;case"REPEAT":i.find(".tta-message").append(r("alert-info",s("tta-info-sentence-order")));break;case"NONE":default:i.find(".tta-message").append(r("alert-danger",s("tta-error-message")))}}),$(this).on("click",".btn-check",function(){let e=$("body").hasClass("gamification"),n=0;a.each(function(){let i,{words:a,solutions:r}=JSON.parse(t($(this).data("content"))),o=$.makeArray($(this).find(".target-words .word-item").map(function(){return $(this).text().trim()}));for(let t in r){let e=r[t].split(/\s+/);i=!0;for(let t in e)e[t]!==o[t]&&(i=!1);if(i){n+=1;break}}if(!e){let t=$("<i />").attr("aria-hidden","true").attr("title",s(i?"TextCorrect":"TextIncorrect")).addClass("icon "+(i?"correct fas fa-check":"wrong fas fa-times"));$(this).find(".answer-status").attr("aria-label",s(i?"TextCorrect":"TextIncorrect")).html(t)}}),$(this).trigger("gamificate",[n===a.length,n/a.length]),e||(n===a.length&&setObjetivoCompleto("objetivo"+l,i.data("desc"),i.data("desc")),i.find(".resultado").html(s("TextNumberCorrect",{num:n})))}),$(this).on("click",".btn-reset",function(){i.find(".resultado").empty(),a.each(function(){$(this).trigger("reset")})}),a.each(function(){let t={row:0,column:0},e=this;o.apply(e,[t]),$(this).on("reset",function(){(function(t){let e=$(this);t.row=0,t.column=0,e.find(".answer-status").attr("aria-label","").empty(),e.find(".drag-word-item").attr("tabindex","").removeClass("focused").filter(":empty").attr("tabindex","-1");let n=e.find(".word-item");n.attr("tabindex",-1).first().attr("tabindex",0),e.find(".source-words").find("td").each(function(t){$(this).append(n.eq(t))})}).apply(e,[t])})})})},r=$("html").attr("lang"),o=document.currentScript.src;o=o.substr(0,o.lastIndexOf("/")),fetch(`${o}/../languages/${r}.json`).then(t=>t.json()).then(t=>i18next.createInstance({lng:r,resources:{[r]:{translation:t}}},s))}(),function(){let t=function(t,e){let n=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a},i=function(t){let e=$(this).closest(".dropdown").find(".dropdown-menu"),n=$(this).closest(".widget-match-columns").find(".column-term .btn"),i=n.index($(this));switch(t.which||t.keyCode){case 36:n.attr("tabindex","-1"),n.first().attr("tabindex","0").focus();break;case 35:n.attr("tabindex","-1"),n.last().attr("tabindex","0").focus();break;case 37:n.attr("tabindex","-1"),n.eq((i-1)%n.length).attr("tabindex","0").focus();break;case 39:n.attr("tabindex","-1"),n.eq((i+1)%n.length).attr("tabindex","0").focus();break;case 38:setTimeout(function(){e.find(".column-link").last().focus()},100);break;case 40:case 13:case 32:setTimeout(function(){e.find(".column-link").first().focus()},100);break;case 27:$(this).blur();break;default:return}},a=function(t){let e=$(this).find(".column-link"),n=e.filter(":focus").first(),i=n.length?n:e.first(),a=e.index(i);switch(t.which||t.keyCode){case 38:e.eq((a-1)%e.length).focus(),t.preventDefault();break;case 40:e.eq((a+1)%e.length).focus(),t.preventDefault();break;case 36:e.first().focus(),t.preventDefault();break;case 35:e.last().focus(),t.preventDefault();break;default:return}};$(".widget-match-columns").each(function(){let t=$(this),s=0,r=$(this).attr("id"),o=null,l=JSON.parse((c=t.data("content"),decodeURIComponent(atob(c).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))));var c;let d=l.flat();d.sort((t,e)=>t.localeCompare(e));let h=t.find(".column-term");t.find(".term-button").first().attr("tabindex","0"),h.each(function(t){$(this).addClass("init").find(".term-button").data("term",d[t]).html(d[t])});let u=function(e){e.preventDefault(),o&&($(this).append(o),o.attr("aria-grabbed","false"),o.find(".btn").focus(),o=null),t.find(".column-list").attr("aria-dropeffect","")},f=function(e){e.stopPropagation(),t.find(".column-list").attr("aria-dropeffect","move"),o&&o.attr("aria-grabbed","false"),(o=$(this)).attr("aria-grabbed","true")},p=function(t){let e=t.dataTransfer.getData("id");o=$(document.getElementById(e)),u.apply(t.target,[t])},m=function(e){let n=$(e.target).closest(".column-term");t.find(".dropdown.show").dropdown("toggle"),t.find(".dropdown").not(".show").find(".dropdown-menu.show").removeClass("show"),e.dataTransfer.setData("id",n.attr("id")),e.dataTransfer.effectAllowed="move",f.apply(n[0],[e])};t.find(".column-term").each(function(){this.addEventListener("dragstart",m)}),t.find(".column-list").each(function(){this.addEventListener("dragover",function(t){$(t.target).is(".column-list")&&(t.dataTransfer.dropEffect="move",t.preventDefault())}),this.addEventListener("drop",p)}),t.on("click",".column-link",function(t){u.apply(document.getElementById($(this).data("column")),[t])}),t.on("click",".term-button",function(){let t=this;setTimeout(function(){$(t).closest(".dropdown").find(".column-link").first().focus()},100)}),t.on("keydown",".dropdown-menu",a),t.on("keydown",'.dropdown .btn[data-toggle="dropdown"]',i),t.on("shown.bs.dropdown",".dropdown",function(t){f.apply($(this).closest(".column-term")[0],[t])}),t.on("hidden.bs.dropdown",".dropdown",function(){$(this).closest(".column-term").attr("aria-grabbed","false"),t.find(".column-list").attr("aria-dropeffect","")});$("#speech-to-action-"+r).on("speech-to-action",function(i,a,r){if("FINISH"===a)return;let l,c=(l=0==(s=t.find(".dropdown.show").length?1:0)?t.find(".column-term .btn"):t.find(".dropdown.show").first().find(".column-link")).filter(":focus").first();if(c.length||(c=l.eq(0)),c.focus(),"START"!==a&&"CURRENT"!==a)if("CLOSE"===a&&($(".modal.show").length||$(".alert").length))$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close"),t.find(".dropdown.show").dropdown("toggle"),t.find(".dropdown").not(".show").find(".dropdown-menu.show").removeClass("show"),o&&o.focus();else if("SCROLL DOWN"===a)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===a)window.scrollBy(0,.4*-window.innerHeight);else if("NEXT"===a||"PREVIOUS"===a){let t=l.index(c),e="NEXT"===a?(t+1)%l.length:(t-1)%l.length;l.eq(e).focus()}else if("GOTO"===a){let t=(parseInt(r["target-position"])-1)%l.length;l.eq(t).focus()}else if("MATCH"===a&&0===s){let e=parseInt(r.number)-1,n=t.find(".match-column .column-list"),i=c.closest(".column-term");n.eq(e%n.length).append(i),c.focus()}else switch(a){case"SELECT":c.trigger("click");break;case"CHECK":t.closest(".content-element").find(".btn-check").trigger("click");break;case"RESET":t.closest(".content-element").find(".btn-reset").trigger("click");break;case"REPEAT":t.closest(".content-element").find(".tta-message").append(n("alert-info",e("tta-info-match-columns-"+(1===s?"options":"terms"))));break;case"NONE":default:t.find(".tta-message").append(n("alert-danger",e("tta-error-message")))}}),t.closest(".content-element").on("click",".btn-check",function(){let n=$("body").hasClass("gamification"),i=$(this).closest(".content-element").find(".match-column .column-term"),a=i.length,s=$(this).closest(".content-element").find(".match-column .column-list"),o=i.filter(function(){let t=s.index($(this).closest(".column-list"));return!l[t].includes($(this).find(".term-button").data("term"))}),c=i.length-o.length;$(this).trigger("gamificate",[c===a,c/a]),n||(t.find(".match-terms .column-list").append(o),t.closest(".content-element").find(".resultado").html(e("TextNumberCorrect",{num:c})),c===a&&setObjetivoCompleto("objetivo"+r,t.data("desc"),t.data("desc")))}),t.closest(".content-element").on("click",".btn-reset",function(){t.find(".column-list").attr("aria-dropeffect",""),o&&(o.attr("aria-grabbed","false"),o=null);let e=t.find(".column-term");e.removeClass("init"),t.find(".term-button").text("").data("term","").attr("tabindex","-1").first().attr("tabindex","0"),t.find(".match-terms .column-list").append(e),e.each(function(t){$(this).addClass("init").find(".term-button").data("term",d[t]).html(d[t])}),t.closest(".content-element").find(".resultado").empty()})})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),function(){let t=function(){$(document).find(".widget-puzzle").each(function(){let t=$(this).find(".interactive-layer").first();if(t.attr("viewBox")){let e=t.find(".clip-placeholder"),n=t.attr("viewBox").split(" ")[2]/t.width(),i=Math.min(...e.map(function(){return parseInt($(this).attr("width"))}).get()),a=Math.min(...e.map(function(){return parseInt($(this).attr("height"))}).get()),s=Math.min(i,a);t.find(".clip-text").each(function(){$(this).css("font-size",Math.min(s,Math.round(30*n))+"px")}),t.find(".clip-text-circle").each(function(){$(this).attr("r",Math.min(s/2,Math.round(24*n))),$(this).css("stroke-width",Math.round(2*n))})}})};$(window).on("resize",t);let e=function(t,e,n,i){let a=t.getImageData(e.x,e.y,e.w,e.h),s=document.createElement("canvas");s.width=e.w,s.height=e.h,s.getContext("2d").putImageData(a,0,0);let r=function(t,e,n,i){return $("<input />").attr("data-pos",n+1).attr("id","piece-"+e+"-"+n).addClass("piece img-responsive").attr("type","image").attr("draggable","true").attr("aria-grabbed","false").attr("aria-expanded","false").attr("aria-haspopup","true").attr("aria-controls","dropdown-piece-"+e+"-"+n).attr("alt",i).attr("data-toggle","dropdown").attr("tabindex","-1").attr("src",t.toDataURL())}(s,n,i,e.altImg);return t.fillRect(e.x,e.y,e.w,e.h),r},n=function(n,i){let a=$(".widget-puzzle").length,s=0,r=function(t,e){let n=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",i("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(e).append(n);n.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*e.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a},o=function(t){let e=$(this).closest(".dropdown").find(".dropdown-menu"),n=$(this).closest(".widget-puzzle").find(".piece"),i=n.index($(this));switch(t.which||t.keyCode){case 36:n.attr("tabindex","-1"),n.first().attr("tabindex","0").focus();break;case 35:n.attr("tabindex","-1"),n.last().attr("tabindex","0").focus();break;case 37:n.attr("tabindex","-1"),n.eq((i-1)%n.length).attr("tabindex","0").focus();break;case 39:n.attr("tabindex","-1"),n.eq((i+1)%n.length).attr("tabindex","0").focus();break;case 38:setTimeout(function(){e.find(".clip-link").last().focus()},100);break;case 40:case 13:case 32:setTimeout(function(){e.find(".clip-link").first().focus()},100);break;case 27:$(this).blur();break;default:return}},l=function(t){let e=$(this).find(".clip-link"),n=e.filter(":focus").first(),i=n.length?n:e.first(),a=e.index(i);switch(t.which||t.keyCode){case 38:e.eq((a-1)%e.length).focus(),t.preventDefault();break;case 40:e.eq((a+1)%e.length).focus(),t.preventDefault();break;case 36:e.first().focus(),t.preventDefault();break;case 35:e.last().focus(),t.preventDefault();break;default:return}};$(".widget-puzzle").each(function(){let n=$(this),c=null,d=n.attr("id"),h=n.find(".puzzle-background").first(),u=n.find(".interactive-layer").first(),f=JSON.parse((p=n.data("content"),decodeURIComponent(atob(p).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))));var p;let m=0,g=function(){n.find(".piece-placeholder:empty").first().append($(this).closest(".dropdown")),async function(t,e){await new Promise(n=>{let i=$("#tta-message-"+t);i.text(""),setTimeout(function(){let t=$("<span />").addClass("sr-only").text(e);i.append(t),n(),setTimeout(function(){t.remove()},300)},100)})}(d,i("puzzle-move-element-back",{element:$(this).attr("alt")}))},v=function(t){if(t.preventDefault(),c){let t=c.parent();t.parent().empty(),$(this).append(t),c.attr("aria-grabbed","false"),c.focus(),c=null}n.find(".piece-wrapper, .piece-placeholder").attr("aria-dropeffect","")},b=function(t){t.stopPropagation(),n.find(".piece-wrapper:empty, .piece-placeholder:empty").attr("aria-dropeffect","move"),c&&c.attr("aria-grabbed","false"),(c=$(this)).attr("aria-grabbed","true")},w=function(t){let e=t.dataTransfer.getData("id");c=$(document.getElementById(e)),v.apply(this,[t])},y=function(t){n.find(".dropdown.show").dropdown("toggle"),n.find(".dropdown").not(".show").find(".dropdown-menu.show").removeClass("show"),t.dataTransfer.setData("id",this.id),t.dataTransfer.effectAllowed="move",b.apply(this,[t])},_=new Image;_.onload=function(){let p=document.createElement("canvas");p.width=this.width,p.height=this.height;let C=p.getContext("2d");C.fillStyle="white",C.fillRect(0,0,p.width,p.height),C.drawImage(_,0,0),C.fillStyle="#fff";let x=f.map((t,n)=>e(C,t,d,n));!function(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}}(x),$("#pieces-list-"+d+" .piece-placeholder .dropdown").each(function(t){$(this).append(x[t]),0===t&&x[t].attr("tabindex",0)}),n.find("[data-toggle]").dropdown(),u.attr("viewBox",`0 0 ${this.width} ${this.height}`),h.attr("src",p.toDataURL("image/jpeg")),n.find(".piece").each(function(){this.addEventListener("dragstart",y)}).on("click",function(){let t=this;setTimeout(function(){$(t).closest(".dropdown").find(".clip-link").first().focus()},100)}),n.on("keydown",".dropdown-menu",l),n.on("keydown",'.dropdown .piece[data-toggle="dropdown"]',o),n.find(".piece-wrapper, .piece-placeholder").each(function(){this.addEventListener("dragover",function(t){0===$(this).find(".piece").length&&(t.dataTransfer.dropEffect="move",t.preventDefault())}),this.addEventListener("drop",w)});$("#speech-to-action-"+d).on("speech-to-action",function(t,e,a){if("FINISH"===e)return;let s;s=0==(m=n.find(".dropdown.show").length?1:0)?n.find(".piece"):n.find(".dropdown.show").first().find(".clip-link");let o=s.filter(":focus").first();if(o.length||(o=s.eq(0)),o.focus(),"START"!==e&&"CURRENT"!==e)if("CLOSE"===e)$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close"),n.find(".dropdown.show").dropdown("toggle"),n.find(".dropdown").not(".show").find(".dropdown-menu.show").removeClass("show"),c&&c.focus();else if("SCROLL DOWN"===e)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===e)window.scrollBy(0,.4*-window.innerHeight);else if("NEXT"===e||"PREVIOUS"===e){let t=s.index(o),n="NEXT"===e?(t+1)%s.length:(t-1)%s.length;s.eq(n).focus()}else if("GOTO"===e){let t=(parseInt(a["target-position"])-1)%s.length;s.eq(t).focus()}else if("MATCH"===e&&0===m){let e=parseInt(a.number),i=n.find('.piece-wrapper[data-pos="'+e+'"]'),s=i.find(".piece").first();s.length&&g.apply(s[0]),c=o,setTimeout(function(){v.apply(i[0],[t])},1)}else switch(e){case"SELECT":o.trigger("click");break;case"CHECK":n.closest(".content-element").find(".btn-check").trigger("click");break;case"RESET":n.closest(".content-element").find(".btn-reset").trigger("click");break;case"REPEAT":n.closest(".content-element").find(".tta-message").append(r("alert-info",i("tta-info-puzzle-"+(1===m?"options":"terms"))));break;case"NONE":default:n.closest(".content-element").find(".tta-message").append(r("alert-danger",i("tta-error-message")))}}),n.closest(".content-element").on("click",".btn-check",function(){let t=$("body").hasClass("gamification"),e=$(this).closest(".content-element").find(".piece-wrapper .piece"),a=e.filter(function(t){return $(this).data("pos")!==$(this).closest(".piece-wrapper").data("pos")}),s=e.length-a.length;if($(this).trigger("gamificate",[s===f.length,s/f.length]),!t){let t=n.find(".piece-placeholder:empty");a.each(function(e){t.eq(e).append($(this).closest(".dropdown"))}),n.closest(".content-element").find(".resultado").html(i("TextNumberCorrect",{num:s})),s===f.length&&setObjetivoCompleto("objetivo"+d,n.data("desc"),n.data("desc"))}}),n.closest(".content-element").on("click",".btn-reset",function(){n.find(".piece-wrapper, .piece-placeholder").attr("aria-dropeffect",""),c&&(c.attr("aria-grabbed","false"),c=null);let t=n.find(".piece-wrapper .piece");n.find(".piece-placeholder:empty").each(function(e){$(this).append(t.eq(e).closest(".dropdown"))}),n.closest(".content-element").find(".resultado").empty()}),n.on("click",".clip-link",function(t){t.preventDefault();let e=$(this).data("pos"),i=n.find('.piece-wrapper[data-pos="'+e+'"]'),a=i.find(".piece").first();a.length&&g.apply(a[0]),setTimeout(function(){v.apply(i[0],[t])},1)}),n.on("show.bs.dropdown",".dropdown",function(t){let e=$(this).closest("foreignObject");e.length&&u.append(e)}),n.on("shown.bs.dropdown",".dropdown",function(t){b.apply($(this).find(".piece")[0],[t])}),n.on("hide.bs.dropdown",".dropdown",function(){let t=$(this).closest(".piece-wrapper"),e=$(this).closest("foreignObject");if(t.length&&e.length){let i=t.data("pos")+1,a=n.find('.piece-wrapper[data-pos="'+i+'"]').closest("foreignObject");a.length&&e.insertBefore(a)}}),n.on("hidden.bs.dropdown",".dropdown",function(){$(this).find(".piece").attr("aria-grabbed","false"),n.find(".piece-wrapper, .piece-placeholder").attr("aria-dropeffect","")}),(s+=1)===a&&setTimeout(t,100)},_.crossOrigin="Anonymous",_.src=h.data("src")})},i=$("html").attr("lang"),a=document.currentScript.src;a=a.substr(0,a.lastIndexOf("/")),fetch(`${a}/../languages/${i}.json`).then(t=>t.json()).then(t=>i18next.createInstance({lng:i,resources:{[i]:{translation:t}}},n))}(),function(){let t=function(t,e){let n=function(t,n,i,a,s,r){t.beginPath(),t.font="bold 35px "+s,t.fillStyle="white",t.strokeStyle=r,t.lineWidth=4;let o=t.getImageData(n.x,n.y,n.w,n.h),l=document.createElement("canvas");l.width=n.w,l.height=n.h,l.getContext("2d").putImageData(o,0,0);let c=function(t,n,i,a){let s=e("animation-show-element",{pos:i+1});return $("<input />").attr("data-pos",i+1).attr("id","piece-"+n+"-"+i).addClass("piece img-responsive").attr("type","image").attr("alt",s).attr("aria-disabled","false").data("alt",s).data("img",a).attr("src",t.toDataURL())}(l,i,a,n.altImg);return t.fillRect(n.x,n.y,n.w,n.h),t.rect(n.x+4,n.y+4,n.w-8,n.h-8),t.stroke(),t.textAlign="center",t.textBaseline="middle",t.fillStyle=r,t.fillText(a+1,n.x+n.w/2,n.y+2+n.h/2),t.closePath(),c},i=function(t,n){let i=$("<button />").data("dismiss","alert").attr("type","button").attr("aria-hidden","false").attr("aria-label",e("Close")).addClass("close").html(' <span aria-hidden="true">&times;</span>'),a=$("<div />").addClass("alert alert-dismissible fade show "+t).html(n).append(i);i.on("click",function(){a.alert("close")});let s=Math.max(6e3,60*n.length);return setTimeout(function(){a.alert("close")},s),a.alert(),a};$(".widget-animation").each(function(){let t=$(this),a=getComputedStyle(t.closest(".content-element").find("[id^=heading-]")[0]),s=a["font-family"],r=a.color,o=t.attr("id"),l=t.find(".puzzle-background").first(),c=t.find(".interactive-layer").first(),d=JSON.parse((h=t.data("content"),decodeURIComponent(atob(h).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))));var h;let u=new Image,f=d.length,p=function(n,a,s){if("FINISH"===a)return;let r=t.find(".piece"),o=r.filter(":focus").first();if(o.length||(o=r.eq(0)),o.focus(),"START"!==a&&"CURRENT"!==a)if("CLOSE"===a)$(".modal.show").length&&$(".modal.show").modal("hide"),$(".alert").length&&$(".alert").alert("close");else if("SCROLL DOWN"===a)window.scrollBy(0,.4*window.innerHeight);else if("SCROLL UP"===a)window.scrollBy(0,.4*-window.innerHeight);else if("NEXT"===a||"PREVIOUS"===a){let t=r.index(o),e="NEXT"===a?(t+1)%r.length:(t-1)%r.length;r.eq(e).focus()}else if("GOTO"===a){let t=(parseInt(s["target-position"])-1)%r.length;r.eq(t).focus()}else switch(a){case"SELECT":o.trigger("click");break;case"RESET":t.closest(".content-element").find(".btn-reset").trigger("click");break;case"REPEAT":t.closest(".content-element").find(".tta-message").append(i("alert-info",e("tta-info-animation")));break;case"NONE":default:t.closest(".content-element").find(".tta-message").append(i("alert-danger",e("tta-error-message")))}};u.onload=function(){let e=document.createElement("canvas");e.width=this.width,e.height=this.height;let i=e.getContext("2d");i.fillStyle="white",i.fillRect(0,0,e.width,e.height),i.drawImage(u,0,0),i.fillStyle="#fff";let a=d.map((t,e)=>n(i,t,o,e,s,r));t.find(".piece-wrapper").each(function(t){$(this).append(a[t])}),c.attr("viewBox",`0 0 ${this.width} ${this.height}`),l.attr("src",e.toDataURL("image/jpeg")),t.on("click",".piece",function(){if($(this).hasClass("show"))return;let n=t.find(".piece").index(this),a=d[n];i.fillStyle="white",i.fillRect(a.x,a.y,a.w,a.h),l.attr("src",e.toDataURL("image/jpeg")),$(this).attr("alt",$(this).data("img")).attr("aria-disabled","true").addClass("show"),0==(f-=1)&&setObjetivoCompleto("objetivo"+o,t.data("desc"),t.data("desc"))}),$("#speech-to-action-"+o).on("speech-to-action",p),t.closest(".content-element").on("click",".btn-reset",function(){f=d.length,t.find(".piece").each(function(){$(this).removeClass("show").attr("alt",$(this).data("img")).attr("aria-disabled","false")}),d.map((t,e)=>n(i,t,o,e,s,r)),setTimeout(function(){l.attr("src",e.toDataURL("image/jpeg"))},200)})},u.crossOrigin="Anonymous",u.src=l.data("src")})},e=$("html").attr("lang"),n=document.currentScript.src;n=n.substr(0,n.lastIndexOf("/")),fetch(`${n}/../languages/${e}.json`).then(t=>t.json()).then(n=>i18next.createInstance({lng:e,resources:{[e]:{translation:n}}},t))}(),$(document).ready(function(){window.location.hostname.startsWith("dev")&&$("#analytics a").attr("href",window.location.origin+"/la/")}),function(t){"use strict";var e=function(){function t(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(t.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(t){this._dropEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(t){this._effectAllowed=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),t.prototype.clearData=function(t){null!=t?delete this._data[t.toLowerCase()]:this._data={}},t.prototype.getData=function(t){return this._data[t.toLowerCase()]||""},t.prototype.setData=function(t,e){this._data[t.toLowerCase()]=e},t.prototype.setDragImage=function(t,e,i){var a=n._instance;a._imgCustom=t,a._imgOffset={x:e,y:i}},t}();t.DataTransfer=e;var n=function(){function t(){if(this._lastClick=0,t._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),navigator.maxTouchPoints){var n=document,i=this._touchstart.bind(this),a=this._touchmove.bind(this),s=this._touchend.bind(this),r=!!e&&{passive:!1,capture:!1};n.addEventListener("touchstart",i,r),n.addEventListener("touchmove",a,r),n.addEventListener("touchend",s),n.addEventListener("touchcancel",s)}}return t.getInstance=function(){return t._instance},t.prototype._touchstart=function(e){var n=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<t._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target))return e.preventDefault(),void this._reset();this._reset();var i=this._closestDraggable(e.target);i&&(this._dispatchEvent(e,"mousemove",e.target)||this._dispatchEvent(e,"mousedown",e.target)||(this._dragSource=i,this._ptDown=this._getPoint(e),this._lastTouch=e,e.preventDefault(),setTimeout(function(){n._dragSource==i&&null==n._img&&n._dispatchEvent(e,"contextmenu",i)&&n._reset()},t._CTXMENU),t._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){n._isDragEnabled=!0,n._touchmove(e)},t._PRESSHOLDAWAIT))))}},t.prototype._touchmove=function(t){if(this._shouldCancelPressHoldMove(t))this._reset();else if(this._shouldHandleMove(t)||this._shouldHandlePressHoldMove(t)){var e=this._getTarget(t);if(this._dispatchEvent(t,"mousemove",e))return this._lastTouch=t,void t.preventDefault();this._dragSource&&!this._img&&this._shouldStartDragging(t)&&(this._dispatchEvent(t,"dragstart",this._dragSource),this._createImage(t),this._dispatchEvent(t,"dragenter",e)),this._img&&(this._lastTouch=t,t.preventDefault(),this._dispatchEvent(t,"drag",this._dragSource),e!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(t,"dragenter",e),this._lastTarget=e),this._moveImage(t),this._isDropZone=this._dispatchEvent(t,"dragover",e))}},t.prototype._touchend=function(t){if(this._shouldHandle(t)){if(this._dispatchEvent(this._lastTouch,"mouseup",t.target))return void t.preventDefault();this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",t.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(t.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},t.prototype._shouldHandle=function(t){return t&&!t.defaultPrevented&&t.touches&&t.touches.length<2},t.prototype._shouldHandleMove=function(e){return!t._ISPRESSHOLDMODE&&this._shouldHandle(e)},t.prototype._shouldHandlePressHoldMove=function(e){return t._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},t.prototype._shouldCancelPressHoldMove=function(e){return t._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>t._PRESSHOLDMARGIN},t.prototype._shouldStartDragging=function(e){var n=this._getDelta(e);return n>t._THRESHOLD||t._ISPRESSHOLDMODE&&n>=t._PRESSHOLDTHRESHOLD},t.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new e,clearInterval(this._pressHoldInterval)},t.prototype._getPoint=function(t,e){return t&&t.touches&&(t=t.touches[0]),{x:e?t.pageX:t.clientX,y:e?t.pageY:t.clientY}},t.prototype._getDelta=function(e){if(t._ISPRESSHOLDMODE&&!this._ptDown)return 0;var n=this._getPoint(e);return Math.abs(n.x-this._ptDown.x)+Math.abs(n.y-this._ptDown.y)},t.prototype._getTarget=function(t){for(var e=this._getPoint(t),n=document.elementFromPoint(e.x,e.y);n&&"none"==getComputedStyle(n).pointerEvents;)n=n.parentElement;return n},t.prototype._createImage=function(e){this._img&&this._destroyImage();var n=this._imgCustom||this._dragSource;if(this._img=n.cloneNode(!0),this._copyStyle(n,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var i=n.getBoundingClientRect(),a=this._getPoint(e);this._imgOffset={x:a.x-i.left,y:a.y-i.top},this._img.style.opacity=t._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},t.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},t.prototype._moveImage=function(t){var e=this;requestAnimationFrame(function(){if(e._img){var n=e._getPoint(t,!0),i=e._img.style;i.position="absolute",i.pointerEvents="none",i.zIndex="999999",i.left=Math.round(n.x-e._imgOffset.x)+"px",i.top=Math.round(n.y-e._imgOffset.y)+"px"}})},t.prototype._copyProps=function(t,e,n){for(var i=0;i<n.length;i++){var a=n[i];t[a]=e[a]}},t.prototype._copyStyle=function(e,n){if(t._rmvAtts.forEach(function(t){n.removeAttribute(t)}),e instanceof HTMLCanvasElement){var i=e,a=n;a.width=i.width,a.height=i.height,a.getContext("2d").drawImage(i,0,0)}for(var s=getComputedStyle(e),r=0;r<s.length;r++){var o=s[r];o.indexOf("transition")<0&&(n.style[o]=s[o])}n.style.pointerEvents="none";for(r=0;r<e.children.length;r++)this._copyStyle(e.children[r],n.children[r])},t.prototype._dispatchEvent=function(e,n,i){if(e&&i){var a=document.createEvent("Event"),s=e.touches?e.touches[0]:e;return a.initEvent(n,!0,!0),a.button=0,a.which=a.buttons=1,this._copyProps(a,e,t._kbdProps),this._copyProps(a,s,t._ptProps),a.dataTransfer=this._dataTransfer,i.dispatchEvent(a),a.defaultPrevented}return!1},t.prototype._closestDraggable=function(t){for(;t;t=t.parentElement)if(t.hasAttribute("draggable")&&t.draggable)return t;return null},t}();n._instance=new n,n._THRESHOLD=5,n._OPACITY=.5,n._DBLCLICK=500,n._CTXMENU=900,n._ISPRESSHOLDMODE=!1,n._PRESSHOLDAWAIT=400,n._PRESSHOLDMARGIN=25,n._PRESSHOLDTHRESHOLD=0,n._rmvAtts="id,class,style,draggable".split(","),n._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),n._ptProps="pageX,pageY,clientX,clientY,screenX,screenY,offsetX,offsetY".split(","),t.DragDropTouch=n}(DragDropTouch||(DragDropTouch={})),function(){let t=document.currentScript.src;t=t.substr(0,t.lastIndexOf("/")),$(document).ready(function(){let e;switch($("html").attr("lang")){case"es":e=`${t}/../languages/data-tables/es-ES.json`;break;case"fr":e=`${t}/../languages/data-tables/fr-FR.json`;break;case"el":e=`${t}/../languages/data-tables/el.json`;break;case"lt":e=`${t}/../languages/data-tables/lt.json`;break;default:e=`${t}/../languages/data-tables/en-GB.json`}fetch(e).then(t=>t.json()).then(t=>{$(".widget-table").DataTable({ordering:!0,paging:!0,searching:!0,info:!0,language:"es",language:t})})})}(),function(){const t=$("body").data("unit");$("#upload-file-notes").on("change",function(){const t=new FileReader;t.onload=(t=>{$(this).trigger("annotations.loaded",[JSON.parse(t.target.result)]),$(this).val("")}),t.readAsText(this.files[0])}),$("#upload-notes").on("click",function(){$("#upload-file-notes").trigger("click")}),$("#download-notes").on("click",function(){const e=localStorage.getItem(t+"-note"),n=localStorage.getItem(t),i=new File([JSON.stringify({notes:e,highlights:n},null,2)],`notes-${t}.json`,{type:"application/json"}),a=document.createElement("a"),s=URL.createObjectURL(i);a.href=s,a.download=i.name,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s)})}();