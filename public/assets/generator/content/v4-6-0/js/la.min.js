(()=>{const e=(t,o)=>{const a=JSON.parse(localStorage.getItem("indieopenla"));function i(t){return t=t.split("-"),new Date(t[0],t[1]-1,t[2],2,0,0).getTime()}$("#pageTitle").html(o("la-page-title")),$("#visits").html(o("la-visits")),$("#dailyVisits").html(o("la-daily-visits")),$("#otherUnits").html(o("la-other-units")),fetch(a.url+"/la.json?nocache="+(new Date).getTime()).then(t=>t.json()).then(t=>{var e;e=t,t=a.autor,$("#unidades").append(e.unit.num_visits_open),$("#currenttitle").append(e.unit.current_title),function(t){let e=[];for(var a=0;a<t.length;a++)e.push([i(t[a].day),parseInt(t[a].num_visits_open)]),a+1!=t.length&&(datei=new Date(t[a].day),datei.setHours(0,0,0,0),datei.setDate(datei.getDate()+1),datef=new Date(t[a+1].day),datef.setHours(0,0,0,0),datei.getTime()!==datef.getTime()&&function(t,e,a){var n=new Date(t);for(;n<e;)a.push([i(n.getFullYear()+"-"+(n.getMonth()+1<=9?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+n.getDate()),0]),n.setDate(n.getDate()+1)}(datei,datef,e));$("#graficaProgreso").empty(),$("#graficaProgreso").append('<div id="container-progreso"></div>'),"es"==n&&Highcharts.setOptions({lang:{loading:"Cargando...",months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekdays:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],shortMonths:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],exportButtonTitle:"Exportar",printButtonTitle:"Importar",downloadPNG:"Descargar imagen PNG",downloadJPEG:"Descargar imagen JPEG",downloadPDF:"Descargar imagen PDF",downloadSVG:"Descargar imagen SVG",printChart:"Imprimir",viewFullscreen:"Ver en pantalla completa",downloadCSV:"Descarga CSV",downloadXLS:"Descarga XLS",viewData:"Ver tabla de datos"}});Highcharts.stockChart("container-progreso",{time:{timezone:"Europe/Madrid"},chart:{alignTicks:!1},rangeSelector:{buttons:[{count:1,type:"month",text:"1m",title:o("la-1m")},{count:3,type:"month",text:"3m",title:o("la-3m")},{count:6,type:"month",text:"6m",title:o("la-6m")},{type:"ytd",text:o("la-ytd"),title:o("la-ahf")},{count:1,type:"year",text:o("la-1y"),title:o("la-1a")},{type:"all",text:o("la-all"),title:o("la-view-all")}],inputDateFormat:"%e %b, %Y",inputEnabled:!0,selected:0},title:{text:o("la-daily-visits")},accessibility:{announceNewData:{enabled:!0}},xAxis:{type:"category"},yAxis:{title:{text:o("la-visits")}},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0}}},tooltip:{dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b",day:"%A, %e %b, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"}},series:[{type:"column",name:o("la-daily-visits"),colorByPoint:!1,data:e,dataGrouping:{units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}]})}(e.unit.daily_visits),function(n,i){if(0<n.length){let t=document.getElementById("unitsAuthor"),e=document.getElementById("nameAuthor");e.append(i);let a=`
                <table class="table">
                    <thead>
                        <tr>
                            <th>${o("la-visits")}</th>
                            <th>${o("la-title")}</th>
                        </tr>
                    </thead>
                    <tbody>
                `;n.forEach(t=>{var e=Math.round(t.num_visits_open);0!==e&&(a+="<tr><td>",a+=e+"</td>",a+="<td>",a+=`<a href="https://opencontent.upct.es"${t.url}>${t.current_title}</a></td></tr>`)}),a+=`
                        </tbody>
                    </table>
                `,t.innerHTML=a}}(e.author.top10_units_open,t)})};let n=(navigator.language||navigator.userLanguage).split("-")[0],t=document.currentScript.src;t=t.substr(0,t.lastIndexOf("/")),fetch(`${t}/../languages/${n}.json`).then(t=>t.json()).then(t=>i18next.createInstance({lng:n,resources:{[n]:{translation:t}}},e))})();