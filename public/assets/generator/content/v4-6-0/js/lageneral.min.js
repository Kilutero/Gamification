(()=>{const e=(t,i)=>{function e(n,e){if(0<e.length){let t=document.getElementById("unitsAuthor"+n),a=`
                    <table class="table">
                        <thead>
                            <tr>
                                <th>${i("la-visits")}</th>
                                <th>${i("la-title")}</th>
                            </tr>
                        </thead>
                        <tbody>
                `;e.forEach(t=>{a+="<tr><td>";var e="Open"==n?t.num_visits_open:t.num_visits_lti;a+=Math.round(e)+"</td>",a+="<td>",a+=`<a href=${"Open"==n?"https://opencontent.upct.es"+t.url:void 0}>${t.current_title}</a></td></tr>`}),a+=`
                        </tbody>
                     </table>
                `,t.innerHTML=a}}function o(t,e){var a="#graficaProgreso"+t;$(a).empty(),$(a).append('<div id="container-progreso'+t+'"></div>'),"es"==n&&Highcharts.setOptions({lang:{loading:"Cargando...",months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekdays:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],shortMonths:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],exportButtonTitle:"Exportar",printButtonTitle:"Importar",downloadPNG:"Descargar imagen PNG",downloadJPEG:"Descargar imagen JPEG",downloadPDF:"Descargar imagen PDF",downloadSVG:"Descargar imagen SVG",printChart:"Imprimir",viewFullscreen:"Ver en pantalla completa",downloadCSV:"Descarga CSV",downloadXLS:"Descarga XLS",viewData:"Ver tabla de datos"}}),Highcharts.stockChart("container-progreso"+t,{time:{timezone:"Europe/Madrid"},chart:{alignTicks:!1},rangeSelector:{buttons:[{count:1,type:"month",text:"1m",title:i("la-1m")},{count:3,type:"month",text:"3m",title:i("la-3m")},{count:6,type:"month",text:"6m",title:i("la-6m")},{type:"ytd",text:i("la-ytd"),title:i("la-ahf")},{count:1,type:"year",text:i("la-1y"),title:i("la-1a")},{type:"all",text:i("la-all"),title:i("la-view-all")}],inputDateFormat:"%e %b, %Y",inputEnabled:!0,selected:0},title:{text:i("la-daily-visits")},accessibility:{announceNewData:{enabled:!0}},xAxis:{type:"category"},yAxis:{title:{text:i("la-visits")}},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0}}},tooltip:{dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b",day:"%A, %e %b, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"}},series:[{type:"column",name:i("la-daily-visits"),colorByPoint:!1,data:e,dataGrouping:{units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}]})}function s(t){return t=t.split("-"),new Date(t[0],t[1]-1,t[2],2,0,0).getTime()}$("#pageTitle").html(i("la-page-title")),$("#visits").html(i("la-visits")),$("#currenttitle").html(i("la-page-header")),$("#open-tab").html(i("la-open-access")),$("#dailyVisits").html(i("la-daily-visits")),$(".mostVisitedUnits").html(i("la-visited-units")),fetch("/la/data/la.json?nocache="+(new Date).getTime()).then(t=>t.json()).then(t=>{t=t,$("#unidades").append(t.num_visits),$("#unidadesDetalles").append("<h4>"+t.num_visits_open+" "+i("la-open-access")+" -"+t.num_visits_lti+" LMS</h4>"),function(t){let e=[],a=[];for(var n=0;n<t.length;n++)e.push([s(t[n].day),parseInt(t[n].num_visits_open)]),a.push([s(t[n].day),parseInt(t[n].num_visits_lti)]),n+1!=t.length&&(datei=new Date(t[n].day),datei.setHours(0,0,0,0),datei.setDate(datei.getDate()+1),datef=new Date(t[n+1].day),datef.setHours(0,0,0,0),datei.getTime()!==datef.getTime()&&function(t,e,a,n){var i=new Date(t);for(;i<e;)a.push([s(i.getFullYear()+"-"+(i.getMonth()+1<=9?"0"+(i.getMonth()+1):i.getMonth()+1)+"-"+i.getDate()),0]),n.push([s(i.getFullYear()+"-"+(i.getMonth()+1<=9?"0"+(i.getMonth()+1):i.getMonth()+1)+"-"+i.getDate()),0]),i.setDate(i.getDate()+1)}(datei,datef,e,a));o("Open",e),o("LTI",a)}(t.daily_visits),e("Open",t.top10_units_open),e("LTI",t.top10_units_lti)})};let n=(navigator.language||navigator.userLanguage).split("-")[0],t=document.currentScript.src;t=t.substr(0,t.lastIndexOf("/")),fetch(`${t}/../languages/${n}.json`).then(t=>t.json()).then(t=>i18next.createInstance({lng:n,resources:{[n]:{translation:t}}},e))})();