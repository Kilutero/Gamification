$(window).on("beforeunload ",function(){finUnidad()});var objetivos_grabados,inicioTiempo,numeroObjetivos=0,porcentajeunidad=0,nota=-1;function iniciarEvaluacion(){$.ajax({async:!1,type:"POST",url:"../../evaluationunit/php/funcioneslaltiv3.php",data:{function:0},error:function(a){401!=a.status?bloquearInteraccion("ERROR T1: SESIÓN CADUCADA. DEBES ENTRAR NUEVAMENTE EN EL AULA VIRTUAL Y LANZAR LA UNIDAD.",2):bloquearInteraccion("ERROR T1: ¡TIENES VARIAS UNIDADES ABIERTAS! NO PUEDES REALIZAR LA EVALUACIÓN CON OTRAS UNIDADES ABIERTAS.",2)}}).done(function(){desBloquearInteraccion()})}function finUnidad(){$.ajax({async:!1,type:"POST",url:"../../evaluationunit/php/funcioneslaltiv3.php",data:{function:1}})}function keepAlive(){$.ajax({async:!1,type:"POST",url:"../../evaluationunit/php/funcioneslaltiv3.php",data:{function:5},error:function(a){401!=a.status?bloquearInteraccion("ERROR T1: SESIÓN CADUCADA. DEBES ENTRAR NUEVAMENTE EN EL AULA VIRTUAL Y LANZAR LA UNIDAD.",2):bloquearInteraccion("ERROR T1: ¡TIENES VARIAS UNIDADES ABIERTAS! NO PUEDES REALIZAR LA EVALUACIÓN CON OTRAS UNIDADES ABIERTAS.",2)}})}function bloquearInteraccion(a,o){switch(o){case 1:$("#sharedModal").append('<div class="cargando" style="height:100%; width:100%; position: absolute; z-index: 10000; background-color: rgba(0, 0, 0, 0.5); top: 0;"><div class="text-center" style="position: absolute; top: 30%; left: 47%;"><i class="fa fa-spinner fa-spin fa-3x" aria-hidden="true"></i><p class="white" style="color:white;"><strong>'+a+"</strong></p></div></div>");break;case 2:$("#sharedModal").append('<div class="cargando" style="height:100%; width:100%; position: absolute; z-index: 10000; background-color: rgba(0, 0, 0, 0.5); top: 0;"><div class="text-center" style="position: absolute; top: 30%; left: 25%;"><i class="fa fa-exclamation-triangle fa-3x" aria-hidden="true"></i><p class="white" style="color:white;"><strong>'+a+"</strong></p></div></div>")}$("#sharedModal").modal("show")}function desBloquearInteraccion(){$("#sharedModal").modal("hide"),$("#sharedModal").empty()}function inicializarEvaluacion(){bloquearInteraccion("Cargando Evaluación",1),nota=objetivos.nota,iniciarEvaluacion()}function getObjetivoEstado(a){for(var o="",n=(new Object,0);n<objetivos.length;n++)for(var i=0;i<objetivos[n].length;i++)objetivos[n][i]._id==a&&(o=objetivos[n][i]._porcentaje);return o}